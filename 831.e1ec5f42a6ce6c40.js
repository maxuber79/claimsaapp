"use strict";(self.webpackChunkclaims_app=self.webpackChunkclaims_app||[]).push([[831],{6831:(f,m,i)=>{i.r(m),i.d(m,{AdminUserManagementComponent:()=>F});var o=i(2881),l=i(4341),u=i(5207),e=i(1360),g=i(9885),_=i(5072);const p=()=>["/dashboard"],v=(s,d,t)=>({"bg-success":s,"bg-warning text-dark":d,"bg-danger":t}),b=s=>["/dashboard/admin-users/edit-role",s];function h(s,d){1&s&&(e.j41(0,"div",18)(1,"div",19)(2,"span",20),e.EFF(3,"Cargando..."),e.k0s()()())}function E(s,d){if(1&s){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"span",21),e.EFF(9),e.k0s()(),e.j41(10,"td")(11,"span",21),e.EFF(12),e.k0s()(),e.j41(13,"td",22)(14,"button",23),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.toggleUser(n.uid,!n.activo))}),e.EFF(15),e.k0s(),e.j41(16,"a",24),e.EFF(17," Editar Rol "),e.k0s(),e.j41(18,"button",25),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.editUser(n.uid,!n.activo))}),e.EFF(19," Editar perfil "),e.k0s()()()}if(2&s){const t=d.$implicit;e.R7$(2),e.JRh(t.uid.slice(-6).toUpperCase()),e.R7$(2),e.Lme("",t.name," ",t.last_name,""),e.R7$(2),e.JRh(t.email),e.R7$(2),e.Y8G("ngClass",t.activo?"bg-success":"bg-danger"),e.R7$(),e.SpI(" ",t.activo?"Habilitado":"Deshabilitado"," "),e.R7$(2),e.Y8G("ngClass",e.sMw(13,v,"Administrador"===t.rol,"Ejecutivo"===t.rol,!t.rol||""===t.rol)),e.R7$(),e.SpI(" ",t.rol||"Sin rol"," "),e.R7$(2),e.ZvI("btn btn-full --",t.activo?"danger":"success"," btn-sm"),e.R7$(),e.SpI(" ",t.activo?"Deshabilitar":"Habilitar"," "),e.R7$(),e.Y8G("routerLink",e.eq3(17,b,t.uid))}}let F=(()=>{class s{userService;router;users=[];filteredUsers=[];searchTerm="";loading=!0;isSaving=!1;isLoading=!0;constructor(t,r){this.userService=t,this.router=r}ngOnInit(){this.loadUsers()}loadUsers(){this.userService.getAllUsers().subscribe(t=>{this.users=t,this.filteredUsers=t,this.isLoading=!1})}filterUsers(){const t=this.searchTerm.toLowerCase();this.filteredUsers=this.users.filter(r=>r.name?.toLowerCase().includes(t)||r.email?.toLowerCase().includes(t))}toggleUserStatus(t){const r=!t.activo;this.userService.toggleUserStatus(t.uid,r).then(()=>{t.activo=r})}toggleUser(t,r){this.userService.toggleUserStatus(t,r).then(()=>{})}editUser(t,r){console.log("Editando usuario con UID:",t,"Nuevo estado:",r),this.router.navigate(["/dashboard/admin-users/profile-edit",t])}static \u0275fac=function(r){return new(r||s)(e.rXU(g.D),e.rXU(_.Ix))};static \u0275cmp=e.VBU({type:s,selectors:[["app-admin-user-management"]],decls:45,vars:5,consts:[[1,"row"],[1,"col-12","text-start","grid-margin"],[1,"card"],[1,"card-body"],[1,"col-12"],["aria-label","breadcrumb",1,""],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item"],[3,"routerLink"],["aria-current","page",1,"breadcrumb-item","active"],["class","text-center ",4,"ngIf"],[1,"col-12","grid-margin"],[1,"row","form-group"],["for","search-term",1,"form-label"],["id","search-term","type","text","placeholder","Ingresa aqui nombre de usuario",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"co-12","grid-margin"],[1,"table","table-light","table-hover","align-middle","mb-0"],[4,"ngFor","ngForOf"],[1,"text-center"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"badge",3,"ngClass"],[1,"d-flex","gap-2"],[3,"click"],[1,"btn","btn-full","--primary","btn-sm",3,"routerLink"],[1,"btn","btn-full","--info","btn-sm",3,"click"]],template:function(r,n){1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",0)(5,"div",4)(6,"nav",5)(7,"ol",6)(8,"li",7)(9,"a",8),e.EFF(10,"Home"),e.k0s()(),e.j41(11,"li",9),e.EFF(12,"Admin Users"),e.k0s()()()()()()()()(),e.j41(13,"div",0)(14,"div",4),e.DNE(15,h,4,0,"div",10),e.k0s()(),e.j41(16,"div",0)(17,"div",11)(18,"div",2)(19,"div",3)(20,"div",12)(21,"label",13),e.EFF(22,"Buscador de usuarios"),e.k0s(),e.j41(23,"input",14),e.mxI("ngModelChange",function(c){return e.DH7(n.searchTerm,c)||(n.searchTerm=c),c}),e.bIt("input",function(){return n.filterUsers()}),e.k0s()()()()()(),e.j41(24,"div",0)(25,"div",15)(26,"div",2)(27,"div",3)(28,"table",16)(29,"thead")(30,"tr")(31,"th"),e.EFF(32,"#"),e.k0s(),e.j41(33,"th"),e.EFF(34,"Nombre"),e.k0s(),e.j41(35,"th"),e.EFF(36,"Email"),e.k0s(),e.j41(37,"th"),e.EFF(38,"Status"),e.k0s(),e.j41(39,"th"),e.EFF(40,"Rol"),e.k0s(),e.j41(41,"th"),e.EFF(42,"Acciones"),e.k0s()()(),e.j41(43,"tbody"),e.DNE(44,E,20,19,"tr",17),e.k0s()()()()()()),2&r&&(e.R7$(9),e.Y8G("routerLink",e.lJ4(4,p)),e.R7$(6),e.Y8G("ngIf",n.isLoading),e.R7$(8),e.R50("ngModel",n.searchTerm),e.R7$(21),e.Y8G("ngForOf",n.filteredUsers))},dependencies:[o.MD,o.YU,o.Sq,o.bT,l.YN,l.me,l.BC,l.vS,u.iI,u.Wk],encapsulation:2})}return s})()}}]);