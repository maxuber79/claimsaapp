import{a as O}from"./chunk-34SF47SS.js";import"./chunk-2BL6JQEY.js";import"./chunk-N6RA7QK6.js";import{b as V,d as j,g as H,q as W}from"./chunk-5RABQZIW.js";import"./chunk-3OADCOYV.js";import{Ba as S,Da as c,Ea as f,Ia as U,Ja as r,Ka as h,L as p,La as u,M as g,Ma as x,Na as C,Oa as E,Pa as M,Qa as y,Ta as I,Ua as w,Wa as A,ba as a,fa as v,ha as _,ib as k,jb as L,kb as T,la as b,mb as F,sa as m,ta as i,ua as n,ub as N,vb as D,xb as R}from"./chunk-5TBBY7BX.js";var P=()=>["/dashboard"],q=(o,t,e)=>({"bg-success":o,"bg-warning text-dark":t,"bg-danger":e}),$=o=>["/dashboard/admin-users/edit-role",o];function z(o,t){o&1&&(i(0,"div",18)(1,"div",19)(2,"span",20),r(3,"Cargando..."),n()()())}function G(o,t){if(o&1){let e=S();i(0,"tr")(1,"td"),r(2),n(),i(3,"td"),r(4),n(),i(5,"td"),r(6),n(),i(7,"td")(8,"span",21),r(9),n()(),i(10,"td")(11,"span",21),r(12),n()(),i(13,"td",22)(14,"button",23),c("click",function(){let l=p(e).$implicit,d=f();return g(d.toggleUser(l.uid,!l.activo))}),r(15),n(),i(16,"a",24),r(17," Editar Rol "),n(),i(18,"button",25),c("click",function(){let l=p(e).$implicit,d=f();return g(d.editUser(l.uid,!l.activo))}),r(19," Editar perfil "),n()()()}if(o&2){let e=t.$implicit;a(2),h(e.uid.slice(-6).toUpperCase()),a(2),x("",e.name," ",e.last_name),a(2),h(e.email),a(2),m("ngClass",e.activo?"bg-success":"bg-danger"),a(),u(" ",e.activo?"Habilitado":"Deshabilitado"," "),a(2),m("ngClass",A(13,q,e.rol==="Administrador",e.rol==="Ejecutivo",!e.rol||e.rol==="")),a(),u(" ",e.rol||"Sin rol"," "),a(2),U(y("btn btn-full --",e.activo?"danger":"success"," btn-sm")),a(),u(" ",e.activo?"Deshabilitar":"Habilitar"," "),a(),m("routerLink",w(17,$,e.uid))}}var B=class o{constructor(t,e){this.userService=t;this.router=e}users=[];filteredUsers=[];searchTerm="";loading=!0;isSaving=!1;isLoading=!0;ngOnInit(){this.loadUsers()}loadUsers(){this.userService.getAllUsers().subscribe(t=>{this.users=t,this.filteredUsers=t,this.isLoading=!1})}filterUsers(){let t=this.searchTerm.toLowerCase();this.filteredUsers=this.users.filter(e=>e.name?.toLowerCase().includes(t)||e.email?.toLowerCase().includes(t))}toggleUserStatus(t){let e=!t.activo;this.userService.toggleUserStatus(t.uid,e).then(()=>{t.activo=e})}toggleUser(t,e){this.userService.toggleUserStatus(t,e).then(()=>{})}editUser(t,e){console.log("Editando usuario con UID:",t,"Nuevo estado:",e),this.router.navigate(["/dashboard/admin-users/profile-edit",t])}static \u0275fac=function(e){return new(e||o)(v(O),v(N))};static \u0275cmp=_({type:o,selectors:[["app-admin-user-management"]],decls:45,vars:5,consts:[[1,"row"],[1,"col-12","text-start","grid-margin"],[1,"card"],[1,"card-body"],[1,"col-12"],["aria-label","breadcrumb",1,""],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item"],[3,"routerLink"],["aria-current","page",1,"breadcrumb-item","active"],["class","text-center ",4,"ngIf"],[1,"col-12","grid-margin"],[1,"row","form-group"],["for","search-term",1,"form-label"],["id","search-term","type","text","placeholder","Ingresa aqui nombre de usuario",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"co-12","grid-margin"],[1,"table","table-light","table-hover","align-middle","mb-0"],[4,"ngFor","ngForOf"],[1,"text-center"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"badge",3,"ngClass"],[1,"d-flex","gap-2"],[3,"click"],[1,"btn","btn-full","--primary","btn-sm",3,"routerLink"],[1,"btn","btn-full","--info","btn-sm",3,"click"]],template:function(e,s){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",0)(5,"div",4)(6,"nav",5)(7,"ol",6)(8,"li",7)(9,"a",8),r(10,"Home"),n()(),i(11,"li",9),r(12,"Admin Users"),n()()()()()()()()(),i(13,"div",0)(14,"div",4),b(15,z,4,0,"div",10),n()(),i(16,"div",0)(17,"div",11)(18,"div",2)(19,"div",3)(20,"div",12)(21,"label",13),r(22,"Buscador de usuarios"),n(),i(23,"input",14),M("ngModelChange",function(d){return E(s.searchTerm,d)||(s.searchTerm=d),d}),c("input",function(){return s.filterUsers()}),n()()()()()(),i(24,"div",0)(25,"div",15)(26,"div",2)(27,"div",3)(28,"table",16)(29,"thead")(30,"tr")(31,"th"),r(32,"#"),n(),i(33,"th"),r(34,"Nombre"),n(),i(35,"th"),r(36,"Email"),n(),i(37,"th"),r(38,"Status"),n(),i(39,"th"),r(40,"Rol"),n(),i(41,"th"),r(42,"Acciones"),n()()(),i(43,"tbody"),b(44,G,20,19,"tr",17),n()()()()()()),e&2&&(a(9),m("routerLink",I(4,P)),a(6),m("ngIf",s.isLoading),a(8),C("ngModel",s.searchTerm),a(21),m("ngForOf",s.filteredUsers))},dependencies:[F,k,L,T,W,V,j,H,R,D],encapsulation:2})};export{B as AdminUserManagementComponent};
