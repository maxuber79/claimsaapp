"use strict";(self.webpackChunkclaims_app=self.webpackChunkclaims_app||[]).push([[69],{2419:(w,y,a)=>{a.d(y,{B:()=>E});var f=a(1360),r=a(9967),c=a(3273),h=a(8455),I=a(5558),e=a(6354),v=a(4796),R=a(9885);let E=(()=>{class F{authService;userService;firestore=(0,f.WQX)(r._7);constructor(b,d){this.authService=b,this.userService=d,console.log("%c<<< Start CLAIMS service >>>","background: #fff3cd; color: #664d03; padding: 2px 5px;")}createClaim(b,d){const u=d.id||(0,r.H9)((0,c.rJ)(this.firestore,`users/${b}/claims`)).id,p=(0,r.H9)(this.firestore,`users/${b}/claims/${u}`);return(0,r.BN)(p,{...d,id:u})}updateClaim(b,d){const u=(0,r.H9)(this.firestore,`users/${b}/claims/${d.id}`);return(0,r.mZ)(u,{...d})}deleteClaim(b,d){const u=(0,r.H9)(this.firestore,`users/${b}/claims/${d}`);return(0,r.kd)(u)}getUserClaims(b){const d=(0,r.rJ)(this.firestore,`users/${b}/claims`);return(0,r.xs)(d,{idField:"id"})}getAllClaims(){const b=(0,r.rJ)(this.firestore,"users");return console.log("\u{1f50d} Buscando todos los reclamos de todos los ejecutivos...",b),(0,h.H)((0,c.GG)(b)).pipe((0,I.n)(d=>{const u=d.docs.map(p=>{const x=p.id,g=(0,r.rJ)(this.firestore,`users/${x}/claims`);return(0,c.GG)(g).then(k=>k.docs.map(C=>({...C.data(),uidEjecutivo:x})))});return(0,h.H)(Promise.all(u))}),(0,e.T)(d=>d.flat()))}getClaimsByUid(b){const d=(0,r.rJ)(this.firestore,`users/${b}/claims`);return(0,h.H)((0,c.GG)(d)).pipe((0,e.T)(u=>u.docs.map(p=>({...p.data(),uidEjecutivo:b,id:p.id}))))}static \u0275fac=function(d){return new(d||F)(f.KVO(v.u),f.KVO(R.D))};static \u0275prov=f.jDH({token:F,factory:F.\u0275fac,providedIn:"root"})}return F})()},4843:(w,y,a)=>{a.d(y,{_:()=>c});var f=a(9350),r=a(7707);function c(h,I){const e="object"==typeof I;return new Promise((v,R)=>{const E=new r.Ms({next:F=>{v(F),E.unsubscribe()},error:R,complete:()=>{e?v(I.defaultValue):R(new f.G)}});h.subscribe(E)})}},4927:(w,y,a)=>{a.d(y,{_:()=>e});var f=a(2881),r=a(1360),c=a(2419);function h(v,R){if(1&v&&r.nrm(0,"i"),2&v){const E=r.XpG();r.ZvI("bi ",E.trendIconLeft,"")}}function I(v,R){if(1&v&&r.nrm(0,"i"),2&v){const E=r.XpG();r.ZvI("bi ",E.trendIcon," text-white")}}let e=(()=>{class v{claimsService;icon="";count="";label="";color="primary";constructor(E){this.claimsService=E}ngOnInit(){}footerText;trendIcon;trendIconLeft;static \u0275fac=function(F){return new(F||v)(r.rXU(c.B))};static \u0275cmp=r.VBU({type:v,selectors:[["app-card-metric"]],inputs:{icon:"icon",count:"count",label:"label",color:"color",footerText:"footerText",trendIcon:"trendIcon",trendIconLeft:"trendIconLeft"},decls:15,vars:13,consts:[[1,"card","h-100","shadow-sm"],[1,"card-body","d-flex","justify-content-between","align-items-center","p-4"],[1,"d-flex","align-items-center","gap-3"],[1,"card-text","text-muted","m-0","f-size-3"],[1,"card-footer","d-flex","justify-content-between","align-items-center","py-2","px-3",3,"ngClass"],[1,"d-flex","align-items-center","gap-2","text-white"],[3,"class",4,"ngIf"]],template:function(F,j){1&F&&(r.j41(0,"div",0)(1,"div",1)(2,"div",2),r.nrm(3,"i"),r.j41(4,"div")(5,"h3"),r.EFF(6),r.k0s(),r.j41(7,"p",3),r.EFF(8),r.k0s()()()(),r.j41(9,"div",4)(10,"div",5),r.DNE(11,h,1,3,"i",6),r.j41(12,"small"),r.EFF(13),r.k0s()(),r.DNE(14,I,1,3,"i",6),r.k0s()()),2&F&&(r.R7$(3),r.STu("bi ",j.icon," f-size-20 text-",j.color,""),r.R7$(2),r.ZvI("card-title m-0 fw-bold text-",j.color,""),r.R7$(),r.JRh(j.count),r.R7$(2),r.JRh(j.label),r.R7$(),r.Y8G("ngClass","bg-"+j.color),r.R7$(2),r.Y8G("ngIf",j.trendIconLeft),r.R7$(2),r.JRh(j.footerText),r.R7$(),r.Y8G("ngIf",j.trendIcon))},dependencies:[f.MD,f.YU,f.bT],styles:[".card-extended[_ngcontent-%COMP%]{transition:transform .2s ease;border-radius:1rem}.card-extended[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.card-extended[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500;min-height:40px;color:#fff!important}"]})}return v})()},6810:(w,y,a)=>{a.d(y,{y:()=>F});var f=a(467),r=a(9967),c=a(3273),h=a(4843),I=a(5558),e=a(6354),v=a(1360),R=a(6335),E=a(4796);let F=(()=>{class j{firestore;auth;authService;constructor(d,u,p){this.firestore=d,this.auth=u,this.authService=p,console.log("%c<<< Start TODO service >>>","background: #fff3cd; color: #664d03; padding: 2px 5px;")}addTodo(d){var u=this;return(0,f.A)(function*(){const p=yield(0,h._)(u.authService.getCurrentUser());if(!p?.uid)throw new Error("Usuario no autenticado");const x=(0,r.rJ)(u.firestore,`users/${p.uid}/todos`),g=(0,r.H9)(x),k=new Date,C={...d,id:g.id,completed:!1,createdAt:k,updatedAt:k};console.log("\u{1f9fe} Creando tarea en:",`users/${p.uid}/todos/${g.id}`),console.log("\u{1f4dd} Datos:",C),yield(0,r.BN)(g,C)})()}getTodos(){return this.authService.getCurrentUser().pipe((0,I.n)(d=>{const u=(0,r.rJ)(this.firestore,`users/${d.uid}/todos`);return(0,r.xs)(u,{idField:"id"})}))}updateTodo(d,u){var p=this;return(0,f.A)(function*(){const x=yield(0,h._)(p.authService.getCurrentUser());if(!x?.uid)throw new Error("Usuario no autenticado");const g=(0,r.H9)(p.firestore,`users/${x.uid}/todos/${d}`);yield(0,r.mZ)(g,{...u,updatedAt:c.Dc.now()})})()}deleteTodo(d){var u=this;return(0,f.A)(function*(){const p=yield(0,h._)(u.authService.getCurrentUser());if(!p?.uid)throw new Error("Usuario no autenticado");const x=(0,r.H9)(u.firestore,`users/${p.uid}/todos/${d}`);yield(0,r.kd)(x)})()}clearAllTodos(){var d=this;return(0,f.A)(function*(){const u=yield(0,h._)(d.getTodos()),p=yield(0,h._)(d.authService.getCurrentUser());if(!p?.uid)throw new Error("Usuario no autenticado");const x=u.map(g=>(0,r.kd)((0,r.H9)(d.firestore,`users/${p.uid}/todos/${g.id}`)));yield Promise.all(x)})()}getPendingTodosCount(){return this.authService.getCurrentUser().pipe((0,I.n)(d=>{const u=(0,r.rJ)(this.firestore,`users/${d.uid}/todos`),p=(0,r.P)(u,(0,r._M)("completed","==",!1));return(0,r.xs)(p).pipe((0,e.T)(x=>x.length))}))}getTodoById(d){var u=this;return(0,f.A)(function*(){const p=yield(0,h._)(u.authService.getCurrentUser());if(!p?.uid)throw new Error("Usuario no autenticado");const x=(0,r.H9)(u.firestore,`users/${p.uid}/todos/${d}`),g=yield(0,r.x7)(x);if(!g.exists())throw new Error("Tarea no encontrada");return g.data()})()}static \u0275fac=function(u){return new(u||j)(v.KVO(r._7),v.KVO(R.Nj),v.KVO(E.u))};static \u0275prov=v.jDH({token:j,factory:j.\u0275fac,providedIn:"root"})}return j})()},7759:(w,y,a)=>{a.d(y,{I:()=>x});var f=a(6354),r=a(7673),c=a(9974),h=a(4360),I=a(3669),e=a(1985),v=a(3236),R=a(9470);var j=a(8750),d=a(9437),u=a(1360),p=a(7643);let x=(()=>{class g{http;BASE_PATH="assets/data/";DATA_FILE="dashboard-data.json";constructor(C){this.http=C,console.log("%c<<< Start MOCK-DATA service >>>","background: #fff3cd; color: #664d03; padding: 2px 5px;")}getDashboardMetrics(){return this.http.get(`${this.BASE_PATH}dashboard-data.json`)}getTicketGraph(){return this.http.get(`${this.BASE_PATH}${this.DATA_FILE}`).pipe((0,f.T)(C=>C.chartData.tickets))}getSatisfactionData(){return this.http.get(`${this.BASE_PATH}satisfaction.json`)}getChannelsData(){return this.http.get(`${this.BASE_PATH}channels.json`)}getNotifications(){return this.http.get(`${this.BASE_PATH}notifications.json`)}getReclamos(){return this.http.get(`${this.BASE_PATH}reclamos.json`).pipe(function b(g=1/0){let k;k=g&&"object"==typeof g?g:{count:g};const{count:C=1/0,delay:T,resetOnSuccess:M=!1}=k;return C<=0?I.D:(0,c.N)((P,D)=>{let S,G=0;const $=()=>{let N=!1;S=P.subscribe((0,h._)(D,A=>{M&&(G=0),D.next(A)},void 0,A=>{if(G++<C){const U=()=>{S?(S.unsubscribe(),S=null,$()):N=!0};if(null!=T){const V="number"==typeof T?function F(g=0,k,C=v.b){let T=-1;return null!=k&&((0,R.m)(k)?C=k:T=k),new e.c(M=>{let P=function E(g){return g instanceof Date&&!isNaN(g)}(g)?+g-C.now():g;P<0&&(P=0);let D=0;return C.schedule(function(){M.closed||(M.next(D++),0<=T?this.schedule(void 0,T):M.complete())},P)})}(T):(0,j.Tg)(T(A,G)),B=(0,h._)(D,()=>{B.unsubscribe(),U()},()=>{D.complete()});V.subscribe(B)}else U()}else D.error(A)})),N&&(S.unsubscribe(),S=null,$())};$()})}(2),(0,d.W)(C=>(console.error("\u274c Error al cargar reclamos:",C),(0,r.of)([]))))}generateUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(C){const T=16*Math.random()|0;return("x"===C?T:3&T|8).toString(16)})}static \u0275fac=function(T){return new(T||g)(u.KVO(p.Qq))};static \u0275prov=u.jDH({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()},9069:(w,y,a)=>{a.r(y),a.d(y,{routes:()=>Ae});var f=a(467),r=a(5207),c=a(4341),h=a(2881),I=a(4843),e=a(1360),v=a(6810),R=a(9332),E=a(4796),F=a(5072);const j=(n,l)=>({"bg-success-subtle":n,"":l}),b=n=>({"fw-bold":!0,"completed-text":n}),d=n=>({"completed-text":n}),u=(n,l,t)=>({"text-bg-danger":n,"text-bg-warning":l,"text-bg-secondary":t}),p=(n,l)=>({"bg-success":n,"bg-danger":l}),x=(n,l)=>({"btn-warning":n,"btn-outline-success":l});function g(n,l){1&n&&(e.j41(0,"div",29),e.EFF(1," El t\xedtulo es obligatorio. "),e.k0s())}function k(n,l){1&n&&e.nrm(0,"i",45)}function C(n,l){if(1&n){const t=e.RV6();e.j41(0,"li",30)(1,"div",31)(2,"div",32),e.DNE(3,k,1,0,"i",33),e.EFF(4),e.k0s(),e.j41(5,"small",34),e.EFF(6),e.k0s(),e.nrm(7,"br"),e.j41(8,"span",35),e.EFF(9),e.k0s(),e.j41(10,"span",36),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"span",37),e.EFF(14),e.k0s()(),e.j41(15,"div",38)(16,"span",39),e.EFF(17),e.k0s(),e.j41(18,"button",40),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.deleteTodo(i.id))}),e.nrm(19,"i",24),e.EFF(20," Eliminar "),e.k0s(),e.j41(21,"button",41),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.toggleComplete(i))}),e.nrm(22,"i",42),e.EFF(23),e.k0s(),e.j41(24,"button",43),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.editTodo(i.id))}),e.nrm(25,"i",44),e.EFF(26," Editar "),e.k0s()()()}if(2&n){const t=l.$implicit;e.Y8G("ngClass",e.l_i(17,j,t.completed,!t.completed)),e.R7$(2),e.Y8G("ngClass",e.eq3(20,b,t.completed)),e.R7$(),e.Y8G("ngIf",t.completed),e.R7$(),e.JRh(t.title),e.R7$(),e.Y8G("ngClass",e.eq3(22,d,t.completed)),e.R7$(),e.JRh(t.description),e.R7$(2),e.Y8G("ngClass",e.sMw(24,u,"high"===t.priority,"medium"===t.priority,"low"===t.priority)),e.R7$(),e.JRh("high"===t.priority?"Alta":"medium"===t.priority?"Media":"low"===t.priority?"Baja":"Desconocida"),e.R7$(2),e.JRh(e.i5U(12,14,t.dueDate,"shortDate")),e.R7$(3),e.JRh(t.id),e.R7$(2),e.Y8G("ngClass",e.l_i(28,p,t.completed,!t.completed)),e.R7$(),e.SpI(" ",t.completed?"Completada":"Pendiente"," "),e.R7$(4),e.Y8G("ngClass",e.l_i(31,x,t.completed,!t.completed)),e.R7$(2),e.SpI(" ",t.completed?"Desmarcar":"Completar"," ")}}let T=(()=>{class n{todoService;alertService;fb;authService;route;router;todoForm;todos=[];otraCondicion=!0;condicion=!0;constructor(t,o,i,s,m,_){this.todoService=t,this.alertService=o,this.fb=i,this.authService=s,this.route=m,this.router=_,console.log("%c<<< Constructor TODO-LIST >>>","background: #fff3cd; color: #664d03; padding: 2px 5px;"),this.todoForm=this.fb.group({title:["",[c.k0.required,c.k0.minLength(3)]],description:[""],dueDate:[null],priority:["",c.k0.required]})}ngOnInit(){var t=this;return(0,f.A)(function*(){console.log("%c<<< ngOnInit TODO-LIST >>>","background: #6610f2; color: #ffffff; padding: 2px 5px;");const o=yield(0,I._)(t.authService.getCurrentUser());if(!o||!o.uid)return t.alertService.error("Usuario no autenticado"),void console.error("\u274c Usuario no autenticado");console.log("\u{1f7e2} Usuario autenticado:",o.uid),t.todoService.getTodos().subscribe(i=>{t.todos=i,console.log("\u{1f4cb} Tareas recibidas:",t.todos)})})()}onSubmit(){var t=this;return(0,f.A)(function*(){if(t.todoForm.invalid)return t.todoForm.markAllAsTouched(),void t.alertService.warning("Por favor, completa todos los campos requeridos.");const o=t.todoForm.value;console.log("%c\u{1f4e4} Enviando tarea a Firestore:","color: #0d6efd",o);try{console.log("\u{1f4e4} Enviando tarea al servicio TodoService..."),yield t.todoService.addTodo({title:o.title,description:o.description,dueDate:o.dueDate,priority:o.priority}),t.alertService.success("Tu tarea fue guardada correctamente"),console.log("%c\u2705 Tarea guardada con \xe9xito","color: #198754"),t.todoForm.reset()}catch(i){t.alertService.error("Ocurri\xf3 un error al guardar la tarea"),console.error("%c\u274c Error al guardar tarea:","color: red",i?.message??i)}})()}deleteTodo(t){var o=this;return(0,f.A)(function*(){if((yield o.alertService.confirm("\xbfDeseas eliminar esta tarea?")).isConfirmed)try{yield o.todoService.deleteTodo(t),o.alertService.success("Tarea eliminada correctamente")}catch(s){console.error("\u274c Error al eliminar tarea:",s),o.alertService.error("No se pudo eliminar la tarea")}})()}toggleComplete(t){var o=this;return(0,f.A)(function*(){try{const i=!t.completed;yield o.todoService.updateTodo(t.id,{completed:i}),i?o.alertService.showToastSuccess("Marcado como completado","\xc9xito"):o.alertService.showToastWarning("Marcado como pendiente","Atenci\xf3n")}catch(i){o.alertService.showToastError("No se pudo actualizar el estado","Error"),console.error(i)}})()}clearAll(){var t=this;return(0,f.A)(function*(){if((yield t.alertService.confirm("\xbfEliminar todas las tareas?")).isConfirmed)try{yield t.todoService.clearAllTodos(),t.alertService.success("Todas las tareas fueron eliminadas")}catch(i){console.error("\u274c Error al limpiar tareas:",i),t.alertService.error("No se pudieron eliminar las tareas")}})()}editTodo(t){this.router.navigate(["/dashboard/todo-list/todo-edit/",t])}testAlert(){this.alertService.showToastSuccess("\xa1Todo sali\xf3 bien!","\xc9xito"),console.log("%c\u2139\ufe0f Alerta de informaci\xf3n mostrada","color: #0dcaf0")}static \u0275fac=function(o){return new(o||n)(e.rXU(v.y),e.rXU(R.u),e.rXU(c.ok),e.rXU(E.u),e.rXU(F.nX),e.rXU(F.Ix))};static \u0275cmp=e.VBU({type:n,selectors:[["app-todo-list"]],decls:49,vars:6,consts:[[1,"row"],[1,"col-12"],[1,"my-4"],[1,"col-12","border","p-3","mb-5","bg-light","rounded-1"],[1,"row","g-3",3,"ngSubmit","formGroup"],[1,"col-md-6"],["for","title",1,"form-label"],["type","text","formControlName","title","id","title",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","description",1,"form-label"],["type","text","formControlName","description","id","description",1,"form-control"],["for","dueDate",1,"form-label"],["type","date","formControlName","dueDate","id","dueDate",1,"form-control"],["for","priority",1,"form-label"],["formControlName","priority","id","priority",1,"form-select"],["value","","disabled",""],["value","low"],["value","medium"],["value","high"],[1,"col-12","text-end"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"mb-3"],[1,"col-12","p-3","text-end"],[1,"btn","btn-danger",3,"click"],[1,"bi","bi-trash3-fill"],[1,"btn","btn-success","mx-2",3,"click"],[1,"bi","bi-bell-fill"],[1,"list-group"],["class","list-group-item d-flex flex-wrap flex-md-nowrap justify-content-between align-items-center align-items-md-center gap-3",3,"ngClass",4,"ngFor","ngForOf"],[1,"invalid-feedback"],[1,"list-group-item","d-flex","flex-wrap","flex-md-nowrap","justify-content-between","align-items-center","align-items-md-center","gap-3",3,"ngClass"],[1,"text-start","flex-grow-1","me-3","todo-content"],[1,"fw-bold",3,"ngClass"],["class","bi bi-check-circle-fill text-success me-1",4,"ngIf"],[1,"text-muted",3,"ngClass"],[1,"badge","me-2",3,"ngClass"],[1,"badge","text-bg-light","text-dark"],[1,"badge","text-bg-primary","ms-2"],[1,"d-flex","flex-wrap","align-items-center","justify-content-end","gap-2","todo-actions"],[1,"badge",3,"ngClass"],[1,"btn","btn-sm","btn-outline-danger","ms-2",3,"click"],[1,"btn","btn-sm","ms-2",3,"click","ngClass"],[1,"bi","bi-check"],[1,"btn","btn-sm","btn-outline-primary","ms-2",3,"click"],[1,"bi","bi-pencil-square"],[1,"bi","bi-check-circle-fill","text-success","me-1"]],template:function(o,i){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"h2",2),e.EFF(3,"Agregar nueva tarea"),e.k0s()(),e.j41(4,"div",3)(5,"form",4),e.bIt("ngSubmit",function(){return i.onSubmit()}),e.j41(6,"div",5)(7,"label",6),e.EFF(8,"T\xedtulo"),e.k0s(),e.nrm(9,"input",7),e.DNE(10,g,2,0,"div",8),e.k0s(),e.j41(11,"div",5)(12,"label",9),e.EFF(13,"Descripci\xf3n"),e.k0s(),e.nrm(14,"input",10),e.k0s(),e.j41(15,"div",5)(16,"label",11),e.EFF(17,"Fecha l\xedmite"),e.k0s(),e.nrm(18,"input",12),e.k0s(),e.j41(19,"div",5)(20,"label",13),e.EFF(21,"Prioridad"),e.k0s(),e.j41(22,"select",14)(23,"option",15),e.EFF(24,"Selecciona prioridad"),e.k0s(),e.j41(25,"option",16),e.EFF(26,"Baja"),e.k0s(),e.j41(27,"option",17),e.EFF(28,"Media"),e.k0s(),e.j41(29,"option",18),e.EFF(30,"Alta"),e.k0s()()(),e.j41(31,"div",19)(32,"button",20),e.EFF(33,"Guardar tarea"),e.k0s()()()()(),e.nrm(34,"hr",2),e.j41(35,"div",0)(36,"div",1)(37,"h2",21),e.EFF(38,"Tareas registradas"),e.k0s()(),e.j41(39,"div",22)(40,"button",23),e.bIt("click",function(){return i.clearAll()}),e.nrm(41,"i",24),e.EFF(42," Eliminar todas las tareas "),e.k0s(),e.j41(43,"button",25),e.bIt("click",function(){return i.testAlert()}),e.nrm(44,"i",26),e.EFF(45," prueba de alert toast "),e.k0s()(),e.j41(46,"div",1)(47,"ul",27),e.DNE(48,C,27,34,"li",28),e.k0s()()()),2&o){let s,m;e.R7$(5),e.Y8G("formGroup",i.todoForm),e.R7$(4),e.AVh("is-invalid",(null==(s=i.todoForm.get("title"))?null:s.invalid)&&(null==(s=i.todoForm.get("title"))?null:s.touched)),e.R7$(),e.Y8G("ngIf",(null==(m=i.todoForm.get("title"))?null:m.invalid)&&(null==(m=i.todoForm.get("title"))?null:m.touched)),e.R7$(22),e.Y8G("disabled",i.todoForm.invalid),e.R7$(16),e.Y8G("ngForOf",i.todos)}},dependencies:[h.MD,h.YU,h.Sq,h.bT,h.vh,c.YN,c.qT,c.xH,c.y7,c.me,c.wz,c.BC,c.cb,c.X1,c.j4,c.JD,r.iI],styles:['@charset "UTF-8";.completed-text[_ngcontent-%COMP%]{color:#6c757d;text-decoration:line-through;transition:color .3s ease,-webkit-text-decoration .3s ease;transition:color .3s ease,text-decoration .3s ease;transition:color .3s ease,text-decoration .3s ease,-webkit-text-decoration .3s ease}.todo-content[_ngcontent-%COMP%]{min-width:0}.todo-actions[_ngcontent-%COMP%]{flex-shrink:0;white-space:nowrap}@media (max-width: 768px){.todo-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;width:100%}.todo-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}}']})}return n})();var M=a(8359),P=a(4927),D=a(2419),G=a(9885),S=a(7473);const $=()=>["/dashboard"],N=(n,l,t,o)=>({"bg-primary":n,"bg-warning text-dark":l,"bg-danger":t,"bg-success":o});function A(n,l){1&n&&(e.j41(0,"div",18)(1,"div",19)(2,"span",20),e.EFF(3,"Loading..."),e.k0s()()())}function U(n,l){if(1&n&&(e.j41(0,"div")(1,"div",2)(2,"div",3)(3,"div",21)(4,"div",22),e.nrm(5,"img",23),e.k0s(),e.j41(6,"div",24)(7,"h2",25),e.EFF(8),e.k0s(),e.j41(9,"h6",25),e.EFF(10,"Bienvenido a tu aplicaci\xf3n"),e.k0s(),e.j41(11,"p",26),e.EFF(12,"Este es tu panel de control, aqu\xed puedes administrar tus tareas, ver estad\xedsticas y m\xe1s."),e.k0s(),e.j41(13,"p",26)(14,"span",27),e.EFF(15),e.k0s()()()()()()()),2&n){const t=e.XpG();e.R7$(5),e.Y8G("src",t.userData.photoURL||t.imageDefault,e.B4B),e.R7$(3),e.SpI("Hola, ",t.userData.name||"Invitado",""),e.R7$(7),e.JRh(t.userData.rol||"Desconocido")}}function V(n,l){if(1&n&&(e.j41(0,"div",28),e.nrm(1,"app-card-metric",29),e.k0s()),2&n){const t=l.$implicit;e.R7$(),e.Y8G("icon",t.icon)("count",t.count)("label",t.label)("color",t.color)("footerText",t.footerText)("trendIcon",t.trendIcon)}}function B(n,l){1&n&&(e.j41(0,"div",18)(1,"div",19)(2,"span",20),e.EFF(3,"Cargando..."),e.k0s()()())}function X(n,l){if(1&n&&(e.j41(0,"div",30)(1,"div",31),e.EFF(2),e.k0s()()),2&n){const t=e.XpG();e.R7$(2),e.SpI(" ",t.errorMessage," ")}}function H(n,l){if(1&n&&(e.j41(0,"option",64),e.EFF(1),e.k0s()),2&n){const t=l.$implicit;e.Y8G("value",t.uid),e.R7$(),e.Lme(" ",t.name," ",t.last_name," ")}}function J(n,l){1&n&&(e.j41(0,"tr")(1,"td",72),e.EFF(2,"No se encontraron reclamos con los filtros aplicados."),e.k0s()())}function z(n,l){if(1&n){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"input",60),e.bIt("change",function(){const i=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.toggleClaimSelection(i))}),e.k0s()(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.nI1(9,"date"),e.k0s(),e.j41(10,"td")(11,"span",73),e.EFF(12),e.k0s()(),e.j41(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td")(16,"button",74),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.openViewEditModal(i,!0))}),e.nrm(17,"i",75),e.EFF(18," Ver/Editar "),e.k0s()()()}if(2&n){const t=l.$implicit,o=e.XpG(2);e.R7$(2),e.Y8G("checked",t.selected),e.R7$(2),e.JRh(t.nombre),e.R7$(2),e.JRh(t.tipo),e.R7$(2),e.JRh(e.i5U(9,7,t.fecha,"shortDate")),e.R7$(3),e.Y8G("ngClass",e.ziG(10,N,"Iniciado"===t.estado,"Pendiente"===t.estado,"Cancelado"===t.estado,"Cerrado"===t.estado)),e.R7$(),e.SpI(" ",t.estado," "),e.R7$(2),e.SpI(" ",o.getExecutiveName(t.uidEjecutivo)," ")}}function K(n,l){if(1&n){const t=e.RV6();e.j41(0,"li",69)(1,"a",70),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.onPageChange(i))}),e.EFF(2),e.k0s()()}if(2&n){const t=l.$implicit,o=e.XpG(2);e.AVh("active",t===o.currentPage),e.R7$(2),e.JRh(t)}}function W(n,l){if(1&n){const t=e.RV6();e.j41(0,"div",0)(1,"div",32)(2,"h2",33),e.EFF(3,"Administraci\xf3n de Reclamaciones"),e.k0s(),e.j41(4,"p",34),e.EFF(5,"Aqu\xed puedes gestionar todas las reclamaciones de los usuarios."),e.k0s()(),e.j41(6,"div",35)(7,"button",36),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.openNewModal())}),e.nrm(8,"i",37),e.EFF(9," Nuevo Reclamo "),e.k0s(),e.j41(10,"button",38),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.deleteSelectedClaims())}),e.nrm(11,"i",39),e.EFF(12," Eliminar Seleccionados "),e.k0s()(),e.j41(13,"div",40)(14,"div",41)(15,"div",42)(16,"label",43),e.EFF(17,"Buscar por Nombre"),e.k0s(),e.j41(18,"input",44),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.DH7(s.searchTerm,i)||(s.searchTerm=i),e.Njj(i)}),e.bIt("input",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.applyFilters())}),e.k0s()(),e.j41(19,"div",42)(20,"label",45),e.EFF(21,"Filtrar por Estado"),e.k0s(),e.j41(22,"select",46),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.DH7(s.filterStatus,i)||(s.filterStatus=i),e.Njj(i)}),e.bIt("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.applyFilters())}),e.j41(23,"option",47),e.EFF(24,"Todos los Estados"),e.k0s(),e.j41(25,"option",48),e.EFF(26,"Iniciado"),e.k0s(),e.j41(27,"option",49),e.EFF(28,"Pendiente"),e.k0s(),e.j41(29,"option",50),e.EFF(30,"Cancelado"),e.k0s(),e.j41(31,"option",51),e.EFF(32,"Cerrado"),e.k0s()()(),e.j41(33,"div",42)(34,"label",52),e.EFF(35,"Filtrar por Ejecutivo"),e.k0s(),e.j41(36,"select",53),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.DH7(s.selectedExecutiveUid,i)||(s.selectedExecutiveUid=i),e.Njj(i)}),e.bIt("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.applyFilters())}),e.j41(37,"option",54),e.EFF(38,"Todos los Ejecutivos"),e.k0s(),e.DNE(39,H,2,3,"option",55),e.k0s()(),e.j41(40,"div",42)(41,"button",56),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.resetData())}),e.nrm(42,"i",57),e.EFF(43," Limpiar "),e.k0s()()()(),e.j41(44,"div",30)(45,"div",58)(46,"table",59)(47,"thead")(48,"tr")(49,"th")(50,"input",60),e.bIt("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleMasterCheckbox())}),e.k0s()(),e.j41(51,"th"),e.EFF(52,"Nombre"),e.k0s(),e.j41(53,"th"),e.EFF(54,"Tipo"),e.k0s(),e.j41(55,"th"),e.EFF(56,"Fecha"),e.k0s(),e.j41(57,"th"),e.EFF(58,"Estado"),e.k0s(),e.j41(59,"th"),e.EFF(60,"Ejecutivo Asignado"),e.k0s(),e.j41(61,"th"),e.EFF(62,"Acciones"),e.k0s()()(),e.j41(63,"tbody"),e.DNE(64,J,3,0,"tr",12)(65,z,19,15,"tr",61),e.k0s()()()(),e.j41(66,"div",62)(67,"p",34),e.EFF(68,"Elementos por p\xe1gina: "),e.j41(69,"select",63),e.bIt("change",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.onItemsPerPageChange(i))}),e.j41(70,"option",64),e.EFF(71,"10"),e.k0s(),e.j41(72,"option",64),e.EFF(73,"25"),e.k0s(),e.j41(74,"option",64),e.EFF(75,"50"),e.k0s(),e.j41(76,"option",64),e.EFF(77,"100"),e.k0s()()(),e.j41(78,"span",65),e.EFF(79),e.k0s()(),e.j41(80,"div",66)(81,"nav",67)(82,"ul",68)(83,"li",69)(84,"a",70),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onPageChange(i.currentPage-1))}),e.EFF(85,"Anterior"),e.k0s()(),e.DNE(86,K,3,3,"li",71),e.j41(87,"li",69)(88,"a",70),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onPageChange(i.currentPage+1))}),e.EFF(89,"Siguiente"),e.k0s()()()()()()}if(2&n){const t=e.XpG();e.R7$(10),e.Y8G("disabled",!t.showDeleteButton),e.R7$(8),e.R50("ngModel",t.searchTerm),e.R7$(4),e.R50("ngModel",t.filterStatus),e.R7$(14),e.R50("ngModel",t.selectedExecutiveUid),e.R7$(3),e.Y8G("ngForOf",t.executives),e.R7$(11),e.Y8G("checked",t.masterChecked),e.R7$(14),e.Y8G("ngIf",0===t.pagedClaims.length),e.R7$(),e.Y8G("ngForOf",t.pagedClaims),e.R7$(4),e.Y8G("ngModel",t.itemsPerPage),e.R7$(),e.Y8G("value",10),e.R7$(2),e.Y8G("value",25),e.R7$(2),e.Y8G("value",50),e.R7$(2),e.Y8G("value",100),e.R7$(3),e.Lme(" P\xe1gina ",t.currentPage," de ",t.getTotalPages()," "),e.R7$(4),e.AVh("disabled",1===t.currentPage),e.R7$(3),e.Y8G("ngForOf",t.getPagesArray()),e.R7$(),e.AVh("disabled",t.currentPage===t.getTotalPages())}}function Z(n,l){if(1&n&&(e.j41(0,"span",90),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.JRh(null==t.selectedClaim?null:t.selectedClaim.id)}}function Q(n,l){if(1&n&&(e.j41(0,"option",64),e.EFF(1),e.k0s()),2&n){const t=l.$implicit;e.Y8G("value",t.uid),e.R7$(),e.Lme(" ",t.name+" "+t.last_name," - ",t.email," ")}}function q(n,l){if(1&n){const t=e.RV6();e.j41(0,"form",91)(1,"div",92)(2,"label",93),e.EFF(3,"Nombre"),e.k0s(),e.j41(4,"input",94),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG(2);return e.DH7(s.selectedClaim.nombre,i)||(s.selectedClaim.nombre=i),e.Njj(i)}),e.k0s()(),e.j41(5,"div",92)(6,"label",93),e.EFF(7,"Asunto"),e.k0s(),e.j41(8,"input",95),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG(2);return e.DH7(s.selectedClaim.tipo,i)||(s.selectedClaim.tipo=i),e.Njj(i)}),e.k0s()(),e.j41(9,"div",92)(10,"label",93),e.EFF(11,"Estado"),e.k0s(),e.j41(12,"select",96),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG(2);return e.DH7(s.selectedClaim.estado,i)||(s.selectedClaim.estado=i),e.Njj(i)}),e.j41(13,"option",48),e.EFF(14,"Iniciado"),e.k0s(),e.j41(15,"option",49),e.EFF(16,"Pendiente"),e.k0s(),e.j41(17,"option",50),e.EFF(18,"Cancelado"),e.k0s(),e.j41(19,"option",51),e.EFF(20,"Cerrado"),e.k0s()()(),e.j41(21,"div",92)(22,"label",93),e.EFF(23,"Fecha"),e.k0s(),e.j41(24,"input",97),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG(2);return e.DH7(s.selectedClaim.fecha,i)||(s.selectedClaim.fecha=i),e.Njj(i)}),e.k0s()(),e.j41(25,"div",92)(26,"label",93),e.EFF(27,"Ejecutivo Asignado"),e.k0s(),e.j41(28,"select",98),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG(2);return e.DH7(s.selectedClaim.uidEjecutivo,i)||(s.selectedClaim.uidEjecutivo=i),e.Njj(i)}),e.DNE(29,Q,2,3,"option",55),e.k0s()(),e.j41(30,"div",4)(31,"label",93),e.EFF(32,"Descripci\xf3n"),e.k0s(),e.j41(33,"textarea",99),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG(2);return e.DH7(s.selectedClaim.detail,i)||(s.selectedClaim.detail=i),e.Njj(i)}),e.k0s()()()}if(2&n){const t=e.XpG(2);e.R7$(4),e.R50("ngModel",t.selectedClaim.nombre),e.Y8G("disabled",t.isViewOnly),e.R7$(4),e.R50("ngModel",t.selectedClaim.tipo),e.Y8G("disabled",t.isViewOnly),e.R7$(4),e.R50("ngModel",t.selectedClaim.estado),e.Y8G("disabled",t.isViewOnly),e.R7$(12),e.R50("ngModel",t.selectedClaim.fecha),e.Y8G("disabled",t.isViewOnly),e.R7$(4),e.R50("ngModel",t.selectedClaim.uidEjecutivo),e.Y8G("disabled",t.isViewOnly),e.R7$(),e.Y8G("ngForOf",t.executives),e.R7$(4),e.R50("ngModel",t.selectedClaim.detail),e.Y8G("disabled",t.isViewOnly)}}function ee(n,l){1&n&&(e.j41(0,"div",100),e.EFF(1," No se ha cargado ning\xfan reclamo para ver/editar. "),e.k0s())}function te(n,l){if(1&n){const t=e.RV6();e.j41(0,"button",101),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.enableEdit())}),e.nrm(1,"i",102),e.EFF(2," Habilitar Edici\xf3n "),e.k0s()}}function ie(n,l){if(1&n){const t=e.RV6();e.j41(0,"button",103),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.saveChanges())}),e.nrm(1,"i",104),e.EFF(2," Guardar Cambios "),e.k0s()}if(2&n){const t=e.XpG(2);e.Y8G("disabled",!t.isEditing)}}function oe(n,l){if(1&n){const t=e.RV6();e.j41(0,"div",76)(1,"div",77)(2,"div",78)(3,"div",79)(4,"h5",80),e.EFF(5),e.DNE(6,Z,2,1,"span",81),e.k0s(),e.j41(7,"button",82),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.cancelEdit())}),e.k0s()(),e.j41(8,"div",83),e.DNE(9,q,34,13,"form",84)(10,ee,2,0,"div",85),e.k0s(),e.j41(11,"div",86)(12,"button",87),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.cancelEdit())}),e.EFF(13,"Cerrar"),e.k0s(),e.DNE(14,te,3,0,"button",88)(15,ie,3,1,"button",89),e.k0s()()()()}if(2&n){const t=e.XpG();e.R7$(5),e.SpI(" ",t.isEditing?"Editar Reclamo":"Ver Reclamo"," "),e.R7$(),e.Y8G("ngIf",null==t.selectedClaim?null:t.selectedClaim.id),e.R7$(3),e.Y8G("ngIf",t.selectedClaim),e.R7$(),e.Y8G("ngIf",!t.selectedClaim),e.R7$(4),e.Y8G("ngIf",!t.isEditing),e.R7$(),e.Y8G("ngIf",t.isEditing)}}function ne(n,l){if(1&n&&(e.j41(0,"option",64),e.EFF(1),e.k0s()),2&n){const t=l.$implicit;e.Y8G("value",t.uid),e.R7$(),e.Lme(" ",t.name+" "+t.last_name," - ",t.email," ")}}function se(n,l){if(1&n){const t=e.RV6();e.j41(0,"div",76)(1,"div",105)(2,"div",106)(3,"div",79)(4,"h5",80),e.EFF(5,"Nuevo Reclamo"),e.k0s(),e.j41(6,"button",82),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.cancelNewClaim())}),e.k0s()(),e.j41(7,"div",83)(8,"form",91)(9,"div",92)(10,"label",93),e.EFF(11,"Nombre"),e.k0s(),e.j41(12,"input",107),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.DH7(s.newClaim.nombre,i)||(s.newClaim.nombre=i),e.Njj(i)}),e.k0s()(),e.j41(13,"div",92)(14,"label",93),e.EFF(15,"Asunto"),e.k0s(),e.j41(16,"input",108),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.DH7(s.newClaim.tipo,i)||(s.newClaim.tipo=i),e.Njj(i)}),e.k0s()(),e.j41(17,"div",4)(18,"label",93),e.EFF(19,"Descripci\xf3n"),e.k0s(),e.j41(20,"textarea",109),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.DH7(s.newClaim.detail,i)||(s.newClaim.detail=i),e.Njj(i)}),e.k0s()(),e.j41(21,"div",92)(22,"label",93),e.EFF(23,"Fecha"),e.k0s(),e.j41(24,"input",110),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.DH7(s.newClaim.fecha,i)||(s.newClaim.fecha=i),e.Njj(i)}),e.k0s()(),e.j41(25,"div",111)(26,"label",93),e.EFF(27,"Asignar a Ejecutivo"),e.k0s(),e.j41(28,"select",112),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.DH7(s.selectedExecutiveUid,i)||(s.selectedExecutiveUid=i),e.Njj(i)}),e.j41(29,"option",113),e.EFF(30,"Selecciona un ejecutivo"),e.k0s(),e.DNE(31,ne,2,3,"option",55),e.k0s()()()(),e.j41(32,"div",86)(33,"button",114),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.showNewModal=!1)}),e.EFF(34,"Cancelar"),e.k0s(),e.j41(35,"button",115),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.saveNewClaim())}),e.EFF(36,"Crear Reclamo"),e.k0s()()()()()}if(2&n){const t=e.XpG();e.R7$(12),e.R50("ngModel",t.newClaim.nombre),e.R7$(4),e.R50("ngModel",t.newClaim.tipo),e.R7$(4),e.R50("ngModel",t.newClaim.detail),e.R7$(4),e.R50("ngModel",t.newClaim.fecha),e.R7$(4),e.R50("ngModel",t.selectedExecutiveUid),e.R7$(),e.Y8G("ngValue",""),e.R7$(2),e.Y8G("ngForOf",t.executives)}}let ae=(()=>{class n{claimsService;userService;alert;authService;notificationService;userUid=null;userData=null;allClaims=[];filteredClaims=[];pagedClaims=[];isLoading=!0;errorMessage=null;subscriptions=new M.yU;executives=[];selectedExecutiveUid="";searchTerm="";filterStatus="Todos";currentPage=1;itemsPerPage=10;masterChecked=!1;showDeleteButton=!1;showNewModal=!1;newClaim=this.getEmptyClaim();selectedClaim=null;isViewOnly=!1;showModal=!1;isEditing=!1;imageDefault="https://randomuser.me/api/portraits/men/40.jpg";metrics=[];claims=[];constructor(t,o,i,s,m){this.claimsService=t,this.userService=o,this.alert=i,this.authService=s,this.notificationService=m}ngOnInit(){this.authService.getCurrentUser().subscribe(t=>{t&&(this.userUid=t.uid,console.log("\u{1f4e6} Usuario autenticado:",this.userUid),this.userService.getUserProfile(this.userUid).subscribe({next:o=>{this.userData=o||null,console.log("%c<<< infoData | dashboard >>>","background: #198754; color: #fff; padding: 2px 5px;",this.userData)},error:o=>{console.error("\u274c Error al cargar perfil de usuario:",o)}}))}),this.loadExecutives(),this.loadAllClaims()}sendTestNotification(t){console.log("\u{1f514} Enviando notificaci\xf3n al ejecutivo UID:",t),t?this.notificationService.sendToUser(t,`Se te asign\xf3 el reclamo: ${this.newClaim?.nombre||"sin nombre"}`,"asignado").then(()=>console.log(`\u2705 Notificaci\xf3n enviada al ejecutivo: ${t}`)).catch(i=>console.error("\u274c Error al enviar notificaci\xf3n:",i)):console.warn("\u26a0\ufe0f UID del ejecutivo no est\xe1 definido. No se puede enviar notificaci\xf3n.")}loadExecutives(){const t=this.userService.getExecutives().subscribe({next:o=>{this.executives=o,console.log("\u2705 Ejecutivos cargados:",this.executives)},error:o=>{console.error("\u274c Error al cargar ejecutivos:",o),this.alert.error("No se pudieron cargar los ejecutivos.")}});this.subscriptions.add(t)}loadAllClaims(){this.isLoading=!0,this.errorMessage=null;const t=this.claimsService.getAllClaims().subscribe({next:o=>{this.allClaims=o.map(i=>({...i,selected:!1})),console.log("\u2705 Todos los reclamos cargados:",this.allClaims),this.isLoading=!1,this.applyFilters(),this.claims=[...this.allClaims],this.updateMetrics()},error:o=>{console.error("\u274c Error al cargar todos los reclamos:",o),this.errorMessage="No se pudieron cargar los reclamos. Int\xe9ntalo de nuevo m\xe1s tarde.",this.isLoading=!1}});this.subscriptions.add(t)}applyFilters(){let t=[...this.allClaims];this.searchTerm&&(t=t.filter(o=>o.nombre.toLowerCase().includes(this.searchTerm.toLowerCase()))),this.filterStatus&&"Todos"!==this.filterStatus&&(t=t.filter(o=>o.estado===this.filterStatus)),this.selectedExecutiveUid&&(t=t.filter(o=>o.uidEjecutivo===this.selectedExecutiveUid)),this.filteredClaims=t,this.currentPage=1,this.updatePagedClaims(),this.updateDeleteButtonState(),this.masterChecked=this.filteredClaims.every(o=>o.selected)}updatePagedClaims(){const t=(this.currentPage-1)*this.itemsPerPage;this.pagedClaims=this.filteredClaims.slice(t,t+this.itemsPerPage)}openNewModal(){this.resetNewClaim(),this.showNewModal=!0,console.log("\u{1f4a1} showNewModal es:",this.showNewModal)}closeNewModal(){this.showNewModal=!1}saveNewClaim(){this.newClaim.nombre&&this.newClaim.estado&&this.selectedExecutiveUid?(this.newClaim.uidEjecutivo=this.selectedExecutiveUid,this.newClaim.id=this.generateUUID(),console.log("\u{1f195} Reclamo preparado para guardar:",this.newClaim),console.log("\u{1f3af} UID del ejecutivo seleccionado:",this.selectedExecutiveUid),this.isLoading=!0,this.claimsService.createClaim(this.newClaim.uidEjecutivo,this.newClaim).then(()=>{this.alert.success("Nuevo reclamo asignado con \xe9xito."),this.closeNewModal(),this.loadAllClaims(),this.notificationService.sendToUser(this.selectedExecutiveUid,`Se te asign\xf3 un nuevo reclamo: ${this.newClaim.nombre}`,"asignado").then(()=>console.log("\u2705 Notificaci\xf3n enviada al ejecutivo")).catch(t=>console.error("\u274c Error al enviar notificaci\xf3n:",t))}).catch(t=>{console.error("\u274c Error al crear reclamo:",t),this.alert.error("Ocurri\xf3 un error al crear el reclamo.")}).finally(()=>{this.isLoading=!1})):this.alert.showToastError("Por favor, completa todos los campos requeridos (nombre, estado, ejecutivo).","Campos Requeridos")}resetNewClaim(){this.newClaim=this.getEmptyClaim(),this.selectedExecutiveUid=""}getEmptyClaim(){return{id:"",nombre:"",tipo:"",total:0,estado:"Pendiente",fecha:(new Date).toISOString().split("T")[0],uidEjecutivo:"",selected:!1}}generateUUID(){return crypto.randomUUID()}resetData(){this.searchTerm="",this.filterStatus="Todos",this.selectedExecutiveUid="",this.currentPage=1,this.loadAllClaims(),this.alert.showToastInfo("Filtros restablecidos y datos recargados.","Informaci\xf3n")}toggleMasterCheckbox(){this.masterChecked=!this.masterChecked,this.filteredClaims.forEach(t=>t.selected=this.masterChecked),this.updateDeleteButtonState()}toggleClaimSelection(t){t.selected=!t.selected,this.masterChecked=this.filteredClaims.every(o=>o.selected),this.updateDeleteButtonState()}hasSelectedClaims(){return this.filteredClaims.some(t=>t.selected)}updateDeleteButtonState(){this.showDeleteButton=this.hasSelectedClaims()}deleteSelectedClaims(){var t=this;return(0,f.A)(function*(){const o=t.filteredClaims.filter(m=>m.selected);if(0===o.length)return void t.alert.showToastInfo("No hay reclamos seleccionados para eliminar.","Informaci\xf3n");if(!(yield t.alert.confirm("\xbfEst\xe1s seguro?","Esta acci\xf3n eliminar\xe1 los reclamos seleccionados de forma permanente.")))return;t.isLoading=!0;const s=[];for(const m of o)m.uidEjecutivo&&m.id?s.push(t.claimsService.deleteClaim(m.uidEjecutivo,m.id).catch(_=>{console.error(`\u274c Error al eliminar el reclamo ${m.id}:`,_),t.alert.error(`No se pudo eliminar el reclamo: ${m.nombre}`)})):console.warn("\u26a0\ufe0f No se pudo eliminar el reclamo (falta UID o ID):",m);Promise.all(s).then(()=>{t.alert.success("\u2705 Reclamos seleccionados eliminados con \xe9xito."),t.loadAllClaims()}).catch(m=>{console.error("Un error inesperado ocurri\xf3 durante la eliminaci\xf3n masiva:",m)}).finally(()=>{t.isLoading=!1,t.masterChecked=!1,t.updateDeleteButtonState()})})()}getExecutiveName(t){if(!t)return"N/A";const o=this.executives.find(i=>i.uid===t);return o?`${o.name||""} ${o.last_name||""}`.trim():"N/A"}viewClaim(t){console.log("\u{1f441}\ufe0f Ver reclamo:",t),this.selectedClaim={...t},this.isViewOnly=!0,this.showModal=!0,this.alert.showToastInfo(`Viendo reclamo: ${t.nombre}`,"Ver Reclamo")}editClaim(t){console.log("\u270f\ufe0f Editar reclamo button editClaim:",t),this.selectedClaim={...t},this.isViewOnly=!1,this.showModal=!0,this.alert.showToastInfo(`Editando reclamo: ${t.nombre}`,"Editar Reclamo")}openViewEditModal(t,o=!0){console.log("Abriendo modal para ver/editar reclamo:",t),this.selectedClaim={...t},this.isViewOnly=!0,this.isEditing=!1,this.showModal=!0,this.alert.showToastInfo(`Viendo reclamo: ${t.nombre}`,"Ver Reclamo")}enableEdit(){this.isViewOnly=!1,this.isEditing=!0,this.alert.showToastInfo("Modo de edici\xf3n activado.","Editar Reclamo")}toggleEditMode(){this.isViewOnly=!this.isViewOnly,this.alert.showToastInfo(this.isViewOnly?"Modo de visualizaci\xf3n activado.":"Modo de edici\xf3n activado.","Cambio de Modo")}saveChanges(){console.log("\u{1f4be} Guardando cambios para el reclamo:",this.selectedClaim),this.selectedClaim&&this.selectedClaim.uidEjecutivo&&this.selectedClaim.id?this.claimsService.updateClaim(this.selectedClaim.uidEjecutivo,this.selectedClaim).then(()=>{this.alert.showToastSuccess("\u2705 Reclamo actualizado con \xe9xito.","OK!"),this.loadAllClaims(),this.cancelEdit(),this.selectedClaim&&this.selectedClaim.uidEjecutivo?this.notificationService.sendToUser(this.selectedClaim.uidEjecutivo,`Se ha actualizado el reclamo #${this.selectedClaim.id}`,"editado").then(()=>console.log("\u2705 Notificaci\xf3n de edici\xf3n enviada al ejecutivo")).catch(o=>console.error("\u274c Error al enviar notificaci\xf3n de edici\xf3n:",o)):console.warn("\u26a0\ufe0f Reclamo sin ejecutivo asignado. No se env\xeda notificaci\xf3n.")}).catch(t=>{console.error("\u274c Error al actualizar el reclamo:",t),this.alert.showToastError("Ocurri\xf3 un error al actualizar el reclamo.","Error")}):this.alert.showToastError("No hay reclamo seleccionado o faltan datos para actualizar.","Error")}cancelEdit(){this.selectedClaim=null,this.showModal=!1,this.isEditing=!1,this.isViewOnly=!1}saveEditedClaim(){this.selectedClaim&&this.selectedClaim.uidEjecutivo&&this.selectedClaim.id?this.claimsService.updateClaim(this.selectedClaim.uidEjecutivo,this.selectedClaim).then(()=>{this.alert.success("\u2705 Reclamo actualizado con \xe9xito."),this.loadAllClaims(),this.cancelEdit()}).catch(t=>{console.error("\u274c Error al actualizar el reclamo:",t),this.alert.error("Ocurri\xf3 un error al actualizar el reclamo.")}):this.alert.showToastError("No hay reclamo seleccionado o faltan datos para actualizar.","Error")}cancelNewClaim(){this.newClaim=this.getEmptyClaim(),this.showNewModal=!1}getTotalPages(){return Math.ceil(this.filteredClaims.length/this.itemsPerPage)}getPagesArray(){return Array.from({length:this.getTotalPages()},(t,o)=>o+1)}onPageChange(t){t>=1&&t<=this.getTotalPages()&&(this.currentPage=t,this.updatePagedClaims())}onItemsPerPageChange(t){this.itemsPerPage=Number(t.target.value),this.currentPage=1,this.updatePagedClaims()}deleteClaim(t){const o=this.allClaims.find(i=>i.id===t);o&&o.uidEjecutivo?confirm("\xbfEst\xe1s seguro de que quieres eliminar este reclamo?")&&this.claimsService.deleteClaim(o.uidEjecutivo,t).then(()=>{this.alert.success("\u2705 Reclamo eliminado con \xe9xito."),this.loadAllClaims()}).catch(i=>{console.error("\u274c Error al eliminar el reclamo:",i),this.alert.error("Ocurri\xf3 un error al eliminar el reclamo.")}):this.alert.showToastError("No se pudo encontrar el reclamo para eliminar o falta el UID del ejecutivo.","Error")}ngOnDestroy(){this.subscriptions.unsubscribe()}updateMetrics(){const t=this.claims.length,o=this.claims.filter(_=>"Iniciado"===_.estado).length,i=this.claims.filter(_=>"Pendiente"===_.estado).length,s=this.claims.filter(_=>"Cancelado"===_.estado).length,m=this.claims.filter(_=>"Cerrado"===_.estado).length;console.log("\u{1f4ca} M\xe9tricas actualizadas:"),console.log("\u27a1\ufe0f Total:",t),console.log("\u{1f7e6} Iniciados:",o),console.log("\u{1f7e8} Pendientes:",i),console.log("\u{1f7e5} Cancelados:",s),console.log("\u{1f7e9} Cerrados:",m),this.metrics=[{icon:"bi-folder-check",count:t,label:"Total de Reclamos",color:"primary",footerText:"Todos los reclamos registrados",trendIcon:"bi-bar-chart"},{icon:"bi-play-circle",count:o,label:"Iniciados",color:"info",footerText:"Reclamos en inicio",trendIcon:"bi-graph-up"},{icon:"bi-hourglass-split",count:i,label:"Pendientes",color:"warning",footerText:"Requieren atenci\xf3n",trendIcon:"bi-exclamation-circle"},{icon:"bi-x-circle",count:s,label:"Cancelados",color:"danger",footerText:"No continuaron",trendIcon:"bi-x-circle"},{icon:"bi-check-circle",count:m,label:"Cerrados",color:"success",footerText:"Reclamos resueltos",trendIcon:"bi-check-circle"}]}static \u0275fac=function(o){return new(o||n)(e.rXU(D.B),e.rXU(G.D),e.rXU(R.u),e.rXU(E.u),e.rXU(S.J))};static \u0275cmp=e.VBU({type:n,selectors:[["app-admin-claims"]],decls:28,vars:10,consts:[[1,"row"],[1,"col-12","text-start","grid-margin"],[1,"card"],[1,"card-body"],[1,"col-12"],["aria-label","breadcrumb",1,""],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item"],[3,"routerLink"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-12","grid-margin"],["class","d-flex justify-content-center align-items-center","style","height: 200px;",4,"ngIf"],[4,"ngIf"],[1,"row","grid-margin"],["class","col-md-6 col-xl-3 my-3",4,"ngFor","ngForOf"],["class","col-12 mt-3",4,"ngIf"],["class","row",4,"ngIf"],["class","modal fade show d-block","style","background-color: rgba(0,0,0,0.4); z-index: 1050;",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center",2,"height","200px"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"d-flex","align-items-center","mb-4","mb-lg-0","py-4"],[1,"position-relative","d-inline-block"],["alt","Profile Picture","width","100","height","100",1,"border","border-5","border-primary","rounded-circle","profile-pic","border-opacity-25","object-fit-cover",3,"src"],[1,"ms-3","text-start"],[1,"m-0","p-0"],[1,"m-0","p-0","text-muted"],[1,"badge","badge-type","badge-outline-info"],[1,"col-md-6","col-xl-3","my-3"],[3,"icon","count","label","color","footerText","trendIcon"],[1,"col-12","mt-3"],["role","alert",1,"alert","alert-danger","text-center"],[1,"col-6"],[1,"h3","m-0"],[1,"mb-0"],[1,"col-6","d-flex","justify-content-end","align-items-center"],[1,"btn","btn-full","--primary","m-1","btn-sm",3,"click"],[1,"bi","bi-plus-circle","me-1"],[1,"btn","btn-full","--danger","m-1","btn-sm",3,"click","disabled"],[1,"bi","bi-trash","me-1"],[1,"col-12","py-3"],[1,"row","g-3","align-items-center"],[1,"col-md-3"],["for","searchTerm",1,"form-label","visually-hidden"],["type","text","id","searchTerm","placeholder","Buscar por nombre...",1,"form-control",3,"ngModelChange","input","ngModel"],["for","filterStatus",1,"form-label","visually-hidden"],["id","filterStatus",1,"form-select",3,"ngModelChange","change","ngModel"],["value","Todos"],["value","Iniciado"],["value","Pendiente"],["value","Cancelado"],["value","Cerrado"],["for","selectedExecutive",1,"form-label","visually-hidden"],["id","selectedExecutive",1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-full","--primary","m-1","w-100",3,"click"],[1,"bi","bi-arrow-counterclockwise","me-1"],[1,"table-responsive"],[1,"table","table-light","table-hover","align-middle"],["type","checkbox",1,"form-check-input",3,"change","checked"],[4,"ngFor","ngForOf"],[1,"co-sm-12","col-md-6","py-3","d-flex","justify-content-start","align-items-center"],[1,"form-select","form-select-sm","d-inline-block","w-auto","ms-2",3,"change","ngModel"],[3,"value"],[1,"mx-2"],[1,"co-sm-12","col-md-6","py-3","d-flex","justify-content-end","align-items-center"],["aria-label","Page navigation"],[1,"pagination","mb-0"],[1,"page-item"],[1,"page-link",3,"click"],["class","page-item",3,"active",4,"ngFor","ngForOf"],["colspan","7",1,"text-center","text-muted","py-4"],[1,"badge",3,"ngClass"],[1,"btn","btn-full","--info","m-1","btn-sm",3,"click"],[1,"bi","bi-eye-fill"],[1,"modal","fade","show","d-block",2,"background-color","rgba(0,0,0,0.4)","z-index","1050"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["class","badge bg-secondary ms-2",4,"ngIf"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["class","row g-3",4,"ngIf"],["class","alert alert-warning",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-full","--danger","m-1",3,"click"],["type","button","class","btn btn-full --primary m-1",3,"click",4,"ngIf"],["type","button","class","btn btn-full --success m-1",3,"disabled","click",4,"ngIf"],[1,"badge","bg-secondary","ms-2"],[1,"row","g-3"],[1,"col-md-6"],[1,"form-label"],["name","selectedNombre","required","",1,"form-control",3,"ngModelChange","ngModel","disabled"],["name","selectedTipo",1,"form-control",3,"ngModelChange","ngModel","disabled"],["name","selectedEstado",1,"form-select",3,"ngModelChange","ngModel","disabled"],["name","selectedFecha","type","date",1,"form-control",3,"ngModelChange","ngModel","disabled"],["name","selectedEjecutivo",1,"form-select",3,"ngModelChange","ngModel","disabled"],["name","selectedDetail","rows","3",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"alert","alert-warning"],["type","button",1,"btn","btn-full","--primary","m-1",3,"click"],[1,"bi","bi-pencil-square","me-1"],["type","button",1,"btn","btn-full","--success","m-1",3,"click","disabled"],[1,"bi","bi-save","me-1"],[1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content","rounded","shadow-lg"],["name","newNombre","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","newTipo",1,"form-control",3,"ngModelChange","ngModel"],["name","newDetail","rows","3",1,"form-control",3,"ngModelChange","ngModel"],["name","newFecha","type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-12"],["name","ejecutivo","required","",1,"form-select",3,"ngModelChange","ngModel"],["disabled","","selected","",3,"ngValue"],[1,"btn","btn-full","--primary","m-1",3,"click"],[1,"btn","btn-full","--success","m-1",3,"click"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",0)(5,"div",4)(6,"nav",5)(7,"ol",6)(8,"li",7)(9,"a",8),e.EFF(10,"Home"),e.k0s()(),e.j41(11,"li",9),e.EFF(12,"Mis reclamos"),e.k0s()()()()()()()()(),e.j41(13,"div",0)(14,"div",10),e.DNE(15,A,4,0,"div",11)(16,U,16,3,"div",12),e.k0s()(),e.j41(17,"div",13),e.DNE(18,V,2,6,"div",14),e.k0s(),e.j41(19,"div",0)(20,"div",10)(21,"div",2)(22,"div",3),e.DNE(23,B,4,0,"div",11)(24,X,3,1,"div",15)(25,W,90,20,"div",16),e.k0s()()()(),e.DNE(26,oe,16,6,"div",17)(27,se,37,7,"div",17)),2&o&&(e.R7$(9),e.Y8G("routerLink",e.lJ4(9,$)),e.R7$(6),e.Y8G("ngIf",i.isLoading),e.R7$(),e.Y8G("ngIf",!i.isLoading&&i.userData),e.R7$(2),e.Y8G("ngForOf",i.metrics),e.R7$(5),e.Y8G("ngIf",i.isLoading),e.R7$(),e.Y8G("ngIf",i.errorMessage),e.R7$(),e.Y8G("ngIf",!i.isLoading&&!i.errorMessage),e.R7$(),e.Y8G("ngIf",i.showModal),e.R7$(),e.Y8G("ngIf",i.showNewModal))},dependencies:[h.MD,h.YU,h.Sq,h.bT,h.vh,c.YN,c.qT,c.xH,c.y7,c.me,c.wz,c.BC,c.cb,c.YS,c.vS,c.cV,P._,r.iI,r.Wk],encapsulation:2})}return n})();var re=a(983),O=a(6354),le=a(9437),ce=a(7759);const de=()=>["/dashboard"],me=(n,l,t,o)=>({"bg-primary":n,"bg-warning text-dark":l,"bg-danger":t,"bg-success":o}),Y=n=>({"is-invalid":n});function ue(n,l){1&n&&(e.j41(0,"div",18)(1,"div",19)(2,"span",20),e.EFF(3,"Loading..."),e.k0s()()())}function he(n,l){if(1&n&&(e.j41(0,"div")(1,"div",2)(2,"div",3)(3,"div",21)(4,"div",22),e.nrm(5,"img",23),e.k0s(),e.j41(6,"div",24)(7,"h2",25),e.EFF(8),e.k0s(),e.j41(9,"h6",25),e.EFF(10,"Bienvenido a tu aplicaci\xf3n"),e.k0s(),e.j41(11,"p",26),e.EFF(12,"Este es tu panel de control, aqu\xed puedes administrar tus tareas, ver estad\xedsticas y m\xe1s."),e.k0s(),e.j41(13,"p",26)(14,"span",27),e.EFF(15),e.k0s()()()()()()()),2&n){const t=e.XpG();e.R7$(5),e.Y8G("src",t.userData.photoURL||t.imageDefault,e.B4B),e.R7$(3),e.SpI("Hola, ",t.userData.name||"Invitado",""),e.R7$(7),e.JRh(t.userData.rol||"Desconocido")}}function ge(n,l){if(1&n&&(e.j41(0,"div",28),e.nrm(1,"app-card-metric",29),e.k0s()),2&n){const t=l.$implicit;e.R7$(),e.Y8G("icon",t.icon)("count",t.count)("label",t.label)("color",t.color)("footerText",t.footerText)("trendIcon",t.trendIcon)}}function pe(n,l){1&n&&(e.j41(0,"div",18)(1,"div",19)(2,"span",20),e.EFF(3,"Loading..."),e.k0s()()())}function fe(n,l){if(1&n&&(e.j41(0,"div",30)(1,"div",31),e.EFF(2),e.k0s()()),2&n){const t=e.XpG();e.R7$(2),e.SpI(" ",t.errorMessage," ")}}function ve(n,l){1&n&&(e.j41(0,"div",30)(1,"div",32),e.EFF(2," No tienes reclamos asignados. "),e.k0s()())}function Ce(n,l){1&n&&(e.j41(0,"tr")(1,"td",67),e.EFF(2,"No se encontraron reclamos con los filtros aplicados."),e.k0s()())}function _e(n,l){if(1&n){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"input",57),e.bIt("change",function(){const i=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.toggleClaimSelection(i))}),e.k0s()(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.nI1(9,"date"),e.k0s(),e.j41(10,"td")(11,"span",68),e.EFF(12),e.k0s()(),e.j41(13,"td")(14,"button",69),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.viewClaim(i))}),e.nrm(15,"i",70),e.EFF(16," Ver / Editar "),e.k0s()()()}if(2&n){const t=l.$implicit;e.R7$(2),e.Y8G("checked",t.selected),e.R7$(2),e.JRh(t.nombre),e.R7$(2),e.JRh(t.tipo),e.R7$(2),e.JRh(e.i5U(9,6,t.fecha,"shortDate")),e.R7$(3),e.Y8G("ngClass",e.ziG(9,me,"Iniciado"===t.estado,"Pendiente"===t.estado,"Cancelado"===t.estado,"Cerrado"===t.estado)),e.R7$(),e.SpI(" ",t.estado," ")}}function be(n,l){if(1&n){const t=e.RV6();e.j41(0,"li",64)(1,"a",65),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.onPageChange(i))}),e.EFF(2),e.k0s()()}if(2&n){const t=l.$implicit,o=e.XpG(2);e.AVh("active",t===o.currentPage),e.R7$(2),e.JRh(t)}}function Ee(n,l){if(1&n){const t=e.RV6();e.j41(0,"div",0)(1,"div",33)(2,"h2",34),e.EFF(3,"Administraci\xf3n de Reclamaciones"),e.k0s(),e.j41(4,"p",35),e.EFF(5,"Aqu\xed puedes gestionar todas las reclamaciones asignadas a ti."),e.k0s()(),e.j41(6,"div",36)(7,"button",37),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.deleteSelectedClaims())}),e.nrm(8,"i",38),e.EFF(9," Eliminar Seleccionados "),e.k0s()(),e.j41(10,"div",39)(11,"div",40)(12,"div",41)(13,"label",42),e.EFF(14,"Buscar por Nombre"),e.k0s(),e.j41(15,"input",43),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.DH7(s.searchTerm,i)||(s.searchTerm=i),e.Njj(i)}),e.bIt("input",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.applyFilters())}),e.k0s()(),e.j41(16,"div",44)(17,"label",45),e.EFF(18,"Filtrar por Estado"),e.k0s(),e.j41(19,"select",46),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.DH7(s.filterStatus,i)||(s.filterStatus=i),e.Njj(i)}),e.bIt("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.applyFilters())}),e.j41(20,"option",47),e.EFF(21,"Todos los Estados"),e.k0s(),e.j41(22,"option",48),e.EFF(23,"Iniciado"),e.k0s(),e.j41(24,"option",49),e.EFF(25,"Pendiente"),e.k0s(),e.j41(26,"option",50),e.EFF(27,"Cancelado"),e.k0s(),e.j41(28,"option",51),e.EFF(29,"Cerrado"),e.k0s()()(),e.j41(30,"div",52)(31,"button",53),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return i.searchTerm="",i.filterStatus="Todos",e.Njj(i.applyFilters())}),e.nrm(32,"i",54),e.EFF(33," Limpiar Filtros "),e.k0s()()()(),e.j41(34,"div",30)(35,"div",55)(36,"table",56)(37,"thead")(38,"tr")(39,"th")(40,"input",57),e.bIt("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleMasterCheckbox())}),e.k0s()(),e.j41(41,"th"),e.EFF(42,"Nombre"),e.k0s(),e.j41(43,"th"),e.EFF(44,"Tipo"),e.k0s(),e.j41(45,"th"),e.EFF(46,"Fecha"),e.k0s(),e.j41(47,"th"),e.EFF(48,"Estado"),e.k0s(),e.j41(49,"th"),e.EFF(50,"Acciones"),e.k0s()()(),e.j41(51,"tbody"),e.DNE(52,Ce,3,0,"tr",12)(53,_e,17,14,"tr",58),e.k0s()()()(),e.j41(54,"div",59)(55,"div"),e.EFF(56," Elementos por p\xe1gina: "),e.j41(57,"select",60),e.bIt("change",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.onItemsPerPageChange(i))}),e.j41(58,"option",61),e.EFF(59,"10"),e.k0s(),e.j41(60,"option",61),e.EFF(61,"25"),e.k0s(),e.j41(62,"option",61),e.EFF(63,"50"),e.k0s(),e.j41(64,"option",61),e.EFF(65,"100"),e.k0s()()(),e.j41(66,"nav",62)(67,"ul",63)(68,"li",64)(69,"a",65),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onPageChange(i.currentPage-1))}),e.EFF(70,"Anterior"),e.k0s()(),e.DNE(71,be,3,3,"li",66),e.j41(72,"li",64)(73,"a",65),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onPageChange(i.currentPage+1))}),e.EFF(74,"Siguiente"),e.k0s()()()(),e.j41(75,"div"),e.EFF(76),e.k0s()()()}if(2&n){const t=e.XpG();e.R7$(7),e.Y8G("disabled",!t.showDeleteButton),e.R7$(8),e.R50("ngModel",t.searchTerm),e.R7$(4),e.R50("ngModel",t.filterStatus),e.R7$(21),e.Y8G("checked",t.masterChecked),e.R7$(12),e.Y8G("ngIf",0===t.pagedClaims.length),e.R7$(),e.Y8G("ngForOf",t.pagedClaims),e.R7$(4),e.Y8G("ngModel",t.itemsPerPage),e.R7$(),e.Y8G("value",10),e.R7$(2),e.Y8G("value",25),e.R7$(2),e.Y8G("value",50),e.R7$(2),e.Y8G("value",100),e.R7$(4),e.AVh("disabled",1===t.currentPage),e.R7$(3),e.Y8G("ngForOf",t.getPagesArray()),e.R7$(),e.AVh("disabled",t.currentPage===t.getTotalPages()),e.R7$(4),e.Lme(" P\xe1gina ",t.currentPage," de ",t.getTotalPages()," ")}}function Fe(n,l){1&n&&(e.j41(0,"div",92),e.EFF(1," El nombre es requerido. "),e.k0s())}function je(n,l){1&n&&(e.j41(0,"div",92),e.EFF(1," El estado es requerido. "),e.k0s())}function xe(n,l){1&n&&(e.j41(0,"div",92),e.EFF(1," La fecha es requerida. "),e.k0s())}function ke(n,l){if(1&n){const t=e.RV6();e.j41(0,"button",93),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.enableEdit())}),e.nrm(1,"i",94),e.EFF(2," Habilitar Edici\xf3n "),e.k0s()}}function Te(n,l){if(1&n){const t=e.RV6();e.j41(0,"button",95),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.saveChanges())}),e.nrm(1,"i",96),e.EFF(2," Guardar Cambios "),e.k0s()}if(2&n){const t=e.XpG(2);e.Y8G("disabled",!t.isEditing||t.claimForm.invalid)}}function Re(n,l){if(1&n){const t=e.RV6();e.j41(0,"div",71)(1,"div",72)(2,"div",73)(3,"div",74)(4,"h5",75),e.EFF(5,"Detalle de Reclamo "),e.j41(6,"span",76),e.EFF(7),e.k0s()(),e.j41(8,"button",77),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.cancelEdit())}),e.k0s()(),e.j41(9,"div",78)(10,"form",79)(11,"div",80)(12,"label",81),e.EFF(13,"Nombre"),e.k0s(),e.nrm(14,"input",82),e.DNE(15,Fe,2,0,"div",83),e.k0s(),e.j41(16,"div",80)(17,"label",81),e.EFF(18,"Tipo (Asunto)"),e.k0s(),e.nrm(19,"input",84),e.k0s(),e.j41(20,"div",4)(21,"label",81),e.EFF(22,"Descripci\xf3n"),e.k0s(),e.nrm(23,"textarea",85),e.k0s(),e.j41(24,"div",80)(25,"label",81),e.EFF(26,"Estado"),e.k0s(),e.j41(27,"select",86)(28,"option",48),e.EFF(29,"Iniciado"),e.k0s(),e.j41(30,"option",49),e.EFF(31,"Pendiente"),e.k0s(),e.j41(32,"option",50),e.EFF(33,"Cancelado"),e.k0s(),e.j41(34,"option",51),e.EFF(35,"Cerrado"),e.k0s()(),e.DNE(36,je,2,0,"div",83),e.k0s(),e.j41(37,"div",80)(38,"label",81),e.EFF(39,"Fecha"),e.k0s(),e.nrm(40,"input",87),e.DNE(41,xe,2,0,"div",83),e.k0s()()(),e.j41(42,"div",88)(43,"button",89),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.cancelEdit())}),e.EFF(44,"Cerrar"),e.k0s(),e.DNE(45,ke,3,0,"button",90)(46,Te,3,1,"button",91),e.k0s()()()()}if(2&n){const t=e.XpG();e.R7$(7),e.JRh(null==t.selectedClaim?null:t.selectedClaim.id),e.R7$(3),e.Y8G("formGroup",t.claimForm),e.R7$(4),e.Y8G("ngClass",e.eq3(10,Y,t.getFormControl("nombre").invalid&&t.getFormControl("nombre").touched)),e.R7$(),e.Y8G("ngIf",t.getFormControl("nombre").invalid&&t.getFormControl("nombre").touched),e.R7$(12),e.Y8G("ngClass",e.eq3(12,Y,t.getFormControl("estado").invalid&&t.getFormControl("estado").touched)),e.R7$(9),e.Y8G("ngIf",t.getFormControl("estado").invalid&&t.getFormControl("estado").touched),e.R7$(4),e.Y8G("ngClass",e.eq3(14,Y,t.getFormControl("fecha").invalid&&t.getFormControl("fecha").touched)),e.R7$(),e.Y8G("ngIf",t.getFormControl("fecha").invalid&&t.getFormControl("fecha").touched),e.R7$(4),e.Y8G("ngIf",!t.isEditing),e.R7$(),e.Y8G("ngIf",t.isEditing)}}let Ie=(()=>{class n{fb;claimsService;authService;alert;userService;mockService;notificationService;executiveClaims=[];filteredClaims=[];userData=null;isLoading=!0;errorMessage=null;claimForm;isEditing=!1;showModal=!1;isViewOnly=!0;subscriptions=new M.yU;selectedClaim=null;currentUserUid=null;TEST_EXECUTIVE_UID="KVDf8PfHEWMdic0SQPcxFMizoBf2";searchTerm="";filterStatus="Todos";masterChecked=!1;showDeleteButton=!1;currentPage=1;itemsPerPage=10;pagedClaims=[];imagePath="assets/images/isotipo-webmain.svg";imageDefault="https://maxuber79.github.io/gsaforce/assets/images/face28.jpg";metrics=[{label:"Total Claims",icon:"bi-list",count:0,color:"primary",footerText:"Actualizado en tiempo real",trendIcon:"bi-arrow-repeat"},{label:"Pendientes",icon:"bi-hourglass",count:0,color:"warning",footerText:"Revisar cuanto antes",trendIcon:"bi-hourglass-split"},{label:"Cerrados",icon:"bi-check-circle",count:0,color:"success",footerText:"Resueltos con \xe9xito",trendIcon:"bi-check2"},{label:"Cancelados",icon:"bi-x-circle",count:0,color:"danger",footerText:"No continuaron",trendIcon:"bi-x"}];constructor(t,o,i,s,m,_,we){this.fb=t,this.claimsService=o,this.authService=i,this.alert=s,this.userService=m,this.mockService=_,this.notificationService=we}ngOnInit(){this.initializeForm(),this.authService.getAuthState().subscribe(t=>{t&&(this.currentUserUid=t.uid,console.log(`\u{1f510} Usuario autenticado: ${t.email} (UID: ${this.currentUserUid})`),this.userService.getUserData(this.currentUserUid).subscribe({next:o=>{this.userData=o||null,console.log("%c<<< userData | executive >>>","background: #198754; color: #fff;",this.userData),this.userData&&this.userData.uid?(this.claimsService.getUserClaims(this.userData.uid).subscribe(i=>{this.updateMetrics(i),console.log("%c<<< claims para m\xe9tricas >>>","background: #198754; color: #fff;",i)}),this.loadExecutiveClaims(this.userData.uid)):console.warn("\u26a0\ufe0f No se encontr\xf3 userData.uid, no se cargan reclamos")},error:o=>{console.error("\u274c Error al obtener datos del usuario:",o)}}))})}updateMetrics(t){const o=t.length,i=t.filter(_=>"Pendiente"===_.estado||"Iniciado"===_.estado).length,s=t.filter(_=>"Cerrado"===_.estado).length,m=t.filter(_=>"Cancelado"===_.estado).length;this.metrics[0].count=o,this.metrics[1].count=i,this.metrics[2].count=s,this.metrics[3].count=m}initializeForm(t){this.claimForm=this.fb.group({id:[t?.id||null],nombre:[t?.nombre||"",c.k0.required],tipo:[t?.tipo||""],detail:[t?.detail||""],estado:[t?.estado||"Pendiente",c.k0.required],fecha:[t?.fecha||(new Date).toISOString().split("T")[0],c.k0.required],uidEjecutivo:[t?.uidEjecutivo||this.TEST_EXECUTIVE_UID]})}loadExecutiveClaims(t){this.isLoading=!0,this.errorMessage=null;const o=this.claimsService.getClaimsByUid(t).pipe((0,O.T)(i=>i.map(s=>({...s,selected:!1}))),(0,le.W)(i=>(console.error("\u274c Error al cargar reclamos del ejecutivo:",i),this.errorMessage="No se pudieron cargar los reclamos. Int\xe9ntalo de nuevo m\xe1s tarde.",this.isLoading=!1,re.w))).subscribe({next:i=>{this.executiveClaims=i,this.isLoading=!1,console.log("\u2705 Reclamos del ejecutivo cargados:",this.executiveClaims),this.updateDeleteButtonState(),this.masterChecked=!1,this.applyFilters()}});this.subscriptions.add(o)}applyFilters(){let t=[...this.executiveClaims];this.searchTerm&&(t=t.filter(o=>o.nombre.toLowerCase().includes(this.searchTerm.toLowerCase()))),this.filterStatus&&"Todos"!==this.filterStatus&&(t=t.filter(o=>o.estado===this.filterStatus)),this.filteredClaims=t,this.currentPage=1,this.updatePagedClaims()}viewClaim(t){this.selectedClaim={...t},this.initializeForm(this.selectedClaim),this.isEditing=!1,this.claimForm.disable(),this.showModal=!0,console.log("\u{1f50d} Reclamo seleccionado para ver/editar:",this.selectedClaim)}enableEdit(){this.isEditing=!0,this.claimForm.enable(),this.claimForm.get("id")?.disable(),this.claimForm.get("uidEjecutivo")?.disable()}saveChanges(){if(this.isEditing&&this.claimForm.valid&&this.selectedClaim){this.isLoading=!0;const t={id:this.selectedClaim.id,uidEjecutivo:this.selectedClaim.uidEjecutivo||this.TEST_EXECUTIVE_UID,...this.claimForm.getRawValue()};this.claimsService.updateClaim(t.uidEjecutivo,t).then(()=>{this.alert.success("\u2705 Reclamo actualizado con \xe9xito."),this.notificationService.sendToAdmins(`El ejecutivo <strong>${this.userData?.user_name}</strong> ha <strong>modificado</strong> el reclamo <strong>#${t.id}</strong>.`,"admin-alert"),this.cancelEdit(),this.loadExecutiveClaims(t.uidEjecutivo)}).catch(o=>{console.error("\u274c Error actualizando reclamo:",o),this.alert.error("Ocurri\xf3 un error al actualizar el reclamo. Int\xe9ntalo de nuevo."),this.isLoading=!1})}else this.isEditing?(this.claimForm.markAllAsTouched(),this.alert.showToastError("Por favor, completa todos los campos requeridos.","Formulario inv\xe1lido")):this.alert.showToastInfo('Haz clic en "Habilitar Edici\xf3n" para modificar el reclamo.',"Modo de Solo Lectura")}cancelEdit(){this.showModal=!1,this.selectedClaim=null,this.claimForm.reset(),this.errorMessage=null,this.isEditing=!1}getFormControl(t){return this.claimForm.get(t)}toggleMasterCheckbox(){this.masterChecked=!this.masterChecked,this.executiveClaims.forEach(t=>t.selected=this.masterChecked),this.updateDeleteButtonState()}toggleClaimSelection(t){t.selected=!t.selected,this.masterChecked=this.executiveClaims.every(o=>o.selected),this.updateDeleteButtonState()}hasSelectedClaims(){return this.executiveClaims.some(t=>t.selected)}updateDeleteButtonState(){this.showDeleteButton=this.hasSelectedClaims()}deleteSelectedClaims(){var t=this;return(0,f.A)(function*(){const o=t.executiveClaims.filter(m=>m.selected);if(0===o.length)return void t.alert.showToastInfo("No hay reclamos seleccionados para eliminar.","Informaci\xf3n");if(!(yield t.alert.confirm("\xbfEst\xe1s seguro?","Esta acci\xf3n eliminar\xe1 los reclamos seleccionados de forma permanente.")))return;t.isLoading=!0;const s=[];for(const m of o)m.uidEjecutivo&&m.id?s.push(t.claimsService.deleteClaim(m.uidEjecutivo,m.id).catch(_=>{console.error(`\u274c Error al eliminar el reclamo ${m.id}:`,_),t.alert.error(`No se pudo eliminar el reclamo: ${m.nombre}`)})):console.warn("\u26a0\ufe0f No se pudo eliminar el reclamo (falta UID o ID):",m);Promise.all(s).then(()=>{t.alert.success("\u2705 Reclamos seleccionados eliminados con \xe9xito."),t.currentUserUid&&t.loadExecutiveClaims(t.currentUserUid)}).catch(m=>{console.error("Un error inesperado ocurri\xf3 durante la eliminaci\xf3n masiva:",m)}).finally(()=>{t.isLoading=!1,t.masterChecked=!1,t.updateDeleteButtonState()})})()}updatePagedClaims(){const t=(this.currentPage-1)*this.itemsPerPage;this.pagedClaims=this.filteredClaims.slice(t,t+this.itemsPerPage)}getTotalPages(){return Math.ceil(this.filteredClaims.length/this.itemsPerPage)}getPagesArray(){return Array.from({length:this.getTotalPages()},(t,o)=>o+1)}onPageChange(t){t>=1&&t<=this.getTotalPages()&&(this.currentPage=t,this.updatePagedClaims())}onItemsPerPageChange(t){this.itemsPerPage=Number(t.target.value),this.currentPage=1,this.updatePagedClaims()}ngOnDestroy(){this.subscriptions.unsubscribe()}static \u0275fac=function(o){return new(o||n)(e.rXU(c.ok),e.rXU(D.B),e.rXU(E.u),e.rXU(R.u),e.rXU(G.D),e.rXU(ce.I),e.rXU(S.J))};static \u0275cmp=e.VBU({type:n,selectors:[["app-executive-claims"]],decls:28,vars:10,consts:[[1,"row"],[1,"col-12","text-start","grid-margin"],[1,"card"],[1,"card-body"],[1,"col-12"],["aria-label","breadcrumb",1,""],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item"],[3,"routerLink"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-12","grid-margin"],["class","d-flex justify-content-center align-items-center","style","height: 200px;",4,"ngIf"],[4,"ngIf"],[1,"row","grid-margin"],["class","col-md-6 col-xl-3 my-3 ",4,"ngFor","ngForOf"],["class","col-12 mt-3",4,"ngIf"],["class","row",4,"ngIf"],["class","modal fade show d-block","style","background-color: rgba(0,0,0,0.4); z-index: 1050;",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center",2,"height","200px"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"d-flex","align-items-center","mb-4","mb-lg-0","py-4"],[1,"position-relative","d-inline-block"],["alt","Profile Picture","width","100","height","100",1,"border","border-5","border-primary","rounded-circle","profile-pic","border-opacity-25","object-fit-cover",3,"src"],[1,"ms-3","text-start"],[1,"m-0","p-0"],[1,"m-0","p-0","text-muted"],[1,"badge","badge-type","badge-outline-info"],[1,"col-md-6","col-xl-3","my-3"],[3,"icon","count","label","color","footerText","trendIcon"],[1,"col-12","mt-3"],["role","alert",1,"alert","alert-danger","text-center"],["role","alert",1,"alert","alert-info","text-center"],[1,"col-6"],[1,"h3","mb-3"],[1,"mb-0"],[1,"col-6","text-end"],[1,"btn","btn-full","--danger","m-1","btn-sm",3,"click","disabled"],[1,"bi","bi-trash","me-1"],[1,"col-12","my-3"],[1,"row","g-3","align-items-center"],[1,"col-md-5"],["for","searchTerm",1,"form-label","visually-hidden"],["type","text","id","searchTerm","placeholder","Buscar por nombre...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"col-md-4"],["for","filterStatus",1,"form-label","visually-hidden"],["id","filterStatus",1,"form-select",3,"ngModelChange","change","ngModel"],["value","Todos"],["value","Iniciado"],["value","Pendiente"],["value","Cancelado"],["value","Cerrado"],[1,"col-md-3"],[1,"btn","btn-secondary","w-100",3,"click"],[1,"bi","bi-arrow-counterclockwise","me-1"],[1,"table-responsive"],[1,"table","table-light","table-hover","align-middle"],["type","checkbox",1,"form-check-input",3,"change","checked"],[4,"ngFor","ngForOf"],[1,"col-12","d-flex","justify-content-between","align-items-center","mt-3"],[1,"form-select","form-select-sm","d-inline-block","w-auto","ms-2",3,"change","ngModel"],[3,"value"],["aria-label","Page navigation"],[1,"pagination","mb-0"],[1,"page-item"],[1,"page-link",3,"click"],["class","page-item",3,"active",4,"ngFor","ngForOf"],["colspan","6",1,"text-center","text-muted","py-4"],[1,"badge",3,"ngClass"],[1,"btn","btn-full","--secondary","m-1","btn-sm",3,"click"],[1,"bi","bi-eye"],[1,"modal","fade","show","d-block",2,"background-color","rgba(0,0,0,0.4)","z-index","1050"],[1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content","rounded","shadow-lg"],[1,"modal-header"],[1,"modal-title"],[1,"badge","badge-full-secondary"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"row","g-3",3,"formGroup"],[1,"col-md-6"],[1,"form-label"],["formControlName","nombre",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["formControlName","tipo",1,"form-control"],["formControlName","detail","rows","3",1,"form-control"],["formControlName","estado",1,"form-select",3,"ngClass"],["formControlName","fecha","type","date",1,"form-control",3,"ngClass"],[1,"modal-footer"],["type","button",1,"btn","btn-full","--warning","m-1",3,"click"],["type","button","class","btn btn-full --primary m-1",3,"click",4,"ngIf"],["type","button","class","btn btn-full --success m-1",3,"disabled","click",4,"ngIf"],[1,"invalid-feedback"],["type","button",1,"btn","btn-full","--primary","m-1",3,"click"],[1,"bi","bi-pencil-square","me-1"],["type","button",1,"btn","btn-full","--success","m-1",3,"click","disabled"],[1,"bi","bi-save","me-1"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",0)(5,"div",4)(6,"nav",5)(7,"ol",6)(8,"li",7)(9,"a",8),e.EFF(10,"Home"),e.k0s()(),e.j41(11,"li",9),e.EFF(12,"Mis reclamos"),e.k0s()()()()()()()()(),e.j41(13,"div",0)(14,"div",10),e.DNE(15,ue,4,0,"div",11)(16,he,16,3,"div",12),e.k0s()(),e.j41(17,"div",13),e.DNE(18,ge,2,6,"div",14),e.k0s(),e.j41(19,"div",0)(20,"div",10)(21,"div",2)(22,"div",3),e.DNE(23,pe,4,0,"div",11)(24,fe,3,1,"div",15)(25,ve,3,0,"div",15)(26,Ee,77,18,"div",16),e.k0s()()()(),e.DNE(27,Re,47,16,"div",17)),2&o&&(e.R7$(9),e.Y8G("routerLink",e.lJ4(9,de)),e.R7$(6),e.Y8G("ngIf",i.isLoading),e.R7$(),e.Y8G("ngIf",!i.isLoading&&i.userData),e.R7$(2),e.Y8G("ngForOf",i.metrics),e.R7$(5),e.Y8G("ngIf",i.isLoading),e.R7$(),e.Y8G("ngIf",i.errorMessage),e.R7$(),e.Y8G("ngIf",!i.isLoading&&0===i.executiveClaims.length&&!i.errorMessage),e.R7$(),e.Y8G("ngIf",!i.isLoading&&i.executiveClaims.length>0&&!i.errorMessage),e.R7$(),e.Y8G("ngIf",i.showModal))},dependencies:[h.MD,h.YU,h.Sq,h.bT,h.vh,c.YN,c.qT,c.xH,c.y7,c.me,c.wz,c.BC,c.cb,c.vS,c.X1,c.j4,c.JD,P._,r.iI,r.Wk],encapsulation:2})}return n})();var ye=a(7643);let De=(()=>{class n{http;jsonUrl="assets/data/claims-expanded.json";constructor(t){this.http=t,console.log("%c<<< Start CLAIMS DUMMY service >>>","background: #fff3cd; color: #664d03; padding: 2px 5px;")}getClaimsByUser(t){return this.http.get(this.jsonUrl).pipe((0,O.T)(o=>o.users[t]?.claims||[]))}getAllClaims(){return this.http.get(this.jsonUrl).pipe((0,O.T)(t=>Object.values(t.users).flatMap(s=>s.claims||[])))}static \u0275fac=function(o){return new(o||n)(e.KVO(ye.Qq))};static \u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Me(n,l){1&n&&(e.j41(0,"div",5)(1,"div",6)(2,"span",7),e.EFF(3,"Cargando rol..."),e.k0s()()())}function Se(n,l){1&n&&(e.j41(0,"app-admin-claims")(1,"h2"),e.EFF(2,"Admin Claims"),e.k0s(),e.j41(3,"p"),e.EFF(4,"Here you can manage admin claims."),e.k0s()())}function Pe(n,l){1&n&&(e.j41(0,"app-executive-claims")(1,"h2"),e.EFF(2,"Executive Claims"),e.k0s(),e.j41(3,"p"),e.EFF(4,"Here you can manage executive claims."),e.k0s()())}function Ge(n,l){1&n&&(e.j41(0,"div",8),e.EFF(1," No se pudo determinar tu rol. Contacta al administrador. "),e.k0s())}let L=(()=>{class n{userService;claimsDummyService;role=null;showAdmin=!1;showExecutive=!1;isLoading=!0;constructor(t,o){this.userService=t,this.claimsDummyService=o}ngOnInit(){this.userService.getCurrentUserRole().subscribe(t=>{this.isLoading=!1,console.log("\u{1f9ea} Rol recibido desde el servicio:",t),this.role=t,"Administrador"===t?(this.showAdmin=!0,this.isLoading=!1):"Ejecutivo"===t?this.showExecutive=!0:console.warn("\u26a0\ufe0f Rol desconocido o no asignado")}),this.claimsDummyService.getAllClaims().subscribe(t=>{console.log("\u{1f4c4} Reclamos de todos los usuarios:",t)}),this.claimsDummyService.getClaimsByUser("0FnJKfeUI2T73kBGO5GCdlpUs6W2").subscribe({next:t=>{console.log("\u{1f4c4} Reclamos del usuario:",t)},error:t=>{console.error("\u274c Error al obtener los reclamos:",t)}})}static \u0275fac=function(o){return new(o||n)(e.rXU(G.D),e.rXU(De))};static \u0275cmp=e.VBU({type:n,selectors:[["app-claims-router"]],decls:7,vars:4,consts:[[1,"row"],[1,"col-12"],["class","d-flex justify-content-center align-items-center",4,"ngIf"],[4,"ngIf"],["class","alert alert-danger mt-3",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"alert","alert-danger","mt-3"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1),e.DNE(2,Me,4,0,"div",2),e.k0s(),e.j41(3,"div",1),e.DNE(4,Se,5,0,"app-admin-claims",3)(5,Pe,5,0,"app-executive-claims",3)(6,Ge,2,0,"div",4),e.k0s()()),2&o&&(e.R7$(2),e.Y8G("ngIf",i.isLoading),e.R7$(2),e.Y8G("ngIf",i.showAdmin),e.R7$(),e.Y8G("ngIf",i.showExecutive),e.R7$(),e.Y8G("ngIf",!i.isLoading&&!i.showAdmin&&!i.showExecutive))},dependencies:[h.MD,h.bT,ae,Ie],encapsulation:2})}return n})();const Ae=[{path:"",children:[{path:"",component:L},{path:"claims",component:L},{path:"todo",component:T},{path:"admin-users",children:[{path:"",loadComponent:()=>a.e(831).then(a.bind(a,6831)).then(n=>n.AdminUserManagementComponent)},{path:"edit-role/:uid",loadComponent:()=>a.e(923).then(a.bind(a,2923)).then(n=>n.UserRoleEditComponent)},{path:"profile-edit/:uid",loadComponent:()=>a.e(78).then(a.bind(a,4078)).then(n=>n.ProfileEditComponent)}]},{path:"admin-notifications",loadComponent:()=>a.e(51).then(a.bind(a,3051)).then(n=>n.AdminNotificationsComponent)},{path:"analytics",loadComponent:()=>a.e(773).then(a.bind(a,8773)).then(n=>n.AnalyticsComponent)},{path:"notifications/:uid",loadComponent:()=>a.e(327).then(a.bind(a,2327)).then(n=>n.NotificationsComponent)},{path:"profile/:uid",loadComponent:()=>a.e(675).then(a.bind(a,9675)).then(n=>n.ProfileViewComponent)},{path:"**",redirectTo:""}]}]}}]);