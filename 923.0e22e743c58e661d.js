"use strict";(self.webpackChunkclaims_app=self.webpackChunkclaims_app||[]).push([[923],{2923:(F,l,a)=>{a.r(l),a.d(l,{UserRoleEditComponent:()=>h});var r=a(4341),d=a(5207),e=a(1360),n=a(5072),c=a(9885),m=a(9332);const b=()=>["/dashboard","analytics"],v=()=>["/dashboard","admin-users"],E=i=>["/dashboard","edit-role",i];let h=(()=>{class i{fb;route;userService;router;alertService;roleForm;userId;userData;constructor(s,t,o,u,p){this.fb=s,this.route=t,this.userService=o,this.router=u,this.alertService=p}ngOnInit(){this.userId=this.route.snapshot.paramMap.get("uid")||"",console.log("\u{1f4cd} UID capturado desde ruta:",this.userId),this.userId?(this.roleForm=this.fb.group({rol:["",r.k0.required]}),this.userService.getUserProfile(this.userId).subscribe(s=>{s?(this.userData=s,this.roleForm.patchValue({rol:s.rol||"Ejecutivo"})):console.warn("\u26a0\ufe0f Usuario no encontrado con UID:",this.userId)})):console.warn("\u26a0\ufe0f No se pudo obtener el UID desde la URL")}get rol(){return this.roleForm.get("rol")}onSubmit(){if(this.roleForm.invalid||!this.userData?.uid)return void console.warn("\u26a0\ufe0f Formulario inv\xe1lido o UID no disponible.");const s=this.roleForm.value.rol;console.log("\u{1f4cd} Rol seleccionado:",this.roleForm.value),this.userService.updateUserRole(this.userData.uid,s).then(()=>{console.log("\u2705 Rol actualizado correctamente"),this.alertService.showToastSuccess("Rol actualizado con \xe9xito","Mensaje"),this.router.navigate(["/dashboard/admin-users"])}).catch(t=>{console.error("\u274c Error al actualizar el rol:",t),this.alertService.error("Error al actualizar rol")})}static \u0275fac=function(t){return new(t||i)(e.rXU(r.ok),e.rXU(n.nX),e.rXU(c.D),e.rXU(n.Ix),e.rXU(m.u))};static \u0275cmp=e.VBU({type:i,selectors:[["app-user-role-edit"]],decls:50,vars:12,consts:[[1,"row","border-2"],[1,"col-12","mb-3"],[1,"card"],[1,"card-body"],[1,"mb-3"],[1,"bi","bi-people-fill"],["aria-label","breadcrumb",1,"bg-body-tertiary","rounded-3","p-3","mb-4"],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item"],[3,"routerLink"],[1,"card","p-4"],[1,"mb-1"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"badge","text-bg-primary"],[1,"col-sm-12","col-md-6"],[1,"form-label"],["disabled","",1,"form-control",3,"value"],[1,"col-sm-12","col-md-6","mb-4"],["formControlName","rol",1,"form-select"],["value","Administrador"],["value","Ejecutivo"],[1,"col-12"],[1,"wrapp-btn","text-end"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(t,o){1&t&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),e.nrm(5,"i",5),e.EFF(6," Administraci\xf3n de Roles"),e.k0s(),e.j41(7,"p"),e.EFF(8,"Desde esta secci\xf3n podr\xe1s buscar a los usuarios y gestionar sus accesos."),e.k0s(),e.j41(9,"nav",6)(10,"ol",7)(11,"li",8)(12,"a",9),e.EFF(13,"Home"),e.k0s()(),e.j41(14,"li",8)(15,"a",9),e.EFF(16,"Management users"),e.k0s()(),e.j41(17,"li",8)(18,"a",9),e.EFF(19,"Edit Role"),e.k0s()()()()()()()(),e.j41(20,"div",10)(21,"h4",11),e.EFF(22,"Editar Rol del Usuario "),e.k0s(),e.j41(23,"form",12),e.bIt("ngSubmit",function(){return o.onSubmit()}),e.j41(24,"div",13)(25,"div",1)(26,"span",14),e.EFF(27),e.k0s()(),e.j41(28,"div",15)(29,"div",4)(30,"label",16),e.EFF(31,"Email:"),e.k0s(),e.nrm(32,"input",17),e.k0s()(),e.j41(33,"div",15)(34,"div",4)(35,"label",16),e.EFF(36,"Nombre:"),e.k0s(),e.nrm(37,"input",17),e.k0s()()(),e.j41(38,"div",18)(39,"label",16),e.EFF(40,"Selecciona el Rol:"),e.k0s(),e.j41(41,"select",19)(42,"option",20),e.EFF(43,"Administrador"),e.k0s(),e.j41(44,"option",21),e.EFF(45,"Ejecutivo"),e.k0s()()(),e.j41(46,"div",22)(47,"div",23)(48,"button",24),e.EFF(49," Guardar Cambios "),e.k0s()()()()()),2&t&&(e.R7$(12),e.Y8G("routerLink",e.lJ4(8,b)),e.R7$(3),e.Y8G("routerLink",e.lJ4(9,v)),e.R7$(3),e.Y8G("routerLink",e.eq3(10,E,o.userData.uid)),e.R7$(5),e.Y8G("formGroup",o.roleForm),e.R7$(4),e.SpI("uid: ",o.userData.uid,""),e.R7$(5),e.Y8G("value",o.userData.email),e.R7$(5),e.Y8G("value",o.userData.name+" "+o.userData.last_name),e.R7$(11),e.Y8G("disabled",o.roleForm.invalid))},dependencies:[r.X1,r.qT,r.xH,r.y7,r.wz,r.BC,r.cb,r.j4,r.JD,d.Wk],encapsulation:2})}return i})()}}]);