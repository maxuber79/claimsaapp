import{h as N,o as q,t as D}from"./chunk-2BL6JQEY.js";import{b as L,c as g,d as A,e as z,h as G,j,k as B,p as U,r as J}from"./chunk-5RABQZIW.js";import{E as V,I as T}from"./chunk-3OADCOYV.js";import{Da as b,Ea as u,Ja as a,Ka as S,La as _,Ta as x,Va as p,aa as y,ba as o,db as E,fa as v,g as w,ha as P,ib as F,kb as M,la as d,mb as O,sa as n,ta as t,ua as r,ub as I,va as m,vb as R,xb as k}from"./chunk-5TBBY7BX.js";var f=(i,l)=>({"is-invalid":i,"is-valid":l}),$=()=>["/"];function H(i,l){i&1&&(t(0,"div"),a(1,"El nombre completo es obligatorio!"),r())}function K(i,l){if(i&1&&(t(0,"div",42),d(1,H,2,0,"div",43),r()),i&2){let s=u();o(),n("ngIf",s.getControl.name.errors.required)}}function Q(i,l){i&1&&(t(0,"div"),a(1,"El nombre completo es obligatorio!"),r())}function X(i,l){if(i&1&&(t(0,"div",42),d(1,Q,2,0,"div",43),r()),i&2){let s=u();o(),n("ngIf",s.getControl.last_name.errors.required)}}function Z(i,l){i&1&&(t(0,"div"),a(1,"El nombre completo es obligatorio!"),r())}function ee(i,l){if(i&1&&(t(0,"div",42),d(1,Z,2,0,"div",43),r()),i&2){let s=u();o(),n("ngIf",s.getControl.user_name.errors.required)}}function te(i,l){i&1&&(t(0,"div"),a(1,"Ingresa un correo v\xE1lido."),r())}function ie(i,l){if(i&1&&(t(0,"div",42),d(1,te,2,0,"div",43),r()),i&2){let s=u();o(),n("ngIf",s.getControl.email.errors.required)}}function re(i,l){i&1&&(t(0,"div"),a(1," La contrase\xF1a es obligatoria. "),r())}function oe(i,l){i&1&&(t(0,"div"),a(1," Debe tener al menos 6 caracteres. "),r())}function ne(i,l){if(i&1&&(t(0,"div",42),d(1,re,2,0,"div",43)(2,oe,2,0,"div",43),r()),i&2){let s=u();o(),n("ngIf",s.getControl.password.errors.required),o(),n("ngIf",s.getControl.password.errors.minlength)}}function ae(i,l){i&1&&(t(0,"div",42),a(1," Debes repetir la contrase\xF1a. "),r())}function le(i,l){i&1&&(t(0,"div",42),a(1," Las contrase\xF1as no coinciden. "),r())}function se(i,l){i&1&&(t(0,"div",44)(1,"div",45)(2,"span",46),a(3,"Cargando..."),r()(),t(4,"p",47),a(5,"Procesando..."),r()())}var W=class i{constructor(l,s,e,c){this.fb=l;this.auth=s;this.firestore=e;this.router=c;console.log("%c<<< start constructor >>>","background: #0d6efd; color: #ffffff; padding: 2px 5px;"),this.registerForm=this.fb.group({name:["",g.required],last_name:["",g.required],user_name:["",g.required],email:["",[g.required,g.email]],password:["",[g.required,g.minLength(6)]],confirmPassword:["",g.required]},{validators:[this.passwordMatchValidator]}),console.log("%c<<< end component >>>","background: #198754; color: #ffffff; padding: 2px 5px;")}imagePath="assets/images/webmain.svg";angularVersion=E.full;myTitle="My first Claims";mySubTitle=`in Angular ${this.angularVersion}`;textContent="Lorem ipsum dolor sit amet consectetur adipisicing elit Eveniet, itaque accusantium odio, soluta, corrupti aliquam quibusdam tempora at cupiditate quis eum maiores liber veritatis? Dicta facilis sint aliquid ipsum atque?";isLoading=!1;passwordVisible=!1;confirmPasswordVisible=!1;registerForm;passwordMatchValidator(l){let s=l.get("password")?.value,e=l.get("confirmPassword")?.value;return s===e?null:{passwordMismatch:!0}}togglePasswordVisibility(){this.passwordVisible=!this.passwordVisible}toggleConfirmPasswordVisibility(){this.confirmPasswordVisible=!this.confirmPasswordVisible}get getControl(){return this.registerForm.controls}onSubmit(){return w(this,null,function*(){if(console.log("%c<<< click button resgister >>>","background: #6610f2; color: #ffffff; padding: 2px 5px;",this.registerForm.value),this.isLoading=!0,this.registerForm.invalid)return;let{name:l,last_name:s,user_name:e,email:c,password:Y}=this.registerForm.value;try{let h=(yield T(this.auth,c,Y)).user.uid;yield D(q(this.firestore,"users",h),{name:l,last_name:s,user_name:e,email:c,rol:"Ejecutivo",isProfileComplete:!1,created_at:new Date}),console.log("\u2705 Usuario registrado correctamente:",h),alert(JSON.stringify(this.registerForm.value,null,2)),this.router.navigate(["/welcome"]),this.isLoading=!1}catch(C){console.error("\u274C Error al registrar el usuario:",C),C.code==="auth/email-already-in-use"?alert("Este correo ya est\xE1 registrado. Intenta con otro."):alert("Ocurri\xF3 un error al registrar el usuario. Intenta nuevamente.")}})}static \u0275fac=function(s){return new(s||i)(v(U),v(V),v(N),v(I))};static \u0275cmp=P({type:i,selectors:[["app-register"]],decls:74,vars:44,consts:[[2,"background-color","lightcyan"],[1,"w-100","px-4","py-5","px-md-5","text-center","text-lg-start"],[1,"container-fluid"],[1,"row","gx-lg-5","align-items-center"],[1,"col-lg-5","mb-5","mb-lg-0","mh-100"],[1,"my-5","display-3","fw-bold","ls-tight"],[1,"text-primary","fw-normal"],[2,"color","hsl(217, 10%, 50.8%)"],[1,"col-lg-7","mb-5","mb-lg-0"],[1,"card"],[1,"card-header","text-center","border","border-0"],["alt","",1,"logo-login","my-2",3,"src"],[1,"h2","mb-2","fw-bold"],[1,"mb-2"],[1,"card-body","py-5","px-md-5"],["novalidate","",3,"ngSubmit","formGroup"],[1,"row"],[1,"col-6"],[1,"form-floating","mb-3"],["type","text","id","name","placeholder","Nombre","formControlName","name",1,"form-control",3,"ngClass"],["for","name"],["class","invalid-feedback animate__animated animate__fadeIn",4,"ngIf"],["type","text","id","last_name","placeholder","Apellido","formControlName","last_name",1,"form-control",3,"ngClass"],["for","last_name"],[1,"col-12"],["type","text","id","user_name","placeholder","Nombre de usuario","formControlName","user_name",1,"form-control",3,"ngClass"],["for","user_name"],["type","email","id","email","placeholder","Correo","formControlName","email",1,"form-control",3,"ngClass"],["for","email"],[1,"input-group","form-floating","mb-3"],["id","password","placeholder","Contrase\xF1a","formControlName","password",1,"form-control",3,"type","ngClass"],["for","password"],["type","button","tabindex","-1",1,"btn","btn-outline-secondary",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click"],[1,"bi",3,"ngClass"],["id","confirmPassword","placeholder","Repite tu contrase\xF1a","formControlName","confirmPassword",1,"form-control",3,"type","ngClass"],["for","confirmPassword"],["class","text-center my-3",4,"ngIf"],[1,"d-grid"],["type","submit",1,"btn","btn-primary","btn-lg",3,"disabled"],[1,"col-12","text-center","mt-5"],[1,"login-wrapper-footer-text"],["id","back-to-login-from-forget-link",3,"routerLink"],[1,"invalid-feedback","animate__animated","animate__fadeIn"],[4,"ngIf"],[1,"text-center","my-3"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2"]],template:function(s,e){s&1&&(t(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),a(6),m(7,"br"),t(8,"span",6),a(9),r()(),t(10,"p",7),a(11),r()(),t(12,"div",8)(13,"div",9)(14,"div",10),m(15,"img",11),t(16,"h2",12),a(17,"Please sign in"),r(),t(18,"p",13),a(19,"Your Admin Dashboard"),r()(),t(20,"div",14)(21,"form",15),b("ngSubmit",function(){return e.onSubmit()}),t(22,"div",16)(23,"div",17)(24,"div",18),m(25,"input",19),t(26,"label",20),a(27,"Nombre"),r(),d(28,K,2,1,"div",21),r()(),t(29,"div",17)(30,"div",18),m(31,"input",22),t(32,"label",23),a(33,"Apellido"),r(),d(34,X,2,1,"div",21),r()(),t(35,"div",24)(36,"div",18),m(37,"input",25),t(38,"label",26),a(39,"Nombre de usuario"),r(),d(40,ee,2,1,"div",21),r()(),t(41,"div",24)(42,"div",18),m(43,"input",27),t(44,"label",28),a(45,"Correo electr\xF3nico"),r(),d(46,ie,2,1,"div",21),r()(),t(47,"div",24)(48,"div",29),m(49,"input",30),t(50,"label",31),a(51,"Contrase\xF1a"),r(),t(52,"button",32),b("click",function(){return e.togglePasswordVisibility()}),m(53,"i",33),r(),d(54,ne,3,2,"div",21),r()(),t(55,"div",24)(56,"div",29),m(57,"input",34),t(58,"label",35),a(59,"Repite tu contrase\xF1a"),r(),t(60,"button",32),b("click",function(){return e.toggleConfirmPasswordVisibility()}),m(61,"i",33),r(),d(62,ae,2,0,"div",21)(63,le,2,0,"div",21),r()(),t(64,"div",24),d(65,se,6,0,"div",36),t(66,"div",37)(67,"button",38),a(68," Registrarse "),r()()(),t(69,"div",39)(70,"p",40),a(71,"Did you save your password? "),t(72,"a",41),a(73,"Back to Login"),r()()()()()()()()()()()()),s&2&&(o(6),_(" ",e.myTitle," "),o(3),S(e.mySubTitle),o(2),_(" ",e.textContent," "),o(4),n("src",e.imagePath,y),o(6),n("formGroup",e.registerForm),o(4),n("ngClass",p(25,f,e.getControl.name.errors&&(e.getControl.name.dirty||e.getControl.name.touched),e.getControl.name.valid)),o(3),n("ngIf",e.getControl.name.errors&&e.getControl.name.invalid&&e.getControl.name.touched),o(3),n("ngClass",p(28,f,e.getControl.last_name.errors&&(e.getControl.last_name.dirty||e.getControl.last_name.touched),e.getControl.last_name.valid)),o(3),n("ngIf",e.getControl.last_name.errors&&e.getControl.last_name.invalid&&e.getControl.last_name.touched),o(3),n("ngClass",p(31,f,e.getControl.user_name.errors&&(e.getControl.user_name.dirty||e.getControl.user_name.touched),e.getControl.user_name.valid)),o(3),n("ngIf",e.getControl.user_name.errors&&e.getControl.user_name.invalid&&e.getControl.user_name.touched),o(3),n("ngClass",p(34,f,e.getControl.email.errors&&(e.getControl.email.dirty||e.getControl.email.touched),e.getControl.email.valid)),o(3),n("ngIf",e.getControl.email.errors&&e.getControl.email.invalid&&e.getControl.email.touched),o(3),n("type",e.passwordVisible?"text":"password")("ngClass",p(37,f,e.getControl.password.errors&&(e.getControl.password.dirty||e.getControl.password.touched),e.getControl.password.valid)),o(4),n("ngClass",e.passwordVisible?"bi-eye-slash":"bi-eye"),o(),n("ngIf",e.getControl.password.errors&&e.getControl.password.touched),o(3),n("type",e.confirmPasswordVisible?"text":"password")("ngClass",p(40,f,e.getControl.confirmPassword.touched&&e.getControl.confirmPassword.invalid||(e.registerForm.errors==null?null:e.registerForm.errors.passwordMismatch),e.getControl.confirmPassword.valid&&!(e.registerForm.errors!=null&&e.registerForm.errors.passwordMismatch))),o(4),n("ngClass",e.confirmPasswordVisible?"bi-eye-slash":"bi-eye"),o(),n("ngIf",e.getControl.confirmPassword.touched&&(e.getControl.confirmPassword.errors==null?null:e.getControl.confirmPassword.errors.required)),o(),n("ngIf",(e.registerForm.errors==null?null:e.registerForm.errors.passwordMismatch)&&e.getControl.confirmPassword.touched),o(2),n("ngIf",e.isLoading),o(2),n("disabled",e.registerForm.invalid),o(5),n("routerLink",x(43,$)))},dependencies:[O,F,M,J,G,L,A,z,j,B,k,R],styles:['.logo-login[_ngcontent-%COMP%]{width:100px;height:auto;display:inline-block}.bd-placeholder-img[_ngcontent-%COMP%]{font-size:1.125rem;text-anchor:middle;-webkit-user-select:none;-moz-user-select:none;user-select:none}@media (min-width: 768px){.bd-placeholder-img-lg[_ngcontent-%COMP%]{font-size:3.5rem}}.b-example-divider[_ngcontent-%COMP%]{width:100%;height:3rem;background-color:#0000001a;border:solid rgba(0,0,0,.15);border-width:1px 0;box-shadow:inset 0 .5em 1.5em #0000001a,inset 0 .125em .5em #00000026}.b-example-vr[_ngcontent-%COMP%]{flex-shrink:0;width:1.5rem;height:100vh}.bi[_ngcontent-%COMP%]{vertical-align:-.125em;fill:currentColor}.nav-scroller[_ngcontent-%COMP%]{position:relative;z-index:2;height:2.75rem;overflow-y:hidden}.nav-scroller[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;padding-bottom:1rem;margin-top:-1px;overflow-x:auto;text-align:center;white-space:nowrap;-webkit-overflow-scrolling:touch}.btn-bd-primary[_ngcontent-%COMP%]{--bd-violet-bg: #712cf9;--bd-violet-rgb: 112.520718, 44.062154, 249.437846;--bs-btn-font-weight: 600;--bs-btn-color: var(--bs-white);--bs-btn-bg: var(--bd-violet-bg);--bs-btn-border-color: var(--bd-violet-bg);--bs-btn-hover-color: var(--bs-white);--bs-btn-hover-bg: #6528e0;--bs-btn-hover-border-color: #6528e0;--bs-btn-focus-shadow-rgb: var(--bd-violet-rgb);--bs-btn-active-color: var(--bs-btn-hover-color);--bs-btn-active-bg: #5a23c8;--bs-btn-active-border-color: #5a23c8 }.bd-mode-toggle[_ngcontent-%COMP%]{z-index:1500}.bd-mode-toggle[_ngcontent-%COMP%]   .bi[_ngcontent-%COMP%]{width:1em;height:1em}.bd-mode-toggle[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   .bi[_ngcontent-%COMP%]{display:block!important}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}.form-signin[_ngcontent-%COMP%]{max-width:330px;padding:1rem}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}.divider[_ngcontent-%COMP%]:after, .divider[_ngcontent-%COMP%]:before{content:"";flex:1;height:1px;background:#eee}.input-group.form-floating[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{z-index:20}']})};export{W as RegisterComponent};
