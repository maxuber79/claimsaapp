import{a as W}from"./chunk-4H67W4SF.js";import{i as L}from"./chunk-VYWRVR3S.js";import{a as D}from"./chunk-34SF47SS.js";import"./chunk-2BL6JQEY.js";import{a as P}from"./chunk-N6RA7QK6.js";import{b as R,d as j,e as G,h as T,j as B,k as O,p as z,q as H,r as J}from"./chunk-5RABQZIW.js";import"./chunk-3OADCOYV.js";import{Ba as C,Da as b,Fa as _,Ja as r,Ka as m,L as c,La as E,M as u,Ma as N,Ta as U,a as y,aa as x,b as h,ba as o,fa as p,ha as w,ib as M,kb as k,la as S,mb as F,sa as n,sb as I,ta as e,ua as t,va as l,vb as V,xb as A}from"./chunk-5TBBY7BX.js";var K=()=>["/dashboard"];function Q(s,d){s&1&&(e(0,"div",88)(1,"div",89)(2,"span",90),r(3,"Cargando..."),t()()())}function X(s,d){s&1&&(e(0,"button",91),r(1,"Guardar cambios"),t())}var q=class s{constructor(d,a,i,f,v,g){this.route=d;this.fb=a;this.userService=i;this.authService=f;this.alertService=v;this.storage=g;console.log("%c<<< Start constructor >>>","background: #fff3cd; color: #664d03; padding: 2px 5px;")}uid="";profileForm;profileUserForm;userData=null;editMode=!1;isDisabled=!1;loadUserData;loading=!0;isSaving=!1;isLoading=!0;defaultImage="https://randomuser.me/api/portraits/men/40.jpg";previewUrl=null;imageFile=null;fileName="";perfil=null;config=null;ngOnInit(){console.log("%c<<< Start ngOnInit >>>","background: #fff3cd; color: #664d03; padding: 2px 5px;");let d=this.route.snapshot.paramMap.get("uid");if(console.log("%c<<< UID desde la ruta >>>","background: #d1e7dd; color: #0f5132; padding: 2px 5px;",d),!d){console.error("\u274C No se encontr\xF3 UID en la ruta");return}this.profileUserForm=this.fb.group({uid:[{value:"",disabled:!0}],email:[{value:"",disabled:!0}],photoURL:[""],name:[""],last_name:[""],user_name:[""],username:[""],phone:[""],mobile:[""],address:[""],city:[""],commune:[""],profession:[""],website:[""],github:[""],instagram:[""],twitter:[""],facebook:[""],bio:[""]}),this.uid=d,this.userService.getUserData(this.uid).subscribe({next:a=>{this.userData=h(y({},a),{uid:this.uid,email:a?.email??"",status:a?.status??""}),this.perfil=h(y({},a),{uid:this.uid,email:a?.email??"",status:a?.status??""}),this.isLoading=!1,console.log("\u2705 Usuario cargado:",this.userData),this.profileUserForm.patchValue({uid:this.perfil?.uid||"",photoURL:this.perfil?.photoURL||"",name:this.perfil?.name||"",last_name:this.perfil?.last_name||"",user_name:this.perfil?.user_name||"",username:this.perfil?.username||"n/a",email:this.perfil?.email||"",phone:this.perfil?.phone||"",mobile:this.perfil?.mobile||"",address:this.perfil?.address||"",city:this.perfil?.city||"",commune:this.perfil?.commune||"",profession:this.perfil?.profession||"",website:this.perfil?.website||"",github:this.perfil?.github||"",instagram:this.perfil?.instagram||"",twitter:this.perfil?.twitter||"",facebook:this.perfil?.facebook||"",bio:this.perfil?.bio||""}),console.log("%c<<< Formulario patchValue >>>","background: #d1e7dd; color: #0f5132; padding: 2px 5px;",this.profileUserForm.value)},error:a=>{console.error("\u274C Error al cargar usuario:",a),this.isLoading=!1},complete:()=>{console.log("%c<<< Usuario cargado correctamente >>>","background: #d1e7dd; color: #0f5132; padding: 2px 5px;")}})}initForm(){}onFileSelected(d){}loadUserProfile(d){console.log("%c<<< Start loadUserProfile >>>","background: #198754; color: #ffffff; padding: 2px 5px;")}saveProfile(){if(console.log("Guardar perfil"),console.log("%c<<< Guardar perfil >>>","background: #0d6efd; color: #fff; padding: 2px 5px;"),this.profileUserForm.invalid){alert("\u26A0\uFE0F El formulario es inv\xE1lido. Revisa los campos.");return}let d=this.profileUserForm.value,a=this.uid;console.log("%c<<< uid >>>","background: #d1e7dd; color: #0f5132; padding: 2px 5px;",a),console.log("%c<<< Datos a guardar >>>","background: #d1e7dd; color: #0f5132; padding: 2px 5px;",d),this.userService.updateUserProfile(this.uid,d).subscribe({next:()=>{console.log("%c\u2705 Perfil actualizado correctamente","background: #d1e7dd; color: #0f5132; padding: 2px 5px;"),this.alertService.success("Perfil actualizado correctamente"),this.toggleEdit()},error:i=>{console.error("%c\u274C Error al actualizar perfil:","background: #f8d7da; color: #842029; padding: 2px 5px;",i),this.alertService.error("\u274C Error al guardar perfil, revisa la consola")}})}toggleEdit(){this.editMode&&this.perfil&&this.profileUserForm.patchValue(this.perfil),this.editMode=!this.editMode}static \u0275fac=function(a){return new(a||s)(p(I),p(z),p(D),p(P),p(L),p(W))};static \u0275cmp=w({type:s,selectors:[["app-profile-view"]],decls:176,vars:37,consts:[["fileInput",""],[1,"row"],[1,"col"],["class","text-center my-5",4,"ngIf"],[1,"col-12","text-start","grid-margin"],[1,"card"],[1,"card-body"],[1,"col-12"],["aria-label","breadcrumb",1,""],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item"],[3,"routerLink"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-lg-4","grid-margin"],[1,"card","mb-4"],[1,"card-body","text-center"],[1,"position-relative","d-inline-block"],["alt","Profile Picture","width","120","height","120",1,"rounded-circle","object-fit-cover","profile-pic",3,"src"],["type","file","accept","image/*","hidden","",3,"change"],[1,"btn","btn-primary","btn-sm","position-absolute","bottom-0","end-0","rounded-circle",3,"click"],[1,"fas","fa-camera"],[1,"my-2"],[1,"text-muted","mb-1"],[1,"badge","bg-primary-subtle","text-primary","px-3","py-2","rounded-pill"],[1,"text-muted","mb-2"],[1,"mb-4"],[1,"badge","bg-success-subtle","text-dark","px-3","py-2","rounded-pill"],[1,"d-flex","justify-content-center","mb-2"],["type","button","data-mdb-button-init","","data-mdb-ripple-init","",1,"btn","btn-primary"],["type","button","data-mdb-button-init","","data-mdb-ripple-init","",1,"btn","btn-outline-primary","ms-1"],[1,"list-group","list-group-flush","rounded-3"],[1,"list-group-item","d-flex","justify-content-between","align-items-center","p-3"],[1,"fas","fa-globe","fa-lg","text-warning"],[1,"mb-0"],[1,"fab","fa-github","fa-lg","text-body"],[1,"fab","fa-twitter","fa-lg",2,"color","#55acee"],[1,"fab","fa-instagram","fa-lg",2,"color","#ac2bac"],[1,"fab","fa-facebook-f","fa-lg",2,"color","#3b5998"],[1,"col-lg-8","grid-margin"],[3,"ngSubmit","formGroup"],[1,"row","form-group"],["for","uid",1,"col-sm-3","col-form-label"],[1,"col-sm-9"],["type","text","id","uid","formControlName","uid",1,"form-control",3,"readonly"],["for","email",1,"col-sm-3","col-form-label"],["type","text","id","staticEmail","formControlName","email",1,"form-control-plaintext",3,"readonly"],["for","photoURL",1,"col-sm-3","col-form-label"],["id","photoURL","type","url","formControlName","photoURL","placeholder","https://...",1,"form-control",3,"readonly"],[1,"form-text","text-end"],["href","https://imgur.com/upload","target","_blank"],["for","name",1,"col-sm-3","col-form-label"],["type","text","id","name","formControlName","name",1,"form-control",3,"readonly"],["for","last_name",1,"col-sm-3","col-form-label"],["type","text","id","last_name","formControlName","last_name",1,"form-control",3,"readonly"],["for","user_name",1,"col-sm-3","col-form-label"],["type","text","id","user_name","formControlName","user_name",1,"form-control",3,"readonly"],["type","text","id","username","formControlName","username",1,"form-control",3,"readonly"],["for","phone",1,"col-sm-3","col-form-label"],["type","text","id","phone","formControlName","phone",1,"form-control",3,"readonly"],["for","mobile",1,"col-sm-3","col-form-label"],["type","text","id","mobile","formControlName","mobile",1,"form-control",3,"readonly"],["for","address",1,"col-sm-3","col-form-label"],["type","text","id","address","formControlName","address",1,"form-control",3,"readonly"],[1,"row","g-0"],[1,"col-sm-12","col-md-6"],["for","city",1,"col-sm-6","col-form-label"],[1,"col-sm-6"],["type","text","id","city","formControlName","city",1,"form-control",3,"readonly"],["for","commune",1,"col-sm-3","col-form-label"],["type","text","id","commune","formControlName","commune",1,"form-control",3,"readonly"],["for","profession",1,"col-sm-3","col-form-label"],["type","text","id","profession","formControlName","profession",1,"form-control",3,"readonly"],["for","website",1,"col-sm-3","col-form-label"],["type","text","id","website","formControlName","website",1,"form-control",3,"readonly"],["for","github",1,"col-sm-3","col-form-label"],["type","text","id","github","formControlName","github",1,"form-control",3,"readonly"],["for","instagram",1,"col-sm-3","col-form-label"],["type","text","id","instagram","formControlName","instagram",1,"form-control",3,"readonly"],["for","twitter",1,"col-sm-3","col-form-label"],["type","text","id","twitter","formControlName","twitter",1,"form-control",3,"readonly"],["for","facebook",1,"col-sm-3","col-form-label"],["type","text","id","facebook","formControlName","facebook",1,"form-control",3,"readonly"],["for","bio",1,"col-sm-3","col-form-label"],["rows","4","id","bio","formControlName","bio",1,"form-control",3,"readonly"],[1,"card-footer","py-3"],[1,"wrapp-btn","btn-right"],["type","button",1,"btn","btn-full","m-1",3,"click","ngClass"],["type","submit","class","btn btn-full --success m-1",4,"ngIf"],[1,"text-center","my-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],["type","submit",1,"btn","btn-full","--success","m-1"]],template:function(a,i){if(a&1){let f=C();e(0,"div",1)(1,"div",2),S(2,Q,4,0,"div",3),t()(),e(3,"div",1)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",1)(8,"div",7)(9,"nav",8)(10,"ol",9)(11,"li",10)(12,"a",11),r(13,"Home"),t()(),e(14,"li",12),r(15,"Mi perfil"),t()()()()()()()()(),e(16,"div",1)(17,"div",13)(18,"div",14)(19,"div",15)(20,"div",16),l(21,"img",17),e(22,"input",18,0),b("change",function(g){return c(f),u(i.onFileSelected(g))}),t(),e(24,"button",19),b("click",function(){c(f);let g=_(23);return u(g.click())}),l(25,"i",20),t()(),e(26,"h5",21),r(27),t(),e(28,"p",22)(29,"span",23),r(30),t()(),e(31,"p",24),r(32),t(),e(33,"p",25)(34,"span",26),r(35),t()(),e(36,"div",27)(37,"button",28),r(38,"Follow"),t(),e(39,"button",29),r(40,"Message"),t()()()(),e(41,"div",14)(42,"div",6)(43,"ul",30)(44,"li",31),l(45,"i",32),e(46,"p",33),r(47),t()(),e(48,"li",31),l(49,"i",34),e(50,"p",33),r(51),t()(),e(52,"li",31),l(53,"i",35),e(54,"p",33),r(55),t()(),e(56,"li",31),l(57,"i",36),e(58,"p",33),r(59),t()(),e(60,"li",31),l(61,"i",37),e(62,"p",33),r(63),t()()()()()(),e(64,"div",38)(65,"div",14)(66,"form",39),b("ngSubmit",function(){return c(f),u(i.saveProfile())}),e(67,"div",6)(68,"div",40)(69,"label",41),r(70,"UID"),t(),e(71,"div",42),l(72,"input",43),t()(),e(73,"div",40)(74,"label",44),r(75,"Email"),t(),e(76,"div",42),l(77,"input",45),t()(),e(78,"div",40)(79,"label",46),r(80,"URL foto perfil..."),t(),e(81,"div",42),l(82,"input",47),e(83,"div",48),r(84,"Pega una URL de imagen p\xFAblica (por ejemplo desde "),e(85,"a",49),r(86,"Imgur"),t(),r(87,")"),t()()(),e(88,"div",40)(89,"label",50),r(90,"Nombres"),t(),e(91,"div",42),l(92,"input",51),t()(),e(93,"div",40)(94,"label",52),r(95,"Apellidos"),t(),e(96,"div",42),l(97,"input",53),t()(),e(98,"div",40)(99,"label",54),r(100,"User_name"),t(),e(101,"div",42),l(102,"input",55),t()(),e(103,"div",40)(104,"label",54),r(105,"Username"),t(),e(106,"div",42),l(107,"input",56),t()(),e(108,"div",40)(109,"label",57),r(110,"Tel\xE9fono"),t(),e(111,"div",42),l(112,"input",58),t()(),e(113,"div",40)(114,"label",59),r(115,"Celular"),t(),e(116,"div",42),l(117,"input",60),t()(),e(118,"div",40)(119,"label",61),r(120,"Direcci\xF3n"),t(),e(121,"div",42),l(122,"input",62),t()(),e(123,"div",63)(124,"div",64)(125,"div",40)(126,"label",65),r(127,"Ciudad"),t(),e(128,"div",66),l(129,"input",67),t()()(),e(130,"div",64)(131,"div",40)(132,"label",68),r(133,"Comuna"),t(),e(134,"div",42),l(135,"input",69),t()()()(),e(136,"div",40)(137,"label",70),r(138,"Profesi\xF3n"),t(),e(139,"div",42),l(140,"input",71),t()(),e(141,"div",40)(142,"label",72),r(143,"Sitio Web"),t(),e(144,"div",42),l(145,"input",73),t()(),e(146,"div",40)(147,"label",74),r(148,"GitHub"),t(),e(149,"div",42),l(150,"input",75),t()(),e(151,"div",40)(152,"label",76),r(153,"Instagram"),t(),e(154,"div",42),l(155,"input",77),t()(),e(156,"div",40)(157,"label",78),r(158,"Twitter"),t(),e(159,"div",42),l(160,"input",79),t()(),e(161,"div",40)(162,"label",80),r(163,"Facebook"),t(),e(164,"div",42),l(165,"input",81),t()(),e(166,"div",40)(167,"label",82),r(168,"Biograf\xEDa"),t(),e(169,"div",42),l(170,"textarea",83),t()()(),e(171,"div",84)(172,"div",85)(173,"button",86),b("click",function(){return c(f),u(i.toggleEdit())}),r(174),t(),S(175,X,2,0,"button",87),t()()()()()()}a&2&&(o(2),n("ngIf",i.isLoading),o(10),n("routerLink",U(36,K)),o(9),n("src",(i.perfil==null?null:i.perfil.photoURL)||i.defaultImage,x),o(6),m((i.perfil==null?null:i.perfil.name)+" "+(i.perfil==null?null:i.perfil.last_name)||"N/A"),o(3),m((i.perfil==null?null:i.perfil.profession)||"N/A"),o(2),N("",(i.perfil==null?null:i.perfil.address)||"N/A",", ",(i.perfil==null?null:i.perfil.city)||"N/A"),o(3),E(" ",(i.perfil==null?null:i.perfil.uid)||"N/A"," "),o(12),m((i.perfil==null?null:i.perfil.website)||"N/A"),o(4),m((i.perfil==null?null:i.perfil.github)||"N/A"),o(4),m((i.perfil==null?null:i.perfil.twitter)||"N/A"),o(4),m((i.perfil==null?null:i.perfil.instagram)||"N/A"),o(4),m((i.perfil==null?null:i.perfil.facebook)||"N/A"),o(3),n("formGroup",i.profileUserForm),o(6),n("readonly",!i.editMode),o(5),n("readonly",!i.editMode),o(5),n("readonly",!i.editMode),o(10),n("readonly",!i.editMode),o(5),n("readonly",!i.editMode),o(5),n("readonly",!i.editMode),o(5),n("readonly",!i.editMode),o(5),n("readonly",!i.editMode),o(5),n("readonly",!i.editMode),o(5),n("readonly",!i.editMode),o(7),n("readonly",!i.editMode),o(6),n("readonly",!i.editMode),o(5),n("readonly",!i.editMode),o(5),n("readonly",!i.editMode),o(5),n("readonly",!i.editMode),o(5),n("readonly",!i.editMode),o(5),n("readonly",!i.editMode),o(5),n("readonly",!i.editMode),o(5),n("readonly",!i.editMode),o(3),n("ngClass",i.editMode?"--danger":"--primary"),o(),E(" ",i.editMode?"Cancelar edici\xF3n":"Editar perfil"," "),o(),n("ngIf",i.editMode))},dependencies:[F,M,k,H,T,R,j,G,J,B,O,A,V],styles:['@charset "UTF-8";']})};export{q as ProfileViewComponent};
