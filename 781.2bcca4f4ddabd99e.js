"use strict";(self.webpackChunkclaims_app=self.webpackChunkclaims_app||[]).push([[781],{2781:(z,g,c)=>{c.r(g),c.d(g,{ClaimsRouterComponent:()=>H});var d=c(2881),r=c(4341),e=c(1360),m=c(9967),u=c(3273),C=c(8455),f=c(5558),_=c(6354),b=c(4796),p=c(9885);let j=(()=>{class l{firestore;authService;userService;constructor(t,i,n){this.firestore=t,this.authService=i,this.userService=n,console.log("%c<<< Start CLAIMS service >>>","background: #fff3cd; color: #664d03; padding: 2px 5px;")}createClaim(t,i){const n=i.id||(0,m.H9)((0,u.rJ)(this.firestore,`users/${t}/claims`)).id,o=(0,m.H9)(this.firestore,`users/${t}/claims/${n}`);return(0,m.BN)(o,{...i,id:n})}updateClaim(t,i){const n=(0,m.H9)(this.firestore,`users/${t}/claims/${i.id}`);return(0,m.mZ)(n,{...i})}deleteClaim(t,i){const n=(0,m.H9)(this.firestore,`users/${t}/claims/${i}`);return(0,m.kd)(n)}getUserClaims(t){const i=(0,m.rJ)(this.firestore,`users/${t}/claims`);return(0,m.xs)(i,{idField:"id"})}getAllClaims(){const t=(0,m.rJ)(this.firestore,"users");return console.log("\u{1f50d} Buscando todos los reclamos de todos los ejecutivos...",t),(0,C.H)((0,u.GG)(t)).pipe((0,f.n)(i=>{const n=i.docs.map(o=>{const a=o.id,O=(0,m.rJ)(this.firestore,`users/${a}/claims`);return(0,u.GG)(O).then(L=>L.docs.map(J=>({...J.data(),uidEjecutivo:a})))});return(0,C.H)(Promise.all(n))}),(0,_.T)(i=>i.flat()))}static \u0275fac=function(i){return new(i||l)(e.KVO(m._7),e.KVO(b.u),e.KVO(p.D))};static \u0275prov=e.jDH({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})();var v=c(7643);let h=(()=>{class l{http;jsonUrl="assets/data/claims-expanded.json";constructor(t){this.http=t,console.log("%c<<< Start CLAIMS DUMMY service >>>","background: #fff3cd; color: #664d03; padding: 2px 5px;")}getClaimsByUser(t){return this.http.get(this.jsonUrl).pipe((0,_.T)(i=>i.users[t]?.claims||[]))}getAllClaims(){return this.http.get(this.jsonUrl).pipe((0,_.T)(t=>Object.values(t.users).flatMap(o=>o.claims||[])))}static \u0275fac=function(i){return new(i||l)(e.KVO(v.Qq))};static \u0275prov=e.jDH({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})();var k=c(9332),F=c(7759);const E=()=>[],M=(l,s,t,i,n)=>({"bg-primary":l,"bg-warning text-dark":s,"bg-danger":t,"bg-success":i,"bg-secondary":n});function R(l,s){1&l&&(e.j41(0,"div",32)(1,"div",33)(2,"span",34),e.EFF(3,"Loading..."),e.k0s()()())}function w(l,s){if(1&l&&(e.j41(0,"option",35),e.EFF(1),e.k0s()),2&l){const t=s.$implicit;e.Y8G("value",t),e.R7$(),e.JRh(t)}}function x(l,s){if(1&l&&(e.j41(0,"option",35),e.EFF(1),e.k0s()),2&l){const t=s.$implicit;e.Y8G("value",t),e.R7$(),e.JRh(t)}}function I(l,s){if(1&l){const t=e.RV6();e.j41(0,"tr")(1,"td",23)(2,"input",24),e.mxI("ngModelChange",function(n){const o=e.eBV(t).$implicit;return e.DH7(o.selected,n)||(o.selected=n),e.Njj(n)}),e.bIt("change",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.checkMasterState())}),e.k0s()(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td")(10,"span",36),e.EFF(11),e.k0s()(),e.j41(12,"td"),e.EFF(13),e.k0s(),e.j41(14,"td")(15,"button",37),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.editItem(n))}),e.nrm(16,"i",38),e.k0s(),e.j41(17,"button",39),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.editItem(n))}),e.nrm(18,"i",40),e.k0s(),e.j41(19,"button",41),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.deleteItem(n))}),e.nrm(20,"i",14),e.k0s(),e.j41(21,"button",42),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.assignToExecutive(n))}),e.nrm(22,"i",43),e.k0s(),e.j41(23,"button",44),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.infoRow(n))}),e.nrm(24,"i",45),e.k0s()()()}if(2&l){const t=s.$implicit,i=e.XpG();e.R7$(2),e.R50("ngModel",t.selected),e.R7$(2),e.JRh(t.nombre),e.R7$(2),e.JRh(t.tipo),e.R7$(2),e.JRh(t.fecha),e.R7$(2),e.Y8G("ngClass",e.s1E(7,M,"Iniciado"===t.estado,"Pendiente"===t.estado,"Cancelado"===t.estado,"Cerrado"===t.estado,"Iniciado"!==t.estado&&"Cerrado"!==t.estado&&"Pendiente"!==t.estado&&"Cancelado"!==t.estado)),e.R7$(),e.SpI(" ",t.estado," "),e.R7$(2),e.SpI(" ",i.getExecutiveName(t.uidEjecutivo||"")," ")}}function A(l,s){if(1&l){const t=e.RV6();e.j41(0,"li",28)(1,"button",29),e.bIt("click",function(){const n=e.eBV(t).index,o=e.XpG();return e.Njj(o.changePage(n+1))}),e.EFF(2),e.k0s()()}if(2&l){const t=s.index,i=e.XpG();e.AVh("active",i.currentPage===t+1),e.R7$(2),e.JRh(t+1)}}function T(l,s){if(1&l){const t=e.RV6();e.j41(0,"form",57)(1,"div",58)(2,"label",59),e.EFF(3,"Nombre del Cliente"),e.k0s(),e.j41(4,"input",60),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.newClaim.nombre,n)||(o.newClaim.nombre=n),e.Njj(n)}),e.k0s()(),e.j41(5,"div",58)(6,"label",59),e.EFF(7,"Tipo de Reclamo"),e.k0s(),e.j41(8,"input",61),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.newClaim.tipo,n)||(o.newClaim.tipo=n),e.Njj(n)}),e.k0s()(),e.j41(9,"div",58)(10,"label",59),e.EFF(11,"Foto (URL)"),e.k0s(),e.j41(12,"input",62),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.newClaim.foto,n)||(o.newClaim.foto=n),e.Njj(n)}),e.k0s()(),e.j41(13,"div",63)(14,"label",59),e.EFF(15,"Casos Totales"),e.k0s(),e.j41(16,"input",64),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.newClaim.total,n)||(o.newClaim.total=n),e.Njj(n)}),e.k0s()(),e.j41(17,"div",63)(18,"label",59),e.EFF(19,"Fecha"),e.k0s(),e.j41(20,"input",65),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.newClaim.fecha,n)||(o.newClaim.fecha=n),e.Njj(n)}),e.k0s()(),e.j41(21,"div",58)(22,"label",59),e.EFF(23,"Estado"),e.k0s(),e.j41(24,"select",66),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.newClaim.estado,n)||(o.newClaim.estado=n),e.Njj(n)}),e.j41(25,"option",67),e.EFF(26,"Pendiente"),e.k0s(),e.j41(27,"option",68),e.EFF(28,"Cancelado"),e.k0s(),e.j41(29,"option",69),e.EFF(30,"Cerrado"),e.k0s()()()()}if(2&l){const t=e.XpG(2);e.R7$(4),e.R50("ngModel",t.newClaim.nombre),e.R7$(4),e.R50("ngModel",t.newClaim.tipo),e.R7$(4),e.R50("ngModel",t.newClaim.foto),e.R7$(4),e.R50("ngModel",t.newClaim.total),e.R7$(4),e.R50("ngModel",t.newClaim.fecha),e.R7$(4),e.R50("ngModel",t.newClaim.estado)}}function N(l,s){if(1&l){const t=e.RV6();e.j41(0,"div",46)(1,"div",47)(2,"div",48)(3,"div",49)(4,"h5",50),e.EFF(5,"Agregar Nuevo Reclamo"),e.k0s(),e.j41(6,"button",51),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.cancelNewClaim())}),e.k0s()(),e.j41(7,"div",52),e.DNE(8,T,31,6,"form",53),e.k0s(),e.j41(9,"div",54)(10,"button",55),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.cancelNewClaim())}),e.EFF(11,"Cancelar"),e.k0s(),e.j41(12,"button",56),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.saveNewClaim())}),e.EFF(13,"Guardar Reclamo"),e.k0s()()()()()}if(2&l){const t=e.XpG();e.R7$(8),e.Y8G("ngIf",t.newClaim)}}function G(l,s){if(1&l&&(e.j41(0,"option",82),e.EFF(1),e.k0s()),2&l){const t=s.$implicit;e.Y8G("ngValue",t.uid),e.R7$(),e.SpI(" ",t.name||t.email," ")}}function V(l,s){if(1&l){const t=e.RV6();e.j41(0,"form",57)(1,"div",58)(2,"label",59),e.EFF(3,"Nombre"),e.k0s(),e.j41(4,"input",72),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.selectedClaim.nombre,n)||(o.selectedClaim.nombre=n),e.Njj(n)}),e.k0s()(),e.j41(5,"div",58)(6,"label",59),e.EFF(7,"Asunto"),e.k0s(),e.j41(8,"input",73),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.selectedClaim.tipo,n)||(o.selectedClaim.tipo=n),e.Njj(n)}),e.k0s()(),e.j41(9,"div",20)(10,"label",59),e.EFF(11,"Descripci\xf3n"),e.k0s(),e.j41(12,"textarea",74),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.selectedClaim.detail,n)||(o.selectedClaim.detail=n),e.Njj(n)}),e.k0s()(),e.j41(13,"div",58)(14,"label",59),e.EFF(15,"Estado"),e.k0s(),e.j41(16,"select",75),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.selectedClaim.estado,n)||(o.selectedClaim.estado=n),e.Njj(n)}),e.j41(17,"option",76),e.EFF(18,"Iniciado"),e.k0s(),e.j41(19,"option",67),e.EFF(20,"Pendiente"),e.k0s(),e.j41(21,"option",68),e.EFF(22,"Cancelado"),e.k0s(),e.j41(23,"option",69),e.EFF(24,"Cerrado"),e.k0s()()(),e.j41(25,"div",58)(26,"label",59),e.EFF(27,"Fecha"),e.k0s(),e.j41(28,"input",77),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.selectedClaim.fecha,n)||(o.selectedClaim.fecha=n),e.Njj(n)}),e.k0s()(),e.j41(29,"div",78)(30,"label",59),e.EFF(31,"Ejecutivo asignado"),e.k0s(),e.j41(32,"select",79),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.selectedClaim.uidEjecutivo,n)||(o.selectedClaim.uidEjecutivo=n),e.Njj(n)}),e.j41(33,"option",80),e.EFF(34,"Selecciona un ejecutivo"),e.k0s(),e.DNE(35,G,2,2,"option",81),e.k0s()()()}if(2&l){const t=e.XpG(2);e.R7$(4),e.R50("ngModel",t.selectedClaim.nombre),e.Y8G("disabled",t.isViewOnly),e.R7$(4),e.R50("ngModel",t.selectedClaim.tipo),e.Y8G("disabled",t.isViewOnly),e.R7$(4),e.R50("ngModel",t.selectedClaim.detail),e.Y8G("disabled",t.isViewOnly),e.R7$(4),e.R50("ngModel",t.selectedClaim.estado),e.Y8G("disabled",t.isViewOnly),e.R7$(12),e.R50("ngModel",t.selectedClaim.fecha),e.Y8G("disabled",t.isViewOnly),e.R7$(4),e.R50("ngModel",t.selectedClaim.uidEjecutivo),e.R7$(),e.Y8G("ngValue",""),e.R7$(2),e.Y8G("ngForOf",t.executives)}}function y(l,s){if(1&l){const t=e.RV6();e.j41(0,"button",83),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.enableEditing())}),e.EFF(1," Editar "),e.k0s()}}function D(l,s){if(1&l){const t=e.RV6();e.j41(0,"button",56),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.saveChanges())}),e.EFF(1," Guardar Cambios "),e.k0s()}}function S(l,s){if(1&l){const t=e.RV6();e.j41(0,"div",46)(1,"div",47)(2,"div",48)(3,"div",49)(4,"h5",50),e.EFF(5,"Detalle de Reclamo 33"),e.k0s(),e.j41(6,"button",51),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.cancelEdit())}),e.k0s()(),e.j41(7,"div",52),e.DNE(8,V,36,13,"form",53),e.k0s(),e.j41(9,"div",54)(10,"button",55),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.cancelEdit())}),e.EFF(11,"Cerrar"),e.k0s(),e.DNE(12,y,2,0,"button",70)(13,D,2,0,"button",71),e.k0s()()()()}if(2&l){const t=e.XpG();e.R7$(8),e.Y8G("ngIf",t.selectedClaim),e.R7$(4),e.Y8G("ngIf",t.isViewOnly),e.R7$(),e.Y8G("ngIf",!t.isViewOnly)}}function X(l,s){if(1&l&&(e.j41(0,"option",35),e.EFF(1),e.k0s()),2&l){const t=s.$implicit;e.Y8G("value",t.uid),e.R7$(),e.Lme(" ",t.name+" "+t.last_name," - ",t.email," ")}}function B(l,s){if(1&l){const t=e.RV6();e.j41(0,"div",46)(1,"div",47)(2,"div",48)(3,"div",49)(4,"h5",50),e.EFF(5,"Nuevo Reclamo..."),e.k0s(),e.j41(6,"button",51),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.showNewModal=!1)}),e.k0s()(),e.j41(7,"div",52)(8,"form",57)(9,"div",58)(10,"label",59),e.EFF(11,"Nombre"),e.k0s(),e.j41(12,"input",84),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.newClaim.nombre,n)||(o.newClaim.nombre=n),e.Njj(n)}),e.k0s()(),e.j41(13,"div",58)(14,"label",59),e.EFF(15,"Asunto"),e.k0s(),e.j41(16,"input",85),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.newClaim.tipo,n)||(o.newClaim.tipo=n),e.Njj(n)}),e.k0s()(),e.j41(17,"div",20)(18,"label",59),e.EFF(19,"Descripci\xf3n"),e.k0s(),e.j41(20,"textarea",86),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.newClaim.detail,n)||(o.newClaim.detail=n),e.Njj(n)}),e.k0s()(),e.j41(21,"div",58)(22,"label",59),e.EFF(23,"Fecha"),e.k0s(),e.j41(24,"input",87),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.newClaim.fecha,n)||(o.newClaim.fecha=n),e.Njj(n)}),e.k0s()(),e.j41(25,"div",78)(26,"label",59),e.EFF(27,"Asignar a Ejecutivo"),e.k0s(),e.j41(28,"select",88),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.selectedExecutiveUid,n)||(o.selectedExecutiveUid=n),e.Njj(n)}),e.j41(29,"option",80),e.EFF(30,"Selecciona un ejecutivo"),e.k0s(),e.DNE(31,X,2,3,"option",18),e.k0s()()()(),e.j41(32,"div",54)(33,"button",55),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.showNewModal=!1)}),e.EFF(34,"Cancelar"),e.k0s(),e.j41(35,"button",89),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.saveNewClaim())}),e.EFF(36,"Crear Reclamo"),e.k0s()()()()()}if(2&l){const t=e.XpG();e.R7$(12),e.R50("ngModel",t.newClaim.nombre),e.R7$(4),e.R50("ngModel",t.newClaim.tipo),e.R7$(4),e.R50("ngModel",t.newClaim.detail),e.R7$(4),e.R50("ngModel",t.newClaim.fecha),e.R7$(4),e.R50("ngModel",t.selectedExecutiveUid),e.R7$(),e.Y8G("ngValue",""),e.R7$(2),e.Y8G("ngForOf",t.executives)}}let U=(()=>{class l{claimsService;claimsDummyService;userService;alert;mockData;reclamos=[];uid="";isLoading=!0;ejecutivos=[];selectedStatus="";selectedChannel="";currentPage=1;itemsPerPage=6;masterChecked=!1;isViewOnly=!0;selectedClaim=null;showModal=!1;showNewModal=!1;newClaim=this.getEmptyClaim();executives=[];selectedExecutiveUid="";estadosDisponibles=["Pendiente","En Proceso","Resuelto","Cancelado","Cerrado"];canalesDisponibles=["Web","App","WhatsApp","Call Center"];searchTerm="";filterEstado="";filterCanal="";constructor(t,i,n,o,a){this.claimsService=t,this.claimsDummyService=i,this.userService=n,this.alert=o,this.mockData=a}ngOnInit(){this.userService.getCurrentUserUid().subscribe(t=>{t&&(this.uid=t,this.loadClaims())}),this.userService.getExecutives().subscribe({next:t=>{this.executives=t,console.log("\u{1f465} Ejecutivos:",t)},error:t=>{console.error("\u274c Error al cargar ejecutivos:",t)}})}loadClaims(){this.isLoading=!0,this.claimsDummyService.getClaimsByUser(this.uid).subscribe(t=>{this.claimsService.getAllClaims().subscribe(i=>{this.reclamos=[...t,...i].map(n=>({...n,selected:!1})),this.applyFilters(),this.isLoading=!1})})}get paginatedReclamos(){const t=this.reclamos.filter(n=>(!this.searchTerm||n.nombre.toLowerCase().includes(this.searchTerm.toLowerCase()))&&(!this.filterEstado||n.estado===this.filterEstado)&&(!this.filterCanal||n.tipo===this.filterCanal)),i=(this.currentPage-1)*this.itemsPerPage;return t.slice(i,i+this.itemsPerPage)}applyFilters(){}toggleAll(){this.paginatedReclamos.forEach(t=>t.selected=this.masterChecked)}checkMasterState(){this.masterChecked=this.paginatedReclamos.every(t=>t.selected)}hasSelected(){return this.reclamos.some(t=>t.selected)}selectedCount(){return this.reclamos.filter(t=>t.selected).length}deleteSelected(){this.reclamos=this.reclamos.filter(t=>!t.selected),this.masterChecked=!1,this.alert.info("Reclamos eliminados correctamente")}deleteItem(t){this.reclamos=this.reclamos.filter(i=>i.id!==t.id),this.alert.success("Reclamo eliminado")}editItem(t){this.selectedClaim={...t},this.isViewOnly=!0,this.showModal=!0}enableEditing(){this.isViewOnly=!1}cancelEdit(){this.selectedClaim=null,this.showModal=!1}saveChanges(){if(!this.selectedClaim?.nombre||!this.selectedClaim?.tipo||!this.selectedClaim?.estado)return void this.alert.warning("Completa los campos requeridos");const t=this.reclamos.findIndex(i=>i.id===this.selectedClaim.id);-1!==t&&(this.reclamos[t]={...this.selectedClaim,selected:!1},this.alert.success("Reclamo actualizado")),this.cancelEdit()}assignToExecutive(t){console.log("Asignar reclamo:",t),this.alert.info("Funci\xf3n para asignar a ejecutivo a\xfan no implementada")}get totalPages(){const t=this.reclamos.filter(i=>(!this.searchTerm||i.nombre.toLowerCase().includes(this.searchTerm.toLowerCase()))&&(!this.filterEstado||i.estado===this.filterEstado)&&(!this.filterCanal||i.tipo===this.filterCanal));return Math.ceil(t.length/this.itemsPerPage)}changePage(t){t>=1&&t<=this.totalPages&&(this.currentPage=t)}openNewModal(){this.newClaim=this.getEmptyClaim(),this.selectedExecutiveUid="",this.showNewModal=!0}cancelNewClaim(){this.newClaim=this.getEmptyClaim(),this.showNewModal=!1}saveNewClaim(){if(!(this.newClaim.nombre&&this.newClaim.tipo&&this.newClaim.estado&&this.selectedExecutiveUid))return void this.alert.warning("Completa todos los campos, incluyendo el ejecutivo asignado.");const t={...this.newClaim,id:this.mockData.generateUUID(),uidEjecutivo:this.selectedExecutiveUid,selected:!1};this.claimsService.createClaim(this.selectedExecutiveUid,t).then(()=>{this.loadClaims(),this.alert.success("Nuevo reclamo asignado con \xe9xito."),this.showNewModal=!1}).catch(i=>{console.error("\u274c Error al crear reclamo:",i),this.alert.error("Ocurri\xf3 un error al crear el reclamo.")})}resetNewClaim(){this.newClaim=this.getEmptyClaim(),this.selectedExecutiveUid=""}getEmptyClaim(){return{id:"",nombre:"",tipo:"",estado:"Pendiente",fecha:(new Date).toISOString().split("T")[0],foto:"",total:0,uidEjecutivo:"",selected:!1}}generateUUID(){return crypto.randomUUID()}saveToLocal(){localStorage.setItem("claims",JSON.stringify(this.reclamos))}resetData(){localStorage.removeItem("claims"),this.currentPage=1,this.ngOnInit(),this.alert.showToastInfo("Datos restaurados a valores por defecto","Informaci\xf3n")}infoRow(t){console.log("Informaci\xf3n del button:",t)}getExecutiveName(t){const i=this.executives.find(n=>n.uid===t);return i?`${i.name} (${i.email})`:"No asignado"}static \u0275fac=function(i){return new(i||l)(e.rXU(j),e.rXU(h),e.rXU(p.D),e.rXU(k.u),e.rXU(F.I))};static \u0275cmp=e.VBU({type:l,selectors:[["app-admin-claims"]],decls:72,vars:20,consts:[[1,"row"],[1,"col-12","border-2"],[1,"card"],[1,"card-body"],["class","d-flex justify-content-center align-items-center","style","height: 200px;",4,"ngIf"],[1,"col-6"],[1,"h3","mb-3"],[1,"mb-0"],[1,"col-6","text-end"],[1,"btn","btn-full","--primary","m-1","btn-sm",3,"click"],[1,"bi","bi-plus-circle","me-1"],[1,"btn","btn-full","--secondary","m-1","btn-sm",3,"click"],[1,"bi","bi-arrow-clockwise"],[1,"btn","btn-full","--danger","m-1","btn-sm",3,"click","disabled"],[1,"bi","bi-trash"],["for","filterStatus",1,"form-label"],[1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","filterChannel",1,"form-label"],[1,"col-12"],[1,"table-responsive"],[1,"table","table-light","table-hover","align-middle"],[1,"text-center"],["type","checkbox",3,"ngModelChange","change","ngModel"],[4,"ngFor","ngForOf"],[1,"col-6","text-start"],[1,"pagination","pagination-sm","mb-0"],[1,"page-item"],[1,"page-link",3,"click"],["class","page-item",3,"active",4,"ngFor","ngForOf"],["class","modal fade show d-block","style","background-color: rgba(0,0,0,0.4); z-index: 1050;",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center",2,"height","200px"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[3,"value"],[1,"badge",3,"ngClass"],[1,"btn","btn-sm","btn-info","me-1",3,"click"],[1,"bi","bi-eye"],[1,"btn","btn-sm","btn-warning","me-1",3,"click"],[1,"bi","bi-pencil"],[1,"btn","btn-sm","btn-danger","me-1",3,"click"],[1,"btn","btn-sm","btn-success","me-1",3,"click"],[1,"bi","bi-person-check"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"bi","bi-info-circle-fill"],[1,"modal","fade","show","d-block",2,"background-color","rgba(0,0,0,0.4)","z-index","1050"],[1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content","rounded","shadow-lg"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],["class","row g-3",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"row","g-3"],[1,"col-md-6"],[1,"form-label"],["name","nombre","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","tipo",1,"form-control",3,"ngModelChange","ngModel"],["name","foto",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-3"],["type","number","name","total",1,"form-control",3,"ngModelChange","ngModel"],["type","date","name","fecha",1,"form-control",3,"ngModelChange","ngModel"],["name","estado",1,"form-select",3,"ngModelChange","ngModel"],["value","Pendiente"],["value","Cancelado"],["value","Cerrado"],["class","btn btn-warning",3,"click",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],["name","nombre",1,"form-control",3,"ngModelChange","ngModel","disabled"],["name","tipo",1,"form-control",3,"ngModelChange","ngModel","disabled"],["name","detail","rows","3",1,"form-control",3,"ngModelChange","ngModel","disabled"],["name","estado",1,"form-select",3,"ngModelChange","ngModel","disabled"],["value","Iniciado"],["name","fecha","type","date",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"col-md-12"],["name","ejecutivo",1,"form-select",3,"ngModelChange","ngModel"],["disabled","","selected","",3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"btn","btn-warning",3,"click"],["name","newNombre","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","newTipo",1,"form-control",3,"ngModelChange","ngModel"],["name","newDetail","rows","3",1,"form-control",3,"ngModelChange","ngModel"],["name","newFecha","type","date",1,"form-control",3,"ngModelChange","ngModel"],["name","ejecutivo","required","",1,"form-select",3,"ngModelChange","ngModel"],[1,"btn","btn-success",3,"click"]],template:function(i,n){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.DNE(4,R,4,0,"div",4),e.j41(5,"div",0)(6,"div",5)(7,"h2",6),e.EFF(8,"Administraci\xf3n de Reclamaciones"),e.k0s(),e.j41(9,"p",7),e.EFF(10,"Aqu\xed puedes gestionar todas las reclamaciones de los usuarios."),e.k0s()(),e.j41(11,"div",8)(12,"button",9),e.bIt("click",function(){return n.openNewModal()}),e.nrm(13,"i",10),e.EFF(14," Nuevo Reclamo "),e.k0s(),e.j41(15,"button",11),e.bIt("click",function(){return n.resetData()}),e.nrm(16,"i",12),e.EFF(17," Restaurar datos originales "),e.k0s(),e.j41(18,"button",13),e.bIt("click",function(){return n.deleteSelected()}),e.nrm(19,"i",14),e.EFF(20),e.k0s()(),e.j41(21,"div",5)(22,"label",15),e.EFF(23,"Filtrar por Estado"),e.k0s(),e.j41(24,"select",16),e.mxI("ngModelChange",function(a){return e.DH7(n.selectedStatus,a)||(n.selectedStatus=a),a}),e.bIt("change",function(){return n.applyFilters()}),e.j41(25,"option",17),e.EFF(26,"Todos"),e.k0s(),e.DNE(27,w,2,2,"option",18),e.k0s()(),e.j41(28,"div",5)(29,"label",19),e.EFF(30,"Filtrar por Canal"),e.k0s(),e.j41(31,"select",16),e.mxI("ngModelChange",function(a){return e.DH7(n.selectedChannel,a)||(n.selectedChannel=a),a}),e.bIt("change",function(){return n.applyFilters()}),e.j41(32,"option",17),e.EFF(33,"Todos"),e.k0s(),e.DNE(34,x,2,2,"option",18),e.k0s()(),e.j41(35,"div",20)(36,"div",21)(37,"table",22)(38,"thead")(39,"tr")(40,"th",23)(41,"input",24),e.mxI("ngModelChange",function(a){return e.DH7(n.masterChecked,a)||(n.masterChecked=a),a}),e.bIt("change",function(){return n.toggleAll()}),e.k0s()(),e.j41(42,"th"),e.EFF(43,"Nombre"),e.k0s(),e.j41(44,"th"),e.EFF(45,"Tipo"),e.k0s(),e.j41(46,"th"),e.EFF(47,"Fecha"),e.k0s(),e.j41(48,"th"),e.EFF(49,"Estado"),e.k0s(),e.j41(50,"th"),e.EFF(51,"Asignado a"),e.k0s(),e.j41(52,"th"),e.EFF(53,"Acciones"),e.k0s()()(),e.j41(54,"tbody"),e.DNE(55,I,25,13,"tr",25),e.k0s()()()(),e.j41(56,"div",26)(57,"small"),e.EFF(58),e.k0s()(),e.j41(59,"div",8)(60,"nav")(61,"ul",27)(62,"li",28)(63,"button",29),e.bIt("click",function(){return n.changePage(n.currentPage-1)}),e.EFF(64,"Anterior"),e.k0s()(),e.DNE(65,A,3,3,"li",30),e.j41(66,"li",28)(67,"button",29),e.bIt("click",function(){return n.changePage(n.currentPage+1)}),e.EFF(68,"Siguiente"),e.k0s()()()()()()()()()(),e.DNE(69,N,14,1,"div",31)(70,S,14,3,"div",31)(71,B,37,7,"div",31)),2&i&&(e.R7$(4),e.Y8G("ngIf",n.isLoading),e.R7$(14),e.Y8G("disabled",!n.hasSelected()),e.R7$(2),e.SpI(" Eliminar seleccionados (",n.selectedCount(),") "),e.R7$(4),e.R50("ngModel",n.selectedStatus),e.R7$(3),e.Y8G("ngForOf",n.estadosDisponibles),e.R7$(4),e.R50("ngModel",n.selectedChannel),e.R7$(3),e.Y8G("ngForOf",n.canalesDisponibles),e.R7$(7),e.R50("ngModel",n.masterChecked),e.R7$(14),e.Y8G("ngForOf",n.paginatedReclamos),e.R7$(3),e.Lme("P\xe1gina ",n.currentPage," de ",n.totalPages,""),e.R7$(4),e.AVh("disabled",1===n.currentPage),e.R7$(3),e.Y8G("ngForOf",e.lJ4(19,E).constructor(n.totalPages)),e.R7$(),e.AVh("disabled",n.currentPage===n.totalPages),e.R7$(3),e.Y8G("ngIf",n.showNewModal),e.R7$(),e.Y8G("ngIf",n.showModal),e.R7$(),e.Y8G("ngIf",n.showNewModal))},dependencies:[d.MD,d.YU,d.Sq,d.bT,r.YN,r.qT,r.xH,r.y7,r.me,r.Q0,r.Zm,r.wz,r.BC,r.cb,r.YS,r.vS,r.cV],encapsulation:2})}return l})(),P=(()=>{class l{static \u0275fac=function(i){return new(i||l)};static \u0275cmp=e.VBU({type:l,selectors:[["app-executive-claims"]],decls:2,vars:0,template:function(i,n){1&i&&(e.j41(0,"p"),e.EFF(1,"executive-claims works!"),e.k0s())},encapsulation:2})}return l})();function $(l,s){1&l&&(e.j41(0,"app-admin-claims")(1,"h2"),e.EFF(2,"Admin Claims"),e.k0s(),e.j41(3,"p"),e.EFF(4,"Here you can manage admin claims."),e.k0s()())}function Y(l,s){1&l&&(e.j41(0,"app-executive-claims")(1,"h2"),e.EFF(2,"Executive Claims"),e.k0s(),e.j41(3,"p"),e.EFF(4,"Here you can manage executive claims."),e.k0s()())}let H=(()=>{class l{userService;claimsDummyService;role=null;showAdmin=!1;showExecutive=!1;constructor(t,i){this.userService=t,this.claimsDummyService=i}ngOnInit(){this.userService.getCurrentUserRole().subscribe(t=>{console.log("\u{1f9ea} Rol recibido desde el servicio:",t),this.role=t,"Administrador"===t?this.showAdmin=!0:"Ejecutivo"===t?this.showExecutive=!0:console.warn("\u26a0\ufe0f Rol no reconocido:",t)}),this.claimsDummyService.getAllClaims().subscribe(t=>{console.log("\u{1f4c4} Reclamos de todos los usuarios:",t)}),this.claimsDummyService.getClaimsByUser("0FnJKfeUI2T73kBGO5GCdlpUs6W2").subscribe({next:t=>{console.log("\u{1f4c4} Reclamos del usuario:",t)},error:t=>{console.error("\u274c Error al obtener los reclamos:",t)}})}static \u0275fac=function(i){return new(i||l)(e.rXU(p.D),e.rXU(h))};static \u0275cmp=e.VBU({type:l,selectors:[["app-claims-router"]],decls:4,vars:2,consts:[[1,"badge","badge-full-primary"],[4,"ngIf"]],template:function(i,n){1&i&&(e.j41(0,"span",0),e.EFF(1,"claims-router works!"),e.k0s(),e.DNE(2,$,5,0,"app-admin-claims",1)(3,Y,5,0,"app-executive-claims",1)),2&i&&(e.R7$(2),e.Y8G("ngIf",n.showAdmin),e.R7$(),e.Y8G("ngIf",n.showExecutive))},dependencies:[d.MD,d.bT,U,P],encapsulation:2})}return l})()}}]);