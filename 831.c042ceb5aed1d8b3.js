"use strict";(self.webpackChunkclaims_app=self.webpackChunkclaims_app||[]).push([[831],{6831:(f,m,a)=>{a.r(m),a.d(m,{AdminUserManagementComponent:()=>E});var i=a(2881),o=a(4341),u=a(5207),e=a(1360),g=a(9885);const b=()=>["/dashboard","analytics"],p=()=>["/dashboard","admin-users"],_=(t,l,s)=>({"bg-success":t,"bg-warning text-dark":l,"bg-danger":s}),h=t=>["/dashboard/edit-role",t];function F(t,l){1&t&&(e.j41(0,"div",19)(1,"div",20)(2,"span",21),e.EFF(3,"Cargando..."),e.k0s()()())}function v(t,l){if(1&t){const s=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"span",22),e.EFF(9),e.k0s()(),e.j41(10,"td")(11,"span",22),e.EFF(12),e.k0s()(),e.j41(13,"td",23)(14,"button",24),e.bIt("click",function(){const n=e.eBV(s).$implicit,d=e.XpG();return e.Njj(d.toggleUser(n.uid,!n.activo))}),e.EFF(15),e.k0s(),e.j41(16,"a",25),e.EFF(17," Editar Rol "),e.k0s()()()}if(2&t){const s=l.$implicit;e.R7$(2),e.JRh(s.uid.slice(-6).toUpperCase()),e.R7$(2),e.Lme("",s.name," ",s.last_name,""),e.R7$(2),e.JRh(s.email),e.R7$(2),e.Y8G("ngClass",s.activo?"bg-success":"bg-danger"),e.R7$(),e.SpI(" ",s.activo?"Habilitado":"Deshabilitado"," "),e.R7$(2),e.Y8G("ngClass",e.sMw(13,_,"Administrador"===s.rol,"Ejecutivo"===s.rol,!s.rol||""===s.rol)),e.R7$(),e.SpI(" ",s.rol||"Sin rol"," "),e.R7$(2),e.ZvI("btn btn-sm btn-outline-",s.activo?"danger":"success",""),e.R7$(),e.SpI(" ",s.activo?"Deshabilitar":"Habilitar"," "),e.R7$(),e.Y8G("routerLink",e.eq3(17,h,s.uid))}}let E=(()=>{class t{userService;users=[];filteredUsers=[];searchTerm="";loading=!0;isSaving=!1;isLoading=!0;constructor(s){this.userService=s}ngOnInit(){this.loadUsers()}loadUsers(){this.userService.getAllUsers().subscribe(s=>{this.users=s,this.filteredUsers=s,this.isLoading=!1})}filterUsers(){const s=this.searchTerm.toLowerCase();this.filteredUsers=this.users.filter(r=>r.name?.toLowerCase().includes(s)||r.email?.toLowerCase().includes(s))}toggleUserStatus(s){const r=!s.activo;this.userService.toggleUserStatus(s.uid,r).then(()=>{s.activo=r})}toggleUser(s,r){this.userService.toggleUserStatus(s,r).then(()=>{})}static \u0275fac=function(r){return new(r||t)(e.rXU(g.D))};static \u0275cmp=e.VBU({type:t,selectors:[["app-admin-user-management"]],decls:48,vars:7,consts:[[1,"row","mb-3"],[1,"col-12","text-start"],[1,"card"],[1,"card-body"],[1,"mb-3"],[1,"bi","bi-people-fill"],["aria-label","breadcrumb",1,"bg-body-tertiary","rounded-3","p-3","mb-4"],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item"],[3,"routerLink"],[1,"row"],[1,"col"],["class","text-center ",4,"ngIf"],[1,"col-12","mb-3"],["for","search-term",1,"form-label"],["id","search-term","type","text","placeholder","Ingresa aqui nombre de usuario",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"co-12"],[1,"table","table-light","table-hover","align-middle","mb-0"],[4,"ngFor","ngForOf"],[1,"text-center"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"badge",3,"ngClass"],[1,"d-flex","gap-2"],[3,"click"],[1,"btn","btn-sm","btn-outline-primary",3,"routerLink"]],template:function(r,n){1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),e.nrm(5,"i",5),e.EFF(6," Administraci\xf3n de Roles"),e.k0s(),e.j41(7,"p"),e.EFF(8,"Desde esta secci\xf3n podr\xe1s buscar a los usuarios y gestionar sus accesos."),e.k0s(),e.j41(9,"nav",6)(10,"ol",7)(11,"li",8)(12,"a",9),e.EFF(13,"Home"),e.k0s()(),e.j41(14,"li",8)(15,"a",9),e.EFF(16,"Management users"),e.k0s()()()()()()()(),e.j41(17,"div",10)(18,"div",11),e.DNE(19,F,4,0,"div",12),e.k0s()(),e.j41(20,"div",10)(21,"div",13)(22,"div",2)(23,"div",3)(24,"label",14),e.EFF(25,"Buscador de usuarios"),e.k0s(),e.j41(26,"input",15),e.mxI("ngModelChange",function(c){return e.DH7(n.searchTerm,c)||(n.searchTerm=c),c}),e.bIt("input",function(){return n.filterUsers()}),e.k0s()()()()(),e.j41(27,"div",10)(28,"div",16)(29,"div",2)(30,"div",3)(31,"table",17)(32,"thead")(33,"tr")(34,"th"),e.EFF(35,"#"),e.k0s(),e.j41(36,"th"),e.EFF(37,"Nombre"),e.k0s(),e.j41(38,"th"),e.EFF(39,"Email"),e.k0s(),e.j41(40,"th"),e.EFF(41,"Status"),e.k0s(),e.j41(42,"th"),e.EFF(43,"Rol"),e.k0s(),e.j41(44,"th"),e.EFF(45,"Acciones"),e.k0s()()(),e.j41(46,"tbody"),e.DNE(47,v,18,19,"tr",18),e.k0s()()()()()()),2&r&&(e.R7$(12),e.Y8G("routerLink",e.lJ4(5,b)),e.R7$(3),e.Y8G("routerLink",e.lJ4(6,p)),e.R7$(4),e.Y8G("ngIf",n.isLoading),e.R7$(7),e.R50("ngModel",n.searchTerm),e.R7$(21),e.Y8G("ngForOf",n.filteredUsers))},dependencies:[i.MD,i.YU,i.Sq,i.bT,o.YN,o.me,o.BC,o.vS,u.iI,u.Wk],encapsulation:2})}return t})()}}]);