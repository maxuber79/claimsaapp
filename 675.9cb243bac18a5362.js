"use strict";(self.webpackChunkclaims_app=self.webpackChunkclaims_app||[]).push([[675],{9675:(E,f,i)=>{i.r(f),i.d(f,{ProfileViewComponent:()=>k});var m=i(2881),t=i(4341),p=i(5207),e=i(1360),u=i(5072),c=i(9885),b=i(4796),g=i(9332),v=i(2107);const h=()=>["/dashboard"];function F(a,j){1&a&&(e.j41(0,"div",91)(1,"div",92)(2,"span",93),e.EFF(3,"Cargando..."),e.k0s()()())}function y(a,j){1&a&&(e.j41(0,"button",94),e.EFF(1,"Guardar cambios"),e.k0s())}let k=(()=>{class a{route;fb;userService;authService;alertService;storage;uid="";profileForm;profileUserForm;userData=null;editMode=!1;isDisabled=!1;loadUserData;loading=!0;isSaving=!1;isLoading=!0;defaultImage="https://randomuser.me/api/portraits/men/40.jpg";previewUrl=null;imageFile=null;fileName="";perfil=null;config=null;constructor(l,r,o,n,s,d){this.route=l,this.fb=r,this.userService=o,this.authService=n,this.alertService=s,this.storage=d,console.log("%c<<< Start constructor >>>","background: #fff3cd; color: #664d03; padding: 2px 5px;")}ngOnInit(){console.log("%c<<< Start ngOnInit >>>","background: #fff3cd; color: #664d03; padding: 2px 5px;");const l=this.route.snapshot.paramMap.get("uid");console.log("%c<<< UID desde la ruta >>>","background: #d1e7dd; color: #0f5132; padding: 2px 5px;",l),l?(this.profileUserForm=this.fb.group({uid:[{value:"",disabled:!0}],photoURL:[""],name:[""],last_name:[""],user_name:[""],email:[""],phone:[""],mobile:[""],address:[""],city:[""],commune:[""],profession:[""],website:[""],github:[""],instagram:[""],twitter:[""],facebook:[""],bio:[""]}),this.uid=l,this.userService.getUserData(this.uid).subscribe({next:r=>{this.userData={...r,uid:this.uid,email:r?.email??""},this.perfil={...r,uid:this.uid,email:r?.email??""},this.isLoading=!1,console.log("\u2705 Usuario cargado:",this.userData),this.profileUserForm.patchValue({uid:this.perfil?.uid||"",photoURL:this.perfil?.photoURL||"",name:this.perfil?.name||"",last_name:this.perfil?.last_name||"",user_name:this.perfil?.user_name||"",email:this.perfil?.email||"",phone:this.perfil?.phone||"",mobile:this.perfil?.mobile||"",address:this.perfil?.address||"",city:this.perfil?.city||"",commune:this.perfil?.commune||"",profession:this.perfil?.profession||"",website:this.perfil?.website||"",github:this.perfil?.github||"",instagram:this.perfil?.instagram||"",twitter:this.perfil?.twitter||"",facebook:this.perfil?.facebook||"",bio:this.perfil?.bio||""}),console.log("%c<<< Formulario patchValue >>>","background: #d1e7dd; color: #0f5132; padding: 2px 5px;",this.profileUserForm.value)},error:r=>{console.error("\u274c Error al cargar usuario:",r),this.isLoading=!1},complete:()=>{console.log("%c<<< Usuario cargado correctamente >>>","background: #d1e7dd; color: #0f5132; padding: 2px 5px;")}})):console.error("\u274c No se encontr\xf3 UID en la ruta")}initForm(){}onFileSelected(l){}loadUserProfile(l){console.log("%c<<< Start loadUserProfile >>>","background: #198754; color: #ffffff; padding: 2px 5px;")}saveProfile(){if(console.log("Guardar perfil"),console.log("%c<<< Guardar perfil >>>","background: #0d6efd; color: #fff; padding: 2px 5px;"),this.profileUserForm.invalid)return void alert("\u26a0\ufe0f El formulario es inv\xe1lido. Revisa los campos.");const l=this.profileUserForm.value;console.log("%c<<< uid >>>","background: #d1e7dd; color: #0f5132; padding: 2px 5px;",this.uid),console.log("%c<<< Datos a guardar >>>","background: #d1e7dd; color: #0f5132; padding: 2px 5px;",l),this.userService.updateUserProfile(this.uid,l).subscribe({next:()=>{console.log("%c\u2705 Perfil actualizado correctamente","background: #d1e7dd; color: #0f5132; padding: 2px 5px;"),this.alertService.success("Perfil actualizado correctamente"),this.toggleEdit()},error:o=>{console.error("%c\u274c Error al actualizar perfil:","background: #f8d7da; color: #842029; padding: 2px 5px;",o),this.alertService.error("\u274c Error al guardar perfil, revisa la consola")}})}toggleEdit(){this.editMode&&this.perfil&&this.profileUserForm.patchValue(this.perfil),this.editMode=!this.editMode}static \u0275fac=function(r){return new(r||a)(e.rXU(u.nX),e.rXU(t.ok),e.rXU(c.D),e.rXU(b.u),e.rXU(g.u),e.rXU(v.wc))};static \u0275cmp=e.VBU({type:a,selectors:[["app-profile-view"]],decls:181,vars:36,consts:[["fileInput",""],[1,"row"],[1,"col"],["class","text-center my-5",4,"ngIf"],[1,"col-12","text-start","grid-margin"],[1,"card"],[1,"card-body"],[1,"col-12"],["aria-label","breadcrumb",1,""],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item"],[3,"routerLink"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-lg-4","grid-margin"],[1,"card","mb-4"],[1,"card-body","text-center"],[1,"position-relative","d-inline-block"],["alt","Profile Picture","width","120","height","120",1,"rounded-circle","object-fit-cover","profile-pic",3,"src"],["type","file","accept","image/*","hidden","",3,"change"],[1,"btn","btn-primary","btn-sm","position-absolute","bottom-0","end-0","rounded-circle",3,"click"],[1,"fas","fa-camera"],[1,"my-2"],[1,"text-muted","mb-1"],[1,"badge","bg-primary-subtle","text-primary","px-3","py-2","rounded-pill"],[1,"text-muted","mb-2"],[1,"mb-4"],[1,"badge","bg-success-subtle","text-dark","px-3","py-2","rounded-pill"],[1,"d-flex","justify-content-center","mb-2"],["type","button","data-mdb-button-init","","data-mdb-ripple-init","",1,"btn","btn-primary"],["type","button","data-mdb-button-init","","data-mdb-ripple-init","",1,"btn","btn-outline-primary","ms-1"],[1,"list-group","list-group-flush","rounded-3"],[1,"list-group-item","d-flex","justify-content-between","align-items-center","p-3"],[1,"fas","fa-globe","fa-lg","text-warning"],[1,"mb-0"],[1,"fab","fa-github","fa-lg","text-body"],[1,"fab","fa-twitter","fa-lg",2,"color","#55acee"],[1,"fab","fa-instagram","fa-lg",2,"color","#ac2bac"],[1,"fab","fa-facebook-f","fa-lg",2,"color","#3b5998"],[1,"col-lg-8","grid-margin"],[3,"ngSubmit","formGroup"],[1,"row","form-group"],["for","uid",1,"col-sm-3","col-form-label"],[1,"col-sm-9"],["type","text","id","uid","formControlName","uid",1,"form-control",3,"readonly"],["for","staticEmail",1,"col-sm-3","col-form-label"],["type","text","readonly","","id","staticEmail","value","email@example.com",1,"form-control-plaintext"],["for","inputPassword",1,"col-sm-3","col-form-label"],["type","password","id","inputPassword",1,"form-control"],["for","photoURL",1,"col-sm-3","col-form-label"],["id","photoURL","type","url","formControlName","photoURL","placeholder","https://...",1,"form-control",3,"readonly"],[1,"form-text","text-end"],["href","https://imgur.com/upload","target","_blank"],["for","name",1,"col-sm-3","col-form-label"],["type","text","id","name","formControlName","name",1,"form-control",3,"readonly"],["for","last_name",1,"col-sm-3","col-form-label"],["type","text","id","last_name","formControlName","last_name",1,"form-control",3,"readonly"],["for","user_name",1,"col-sm-3","col-form-label"],["type","text","id","user_name","formControlName","user_name",1,"form-control",3,"readonly"],["for","email",1,"col-sm-3","col-form-label"],["type","email","id","email","formControlName","email",1,"form-control",3,"readonly"],["for","phone",1,"col-sm-3","col-form-label"],["type","text","id","phone","formControlName","phone",1,"form-control",3,"readonly"],["for","mobile",1,"col-sm-3","col-form-label"],["type","text","id","mobile","formControlName","mobile",1,"form-control",3,"readonly"],["for","address",1,"col-sm-3","col-form-label"],["type","text","id","address","formControlName","address",1,"form-control",3,"readonly"],[1,"col-sm-12","col-md-6"],["for","city",1,"col-sm-6","col-form-label"],[1,"col-sm-6"],["type","text","id","city","formControlName","city",1,"form-control",3,"readonly"],["for","commune",1,"col-sm-4","col-form-label"],[1,"col-sm-8"],["type","text","id","commune","formControlName","commune",1,"form-control",3,"readonly"],["for","profession",1,"col-sm-3","col-form-label"],["type","text","id","profession","formControlName","profession",1,"form-control",3,"readonly"],["for","website",1,"col-sm-3","col-form-label"],["type","text","id","website","formControlName","website",1,"form-control",3,"readonly"],["for","github",1,"col-sm-3","col-form-label"],["type","text","id","github","formControlName","github",1,"form-control",3,"readonly"],["for","instagram",1,"col-sm-3","col-form-label"],["type","text","id","instagram","formControlName","instagram",1,"form-control",3,"readonly"],["for","twitter",1,"col-sm-3","col-form-label"],["type","text","id","twitter","formControlName","twitter",1,"form-control",3,"readonly"],["for","facebook",1,"col-sm-3","col-form-label"],["type","text","id","facebook","formControlName","facebook",1,"form-control",3,"readonly"],["for","bio",1,"col-sm-3","col-form-label"],["rows","4","id","bio","formControlName","bio",1,"form-control",3,"readonly"],[1,"card-footer","py-3"],[1,"wrapp-btn","btn-right"],["type","button",1,"btn","btn-full","m-1",3,"click","ngClass"],["type","submit","class","btn btn-full --success m-1",4,"ngIf"],[1,"text-center","my-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],["type","submit",1,"btn","btn-full","--success","m-1"]],template:function(r,o){if(1&r){const n=e.RV6();e.j41(0,"div",1)(1,"div",2),e.DNE(2,F,4,0,"div",3),e.k0s()(),e.j41(3,"div",1)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",1)(8,"div",7)(9,"nav",8)(10,"ol",9)(11,"li",10)(12,"a",11),e.EFF(13,"Home"),e.k0s()(),e.j41(14,"li",12),e.EFF(15,"Mi perfil"),e.k0s()()()()()()()()(),e.j41(16,"div",1)(17,"div",13)(18,"div",14)(19,"div",15)(20,"div",16),e.nrm(21,"img",17),e.j41(22,"input",18,0),e.bIt("change",function(d){return e.eBV(n),e.Njj(o.onFileSelected(d))}),e.k0s(),e.j41(24,"button",19),e.bIt("click",function(){e.eBV(n);const d=e.sdS(23);return e.Njj(d.click())}),e.nrm(25,"i",20),e.k0s()(),e.j41(26,"h5",21),e.EFF(27),e.k0s(),e.j41(28,"p",22)(29,"span",23),e.EFF(30),e.k0s()(),e.j41(31,"p",24),e.EFF(32),e.k0s(),e.j41(33,"p",25)(34,"span",26),e.EFF(35),e.k0s()(),e.j41(36,"div",27)(37,"button",28),e.EFF(38,"Follow"),e.k0s(),e.j41(39,"button",29),e.EFF(40,"Message"),e.k0s()()()(),e.j41(41,"div",14)(42,"div",6)(43,"ul",30)(44,"li",31),e.nrm(45,"i",32),e.j41(46,"p",33),e.EFF(47),e.k0s()(),e.j41(48,"li",31),e.nrm(49,"i",34),e.j41(50,"p",33),e.EFF(51),e.k0s()(),e.j41(52,"li",31),e.nrm(53,"i",35),e.j41(54,"p",33),e.EFF(55),e.k0s()(),e.j41(56,"li",31),e.nrm(57,"i",36),e.j41(58,"p",33),e.EFF(59),e.k0s()(),e.j41(60,"li",31),e.nrm(61,"i",37),e.j41(62,"p",33),e.EFF(63),e.k0s()()()()()(),e.j41(64,"div",38)(65,"div",14)(66,"form",39),e.bIt("ngSubmit",function(){return e.eBV(n),e.Njj(o.saveProfile())}),e.j41(67,"div",6)(68,"div",40)(69,"label",41),e.EFF(70,"UID"),e.k0s(),e.j41(71,"div",42),e.nrm(72,"input",43),e.k0s()(),e.j41(73,"div",40)(74,"label",44),e.EFF(75,"Email"),e.k0s(),e.j41(76,"div",42),e.nrm(77,"input",45),e.k0s()(),e.j41(78,"div",40)(79,"label",46),e.EFF(80,"Password"),e.k0s(),e.j41(81,"div",42),e.nrm(82,"input",47),e.k0s()(),e.j41(83,"div",40)(84,"label",48),e.EFF(85,"URL foto perfil..."),e.k0s(),e.j41(86,"div",42),e.nrm(87,"input",49),e.j41(88,"div",50),e.EFF(89,"Pega una URL de imagen p\xfablica (por ejemplo desde "),e.j41(90,"a",51),e.EFF(91,"Imgur"),e.k0s(),e.EFF(92,")"),e.k0s()()(),e.j41(93,"div",40)(94,"label",52),e.EFF(95,"Nombres"),e.k0s(),e.j41(96,"div",42),e.nrm(97,"input",53),e.k0s()(),e.j41(98,"div",40)(99,"label",54),e.EFF(100,"Apellidos"),e.k0s(),e.j41(101,"div",42),e.nrm(102,"input",55),e.k0s()(),e.j41(103,"div",40)(104,"label",56),e.EFF(105,"Username"),e.k0s(),e.j41(106,"div",42),e.nrm(107,"input",57),e.k0s()(),e.j41(108,"div",40)(109,"label",58),e.EFF(110,"Email"),e.k0s(),e.j41(111,"div",42),e.nrm(112,"input",59),e.k0s()(),e.j41(113,"div",40)(114,"label",60),e.EFF(115,"Tel\xe9fono"),e.k0s(),e.j41(116,"div",42),e.nrm(117,"input",61),e.k0s()(),e.j41(118,"div",40)(119,"label",62),e.EFF(120,"Celular"),e.k0s(),e.j41(121,"div",42),e.nrm(122,"input",63),e.k0s()(),e.j41(123,"div",40)(124,"label",64),e.EFF(125,"Direcci\xf3n"),e.k0s(),e.j41(126,"div",42),e.nrm(127,"input",65),e.k0s()(),e.j41(128,"div",1)(129,"div",66)(130,"div",40)(131,"label",67),e.EFF(132,"Ciudad"),e.k0s(),e.j41(133,"div",68),e.nrm(134,"input",69),e.k0s()()(),e.j41(135,"div",66)(136,"div",40)(137,"label",70),e.EFF(138,"Comuna"),e.k0s(),e.j41(139,"div",71),e.nrm(140,"input",72),e.k0s()()()(),e.j41(141,"div",40)(142,"label",73),e.EFF(143,"Profesi\xf3n"),e.k0s(),e.j41(144,"div",42),e.nrm(145,"input",74),e.k0s()(),e.j41(146,"div",40)(147,"label",75),e.EFF(148,"Sitio Web"),e.k0s(),e.j41(149,"div",42),e.nrm(150,"input",76),e.k0s()(),e.j41(151,"div",40)(152,"label",77),e.EFF(153,"GitHub"),e.k0s(),e.j41(154,"div",42),e.nrm(155,"input",78),e.k0s()(),e.j41(156,"div",40)(157,"label",79),e.EFF(158,"Instagram"),e.k0s(),e.j41(159,"div",42),e.nrm(160,"input",80),e.k0s()(),e.j41(161,"div",40)(162,"label",81),e.EFF(163,"Twitter"),e.k0s(),e.j41(164,"div",42),e.nrm(165,"input",82),e.k0s()(),e.j41(166,"div",40)(167,"label",83),e.EFF(168,"Facebook"),e.k0s(),e.j41(169,"div",42),e.nrm(170,"input",84),e.k0s()(),e.j41(171,"div",40)(172,"label",85),e.EFF(173,"Biograf\xeda"),e.k0s(),e.j41(174,"div",42),e.nrm(175,"textarea",86),e.k0s()()(),e.j41(176,"div",87)(177,"div",88)(178,"button",89),e.bIt("click",function(){return e.eBV(n),e.Njj(o.toggleEdit())}),e.EFF(179),e.k0s(),e.DNE(180,y,2,0,"button",90),e.k0s()()()()()()}2&r&&(e.R7$(2),e.Y8G("ngIf",o.isLoading),e.R7$(10),e.Y8G("routerLink",e.lJ4(35,h)),e.R7$(9),e.Y8G("src",(null==o.perfil?null:o.perfil.photoURL)||o.defaultImage,e.B4B),e.R7$(6),e.JRh((null==o.perfil?null:o.perfil.name)+" "+(null==o.perfil?null:o.perfil.last_name)||"N/A"),e.R7$(3),e.JRh((null==o.perfil?null:o.perfil.profession)||"N/A"),e.R7$(2),e.Lme("",(null==o.perfil?null:o.perfil.address)||"N/A",", ",(null==o.perfil?null:o.perfil.city)||"N/A",""),e.R7$(3),e.SpI(" ",(null==o.perfil?null:o.perfil.uid)||"N/A"," "),e.R7$(12),e.JRh((null==o.perfil?null:o.perfil.website)||"N/A"),e.R7$(4),e.JRh((null==o.perfil?null:o.perfil.github)||"N/A"),e.R7$(4),e.JRh((null==o.perfil?null:o.perfil.twitter)||"N/A"),e.R7$(4),e.JRh((null==o.perfil?null:o.perfil.instagram)||"N/A"),e.R7$(4),e.JRh((null==o.perfil?null:o.perfil.facebook)||"N/A"),e.R7$(3),e.Y8G("formGroup",o.profileUserForm),e.R7$(6),e.Y8G("readonly",!o.editMode),e.R7$(15),e.Y8G("readonly",!o.editMode),e.R7$(10),e.Y8G("readonly",!o.editMode),e.R7$(5),e.Y8G("readonly",!o.editMode),e.R7$(5),e.Y8G("readonly",!o.editMode),e.R7$(5),e.Y8G("readonly",!o.editMode),e.R7$(5),e.Y8G("readonly",!o.editMode),e.R7$(5),e.Y8G("readonly",!o.editMode),e.R7$(5),e.Y8G("readonly",!o.editMode),e.R7$(7),e.Y8G("readonly",!o.editMode),e.R7$(6),e.Y8G("readonly",!o.editMode),e.R7$(5),e.Y8G("readonly",!o.editMode),e.R7$(5),e.Y8G("readonly",!o.editMode),e.R7$(5),e.Y8G("readonly",!o.editMode),e.R7$(5),e.Y8G("readonly",!o.editMode),e.R7$(5),e.Y8G("readonly",!o.editMode),e.R7$(5),e.Y8G("readonly",!o.editMode),e.R7$(5),e.Y8G("readonly",!o.editMode),e.R7$(3),e.Y8G("ngClass",o.editMode?"--danger":"--primary"),e.R7$(),e.SpI(" ",o.editMode?"Cancelar edici\xf3n":"Editar perfil"," "),e.R7$(),e.Y8G("ngIf",o.editMode))},dependencies:[m.MD,m.YU,m.bT,t.YN,t.qT,t.me,t.BC,t.cb,t.X1,t.j4,t.JD,p.iI,p.Wk],styles:['@charset "UTF-8";']})}return a})()}}]);