import{i as j,j as Ce,k as K,l as we}from"./chunk-4U62CGBR.js";import"./chunk-EGL3HYDS.js";import{a as J}from"./chunk-XWJPPLP3.js";import{$ as q,P as _,Q as C,R as w,S as D,U as _e,V as N,X as P,Y as A,Z as H,_ as W,ba as O,ca as V,da as L}from"./chunk-4HP7YMJX.js";import{Ba as k,Da as u,Ea as S,Fa as ue,Ga as i,Ha as f,Ia as x,O as g,P as v,Pa as ie,Q as T,Qa as G,R as F,Ra as fe,Ta as B,Ua as ge,Va as ve,Y as ee,a as le,ab as be,b as de,bb as he,ca as pe,da as a,eb as Se,fb as z,g as h,gb as M,ha as p,hb as xe,ia as y,ib as ye,jb as E,ma as b,pb as I,qa as d,r as me,rb as $,sa as R,t as se,ta as te,ub as Ee,wa as t,x as ce,xa as e,ya as l}from"./chunk-Q4CT3PY3.js";function Me(m,n){if(m&1&&(t(0,"button",111),i(1," Guardar cambios "),e()),m&2){let o=S();d("disabled",!o.profileForm.valid||!o.profileForm.dirty)}}var Y=class m{constructor(n,o,r,s,c,U){this.route=n;this.fb=o;this.userService=r;this.authService=s;this.alertService=c;this.storage=U;console.log("%c<<< Start constructor >>>","background: #fff3cd; color: #664d03; padding: 2px 5px;")}uid="";profileForm;userData=null;editMode=!1;isDisabled=!1;loadUserData;loading=!0;isSaving=!1;isLoading=!0;defaultImage="https://randomuser.me/api/portraits/men/40.jpg";previewUrl=null;imageFile=null;fileName="";perfil=null;config=null;ngOnInit(){console.log("%c<<< Start ngOnInit >>>","background: #6610f2; color: #ffffff; padding: 2px 5px;"),this.uid=this.route.snapshot.paramMap.get("uid")||"",console.log("%c<<< uid | profile >>>","background: #d63384; color: #fff; padding: 2px 5px;",this.uid),this.profileForm=this.fb.group({uid:[{value:this.uid,disabled:!0}],photoURL:[""],name:[""],last_name:[""],user_name:[""],email:[{value:"",disabled:!0}],phone:[""],mobile:[""],address:[""],city:[""],commune:[""],profession:[""],website:[""],github:[""],instagram:[""],twitter:[""],facebook:[""],bio:[""]}),this.uid&&(console.log("\u{1F194} UID recibido en profile:",!0,"uid:",this.uid),se({perfil:this.userService.getUserData(this.uid),config:this.authService.getCurrentUser().pipe(ce(1))}).subscribe({next:({perfil:n,config:o})=>{this.perfil=n,this.config=o,console.log("\u2705 combineLatest:",{perfil:n,config:o}),this.profileForm.patchValue({photoURL:this.perfil?.photoURL||"",name:this.perfil?.name||"",last_name:this.perfil?.last_name||"",user_name:this.perfil?.user_name||"",email:this.perfil?.email||"",phone:this.perfil?.phone||"",mobile:this.perfil?.mobile||"",address:this.perfil?.address||"",city:this.perfil?.city||"",commune:this.perfil?.commune||"",profession:this.perfil?.profession||"",website:this.perfil?.website||"",github:this.perfil?.github||"",instagram:this.perfil?.instagram||"",twitter:this.perfil?.twitter||"",facebook:this.perfil?.facebook||"",bio:this.perfil?.bio||""}),console.log("\u2705 Formulario actualizado con datos del perfil:",this.profileForm.value)},error:n=>{console.error("\u274C Error al obtener datos del perfil/config:",n)}}))}loadUserProfile(n){this.userService.getUserProfile(n).subscribe(o=>{console.log("\u{1F9E0} userData desde loadUserProfile:",o),o?(this.userData=o,console.log("\u2705 Perfil cargado despues del if:",this.userData)):console.warn("\u26A0\uFE0F No se encontr\xF3 perfil para UID:",n)})}onFileSelected(n){let o=n.target.files?.[0];if(o){let r=URL.createObjectURL(o);this.previewUrl=r,this.imageFile=o,this.fileName=`avatar_${Date.now()}_${o.name}`}}buildForm(n){}saveProfile(){if(this.profileForm.valid&&this.uid){let n=this.profileForm.getRawValue();this.userService.updateUserProfile(this.uid,n).subscribe({next:()=>{console.log("%c\u2705 Perfil actualizado correctamente","background: #d1e7dd; color: #0f5132; padding: 2px 5px;"),this.alertService.success("Perfil actualizado correctamente"),this.perfil=n,this.editMode=!1},error:o=>{console.error("%c\u274C Error al actualizar perfil:","background: #f8d7da; color: #842029; padding: 2px 5px;",o)}})}}toggleEdit(){this.editMode&&this.perfil&&this.profileForm.patchValue(this.perfil),this.editMode=!this.editMode}static \u0275fac=function(o){return new(o||m)(p(I),p(O),p(Ce),p(J),p(j),p(we))};static \u0275cmp=y({type:m,selectors:[["app-profile"]],decls:264,vars:25,consts:[["fileInput",""],[1,"container","py-4"],[1,"mb-4"],[3,"ngSubmit","formGroup"],[1,"row","g-3","text-start"],[1,"my-1"],[1,"col-12","p-4","mb-1"],[1,"d-flex","align-items-center","mb-4","mb-lg-0"],[1,"position-relative","d-inline-block"],["alt","Profile Picture","width","120","height","120",1,"rounded-circle","profile-pic",3,"src"],["type","file","accept","image/*","hidden","",3,"change"],[1,"btn","btn-primary","btn-sm","position-absolute","bottom-0","end-0","rounded-circle",3,"click"],[1,"fas","fa-camera"],[1,"ms-3"],[1,"mb-0"],[1,"my-2"],[1,"col-12"],[1,"badge","bg-primary-subtle","text-primary","px-3","py-2","rounded-pill"],[1,"col-6"],[1,"mb-3"],["for","uid",1,"form-label"],["type","text","id","uid","formControlName","uid",1,"form-control",3,"readonly"],["for","photoURL",1,"form-label"],["id","photoURL","type","url","formControlName","photoURL","placeholder","https://...",1,"form-control",3,"readonly"],[1,"text-muted"],["href","https://imgur.com/upload","target","_blank"],[1,"col-md-6"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name",1,"form-control",3,"readonly"],["for","last_name",1,"form-label"],["type","text","id","last_name","formControlName","last_name",1,"form-control",3,"readonly"],["for","user_name",1,"form-label"],["type","text","id","user_name","formControlName","user_name",1,"form-control",3,"readonly"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control",3,"readonly"],["for","phone",1,"form-label"],["type","text","id","phone","formControlName","phone",1,"form-control",3,"readonly"],["for","mobile",1,"form-label"],["type","text","id","mobile","formControlName","mobile",1,"form-control",3,"readonly"],["for","address",1,"form-label"],["type","text","id","address","formControlName","address",1,"form-control",3,"readonly"],[1,"col-md-3"],["for","city",1,"form-label"],["type","text","id","city","formControlName","city",1,"form-control",3,"readonly"],["for","commune",1,"form-label"],["type","text","id","commune","formControlName","commune",1,"form-control",3,"readonly"],["for","profession",1,"form-label"],["type","text","id","profession","formControlName","profession",1,"form-control",3,"readonly"],["for","website",1,"form-label"],["type","text","id","website","formControlName","website",1,"form-control",3,"readonly"],["for","github",1,"form-label"],["type","text","id","github","formControlName","github",1,"form-control",3,"readonly"],["for","instagram",1,"form-label"],["type","text","id","instagram","formControlName","instagram",1,"form-control",3,"readonly"],["for","twitter",1,"form-label"],["type","text","id","twitter","formControlName","twitter",1,"form-control",3,"readonly"],["for","facebook",1,"form-label"],["type","text","id","facebook","formControlName","facebook",1,"form-control",3,"readonly"],["for","bio",1,"form-label"],["rows","4","id","bio","formControlName","bio",1,"form-control",3,"readonly"],[1,"d-flex","justify-content-end","gap-2","mt-4"],["type","button",1,"btn","btn-secondary","btn-lg",3,"click"],["type","submit","class","btn btn-success btn-lg",3,"disabled",4,"ngIf"],[1,"container"],[1,"main-body"],[1,"row","gutters-sm"],[1,"col-md-4","mb-3"],[1,"card"],[1,"card-body"],[1,"d-flex","flex-column","align-items-center","text-center"],["src","https://bootdey.com/img/Content/avatar/avatar7.png","alt","Admin","width","150",1,"rounded-circle"],[1,"mt-3"],[1,"text-secondary","mb-1"],[1,"text-muted","font-size-sm"],[1,"btn","btn-primary"],[1,"btn","btn-outline-primary"],[1,"card","mt-3"],[1,"list-group","list-group-flush"],[1,"list-group-item","d-flex","justify-content-between","align-items-center","flex-wrap"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-globe","mr-2","icon-inline"],["cx","12","cy","12","r","10"],["x1","2","y1","12","x2","22","y2","12"],["d","M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"],[1,"text-secondary"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-github","mr-2","icon-inline"],["d","M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-twitter","mr-2","icon-inline","text-info"],["d","M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-instagram","mr-2","icon-inline","text-danger"],["x","2","y","2","width","20","height","20","rx","5","ry","5"],["d","M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"],["x1","17.5","y1","6.5","x2","17.51","y2","6.5"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-facebook","mr-2","icon-inline","text-primary"],["d","M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"],[1,"col-md-8"],[1,"card","mb-3"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-9","text-secondary"],[1,"col-sm-12"],["target","__blank","href","https://www.bootdey.com/snippets/view/profile-edit-data-and-skills",1,"btn","btn-info"],[1,"col-sm-6","mb-3"],[1,"card","h-100"],[1,"d-flex","align-items-center","mb-3"],[1,"material-icons","text-info","mr-2"],[1,"progress","mb-3",2,"height","5px"],["role","progressbar","aria-valuenow","80","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-primary",2,"width","80%"],["role","progressbar","aria-valuenow","72","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-primary",2,"width","72%"],["role","progressbar","aria-valuenow","89","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-primary",2,"width","89%"],["role","progressbar","aria-valuenow","55","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-primary",2,"width","55%"],["role","progressbar","aria-valuenow","66","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-primary",2,"width","66%"],["type","submit",1,"btn","btn-success","btn-lg",3,"disabled"]],template:function(o,r){if(o&1){let s=k();t(0,"div",1)(1,"h2",2),i(2,"\u{1F464} Perfil de Usuario"),e(),t(3,"form",3),u("ngSubmit",function(){return g(s),v(r.saveProfile())}),t(4,"div",1)(5,"div",4),l(6,"hr",5),t(7,"div",6)(8,"div",7)(9,"div",8),l(10,"img",9),t(11,"input",10,0),u("change",function(U){return g(s),v(r.onFileSelected(U))}),e(),t(13,"button",11),u("click",function(){g(s);let U=ue(12);return v(U.click())}),l(14,"i",12),e()(),t(15,"div",13)(16,"h4",14),i(17),e(),t(18,"p",14),i(19,"PNG o JPG no mayor a 800 px de ancho y alto."),e()()()(),l(20,"hr",15),t(21,"div",16)(22,"span",17),i(23),e()(),t(24,"div",18)(25,"div",19)(26,"label",20),i(27,"UID"),e(),l(28,"input",21),e()(),t(29,"div",18)(30,"div",19)(31,"label",22),i(32,"URL de la foto de perfil"),e(),l(33,"input",23),t(34,"small",24),i(35,"Pega una URL de imagen p\xFAblica (por ejemplo desde "),t(36,"a",25),i(37,"Imgur"),e(),i(38,")"),e()()(),t(39,"div",26)(40,"label",27),i(41,"Nombre"),e(),l(42,"input",28),e(),t(43,"div",26)(44,"label",29),i(45,"Apellido"),e(),l(46,"input",30),e(),t(47,"div",26)(48,"label",31),i(49,"Nombre de usuario"),e(),l(50,"input",32),e(),t(51,"div",26)(52,"label",33),i(53,"Correo electr\xF3nico"),e(),l(54,"input",34),e(),t(55,"div",26)(56,"label",35),i(57,"Tel\xE9fono"),e(),l(58,"input",36),e(),t(59,"div",26)(60,"label",37),i(61,"Celular"),e(),l(62,"input",38),e(),t(63,"div",26)(64,"label",39),i(65,"Direcci\xF3n"),e(),l(66,"input",40),e(),t(67,"div",41)(68,"label",42),i(69,"Ciudad"),e(),l(70,"input",43),e(),t(71,"div",41)(72,"label",44),i(73,"Comuna"),e(),l(74,"input",45),e(),t(75,"div",26)(76,"label",46),i(77,"Profesi\xF3n"),e(),l(78,"input",47),e(),t(79,"div",26)(80,"label",48),i(81,"Sitio Web"),e(),l(82,"input",49),e(),t(83,"div",41)(84,"label",50),i(85,"GitHub"),e(),l(86,"input",51),e(),t(87,"div",41)(88,"label",52),i(89,"Instagram"),e(),l(90,"input",53),e(),t(91,"div",41)(92,"label",54),i(93,"Twitter"),e(),l(94,"input",55),e(),t(95,"div",41)(96,"label",56),i(97,"Facebook"),e(),l(98,"input",57),e(),t(99,"div",16)(100,"label",58),i(101,"Biograf\xEDa"),e(),l(102,"textarea",59),e()(),t(103,"div",60)(104,"button",61),u("click",function(){return g(s),v(r.toggleEdit())}),i(105),e(),b(106,Me,2,1,"button",62),e()()(),t(107,"div",63)(108,"div",64)(109,"div",65)(110,"div",66)(111,"div",67)(112,"div",68)(113,"div",69),l(114,"img",70),t(115,"div",71)(116,"h4"),i(117),e(),t(118,"p",72),i(119,"Full Stack Developer"),e(),t(120,"p",73),i(121,"Bay Area, San Francisco, CA"),e(),t(122,"button",74),i(123,"Follow"),e(),t(124,"button",75),i(125,"Message"),e()()()()(),t(126,"div",76)(127,"ul",77)(128,"li",78)(129,"h6",14),T(),t(130,"svg",79),l(131,"circle",80)(132,"line",81)(133,"path",82),e(),i(134,"Website"),e(),F(),t(135,"span",83),i(136,"https://bootdey.com"),e()(),t(137,"li",78)(138,"h6",14),T(),t(139,"svg",84),l(140,"path",85),e(),i(141,"Github"),e(),F(),t(142,"span",83),i(143,"bootdey"),e()(),t(144,"li",78)(145,"h6",14),T(),t(146,"svg",86),l(147,"path",87),e(),i(148,"Twitter"),e(),F(),t(149,"span",83),i(150,"2bootdey"),e()(),t(151,"li",78)(152,"h6",14),T(),t(153,"svg",88),l(154,"rect",89)(155,"path",90)(156,"line",91),e(),i(157,"Instagram"),e(),F(),t(158,"span",83),i(159,"bootdey"),e()(),t(160,"li",78)(161,"h6",14),T(),t(162,"svg",92),l(163,"path",93),e(),i(164,"Facebook"),e(),F(),t(165,"span",83),i(166,"bootdey"),e()()()()(),t(167,"div",94)(168,"div",95)(169,"div",68)(170,"div",96)(171,"div",97)(172,"h6",14),i(173,"Full Name"),e()(),t(174,"div",98),i(175," Kenneth Valdez "),e()(),l(176,"hr"),t(177,"div",96)(178,"div",97)(179,"h6",14),i(180,"Email"),e()(),t(181,"div",98),i(182," fip2jukmuh.al "),e()(),l(183,"hr"),t(184,"div",96)(185,"div",97)(186,"h6",14),i(187,"Phone"),e()(),t(188,"div",98),i(189," (239) 816-9029 "),e()(),l(190,"hr"),t(191,"div",96)(192,"div",97)(193,"h6",14),i(194,"Mobile"),e()(),t(195,"div",98),i(196," (320) 380-4539 "),e()(),l(197,"hr"),t(198,"div",96)(199,"div",97)(200,"h6",14),i(201,"Address"),e()(),t(202,"div",98),i(203," Bay Area, San Francisco, CA "),e()(),l(204,"hr"),t(205,"div",96)(206,"div",99)(207,"a",100),i(208,"Edit"),e()()()()(),t(209,"div",65)(210,"div",101)(211,"div",102)(212,"div",68)(213,"h6",103)(214,"i",104),i(215,"assignment"),e(),i(216,"Project Status"),e(),t(217,"small"),i(218,"Web Design"),e(),t(219,"div",105),l(220,"div",106),e(),t(221,"small"),i(222,"Website Markup"),e(),t(223,"div",105),l(224,"div",107),e(),t(225,"small"),i(226,"One Page"),e(),t(227,"div",105),l(228,"div",108),e(),t(229,"small"),i(230,"Mobile Template"),e(),t(231,"div",105),l(232,"div",109),e(),t(233,"small"),i(234,"Backend API"),e(),t(235,"div",105),l(236,"div",110),e()()()(),t(237,"div",101)(238,"div",102)(239,"div",68)(240,"h6",103)(241,"i",104),i(242,"assignment"),e(),i(243,"Project Status"),e(),t(244,"small"),i(245,"Web Design"),e(),t(246,"div",105),l(247,"div",106),e(),t(248,"small"),i(249,"Website Markup"),e(),t(250,"div",105),l(251,"div",107),e(),t(252,"small"),i(253,"One Page"),e(),t(254,"div",105),l(255,"div",108),e(),t(256,"small"),i(257,"Mobile Template"),e(),t(258,"div",105),l(259,"div",109),e(),t(260,"small"),i(261,"Backend API"),e(),t(262,"div",105),l(263,"div",110),e()()()()()()()()()()}o&2&&(a(3),d("formGroup",r.profileForm),a(7),d("src",(r.perfil==null?null:r.perfil.photoURL)||r.defaultImage,pe),a(7),f(r.perfil==null?null:r.perfil.user_name),a(6),x(" ",r.perfil==null?null:r.perfil.profession," "),a(5),d("readonly",!r.editMode),a(5),d("readonly",!r.editMode),a(9),d("readonly",!r.editMode),a(4),d("readonly",!r.editMode),a(4),d("readonly",!r.editMode),a(4),d("readonly",!r.editMode),a(4),d("readonly",!r.editMode),a(4),d("readonly",!r.editMode),a(4),d("readonly",!r.editMode),a(4),d("readonly",!r.editMode),a(4),d("readonly",!r.editMode),a(4),d("readonly",!r.editMode),a(4),d("readonly",!r.editMode),a(4),d("readonly",!r.editMode),a(4),d("readonly",!r.editMode),a(4),d("readonly",!r.editMode),a(4),d("readonly",!r.editMode),a(4),d("readonly",!r.editMode),a(3),x(" ",r.editMode?"Cancelar edici\xF3n":"Editar perfil"," "),a(),d("ngIf",r.editMode),a(11),f(r.userData==null?null:r.userData.name))},dependencies:[E,M,V,N,_,w,D,L,P,A],styles:[".card[_ngcontent-%COMP%]{box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f}.card[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;min-width:0;word-wrap:break-word;background-color:#fff;background-clip:border-box;border:0 solid rgba(0,0,0,.125);border-radius:.25rem}.card-body[_ngcontent-%COMP%]{flex:1 1 auto;min-height:1px;padding:1rem}.gutters-sm[_ngcontent-%COMP%]{margin-right:-8px;margin-left:-8px}.gutters-sm[_ngcontent-%COMP%] > .col[_ngcontent-%COMP%], .gutters-sm[_ngcontent-%COMP%] > [class*=col-][_ngcontent-%COMP%]{padding-right:8px;padding-left:8px}.mb-3[_ngcontent-%COMP%], .my-3[_ngcontent-%COMP%]{margin-bottom:1rem!important}.bg-gray-300[_ngcontent-%COMP%]{background-color:#e2e8f0}.h-100[_ngcontent-%COMP%]{height:100%!important}.shadow-none[_ngcontent-%COMP%]{box-shadow:none!important}input[readonly][_ngcontent-%COMP%], textarea[readonly][_ngcontent-%COMP%], select[readonly][_ngcontent-%COMP%]{background-color:#e9ecef!important;color:#6c757d!important;cursor:not-allowed;pointer-events:none;border-color:#dee2e6}"]})};function Ie(m,n){if(m&1){let o=k();t(0,"li",8)(1,"div")(2,"input",9),u("change",function(){let s=g(o).$implicit,c=S();return v(c.toggleCompleted(s.id))}),e(),t(3,"span"),i(4),e()(),t(5,"button",10),u("click",function(){let s=g(o).$implicit,c=S();return v(c.deleteTask(s.id))}),i(6," Eliminar "),e()()}if(m&2){let o=n.$implicit;R("list-group-item-success",o.completed),a(2),d("checked",o.completed),a(),R("text-decoration-line-through",o.completed),a(),x(" ",o.title," ")}}var Q=class m{stored=localStorage.getItem("todo-app-tasks");todos=ee(this.stored?JSON.parse(this.stored):[]);newTask=ee("");remainingTasks=be(()=>this.todos().filter(n=>!n.completed).length);constructor(){he(()=>{localStorage.setItem("todo-app-tasks",JSON.stringify(this.todos()))})}addTask(){let n=this.newTask().trim();if(n){let o={id:Date.now(),title:n,completed:!1};this.todos.update(r=>[...r,o]),this.newTask.set("")}}toggleCompleted(n){this.todos.update(o=>o.map(r=>r.id===n?de(le({},r),{completed:!r.completed}):r))}deleteTask(n){this.todos.update(o=>o.filter(r=>r.id!==n))}static \u0275fac=function(o){return new(o||m)};static \u0275cmp=y({type:m,selectors:[["app-todo"]],decls:11,vars:3,consts:[[1,"container","mt-5"],[1,"text-center","mb-4"],[1,"input-group","mb-4"],["type","text","placeholder","Escribe una nueva tarea",1,"form-control",3,"ngModelChange","keyup.enter","ngModel"],[1,"btn","btn-primary",3,"click"],[1,"list-group","mb-3","border-1"],["class","list-group-item d-flex justify-content-between align-items-center text-start",3,"list-group-item-success",4,"ngFor","ngForOf"],[1,"text-muted","text-end"],[1,"list-group-item","d-flex","justify-content-between","align-items-center","text-start"],["type","checkbox",1,"form-check-input","me-2",3,"change","checked"],[1,"btn","btn-sm","btn-outline-danger",3,"click"]],template:function(o,r){o&1&&(t(0,"div",0)(1,"h2",1),i(2,"\u{1F4DD} Lista de Tareas"),e(),t(3,"div",2)(4,"input",3),u("ngModelChange",function(c){return r.newTask.set(c)})("keyup.enter",function(){return r.addTask()}),e(),t(5,"button",4),u("click",function(){return r.addTask()}),i(6,"Agregar"),e()(),t(7,"ul",5),b(8,Ie,7,6,"li",6),e(),t(9,"div",7),i(10),e()()),o&2&&(a(4),d("ngModel",r.newTask()),a(4),d("ngForOf",r.todos()),a(2),x(" Tareas pendientes: ",r.remainingTasks()," "))},dependencies:[E,z,V,_,w,_e],encapsulation:2})};var Ne=(m,n)=>({"bg-success-subtle":m,"":n}),Pe=m=>({"fw-bold":!0,"completed-text":m}),Ae=m=>({"completed-text":m}),Oe=(m,n,o)=>({"text-bg-danger":m,"text-bg-warning":n,"text-bg-secondary":o}),Ve=(m,n)=>({"bg-success":m,"bg-danger":n}),Le=(m,n)=>({"btn-warning":m,"btn-outline-success":n});function je(m,n){m&1&&(t(0,"div",29),i(1," El t\xEDtulo es obligatorio. "),e())}function Ue(m,n){m&1&&l(0,"i",45)}function Re(m,n){if(m&1){let o=k();t(0,"li",30)(1,"div",31)(2,"div",32),b(3,Ue,1,0,"i",33),i(4),e(),t(5,"small",34),i(6),e(),l(7,"br"),t(8,"span",35),i(9),e(),t(10,"span",36),i(11),B(12,"date"),e(),t(13,"span",37),i(14),e()(),t(15,"div",38)(16,"span",39),i(17),e(),t(18,"button",40),u("click",function(){let s=g(o).$implicit,c=S();return v(c.deleteTodo(s.id))}),l(19,"i",24),i(20," Eliminar "),e(),t(21,"button",41),u("click",function(){let s=g(o).$implicit,c=S();return v(c.toggleComplete(s))}),l(22,"i",42),i(23),e(),t(24,"button",43),u("click",function(){let s=g(o).$implicit,c=S();return v(c.editTodo(s.id))}),l(25,"i",44),i(26," Editar "),e()()()}if(m&2){let o=n.$implicit;d("ngClass",G(17,Ne,o.completed,!o.completed)),a(2),d("ngClass",ie(20,Pe,o.completed)),a(),d("ngIf",o.completed),a(),f(o.title),a(),d("ngClass",ie(22,Ae,o.completed)),a(),f(o.description),a(2),d("ngClass",fe(24,Oe,o.priority==="high",o.priority==="medium",o.priority==="low")),a(),f(o.priority==="high"?"Alta":o.priority==="medium"?"Media":o.priority==="low"?"Baja":"Desconocida"),a(2),f(ve(12,14,o.dueDate,"shortDate")),a(3),f(o.id),a(2),d("ngClass",G(28,Ve,o.completed,!o.completed)),a(),x(" ",o.completed?"Completada":"Pendiente"," "),a(4),d("ngClass",G(31,Le,o.completed,!o.completed)),a(2),x(" ",o.completed?"Desmarcar":"Completar"," ")}}var X=class m{constructor(n,o,r,s,c,U){this.todoService=n;this.alertService=o;this.fb=r;this.authService=s;this.route=c;this.router=U;console.log("%c<<< Constructor TODO-LIST >>>","background: #fff3cd; color: #664d03; padding: 2px 5px;"),this.todoForm=this.fb.group({title:["",[C.required,C.minLength(3)]],description:[""],dueDate:[null],priority:["",C.required]})}todoForm;todos=[];otraCondicion=!0;condicion=!0;ngOnInit(){return h(this,null,function*(){console.log("%c<<< ngOnInit TODO-LIST >>>","background: #6610f2; color: #ffffff; padding: 2px 5px;");let n=yield me(this.authService.getCurrentUser());if(!n||!n.uid){this.alertService.error("Usuario no autenticado"),console.error("\u274C Usuario no autenticado");return}console.log("\u{1F7E2} Usuario autenticado:",n.uid),this.todoService.getTodos().subscribe(o=>{this.todos=o,console.log("\u{1F4CB} Tareas recibidas:",this.todos)})})}onSubmit(){return h(this,null,function*(){if(this.todoForm.invalid){this.todoForm.markAllAsTouched(),this.alertService.warning("Por favor, completa todos los campos requeridos.");return}let n=this.todoForm.value;console.log("%c\u{1F4E4} Enviando tarea a Firestore:","color: #0d6efd",n);try{console.log("\u{1F4E4} Enviando tarea al servicio TodoService..."),yield this.todoService.addTodo({title:n.title,description:n.description,dueDate:n.dueDate,priority:n.priority}),this.alertService.success("Tu tarea fue guardada correctamente"),console.log("%c\u2705 Tarea guardada con \xE9xito","color: #198754"),this.todoForm.reset()}catch(o){this.alertService.error("Ocurri\xF3 un error al guardar la tarea"),console.error("%c\u274C Error al guardar tarea:","color: red",o?.message??o)}})}deleteTodo(n){return h(this,null,function*(){if((yield this.alertService.confirm("\xBFDeseas eliminar esta tarea?")).isConfirmed)try{yield this.todoService.deleteTodo(n),this.alertService.success("Tarea eliminada correctamente")}catch(r){console.error("\u274C Error al eliminar tarea:",r),this.alertService.error("No se pudo eliminar la tarea")}})}toggleComplete(n){return h(this,null,function*(){try{let o=!n.completed;yield this.todoService.updateTodo(n.id,{completed:o}),o?this.alertService.showToastSuccess("Marcado como completado","\xC9xito"):this.alertService.showToastWarning("Marcado como pendiente","Atenci\xF3n")}catch(o){this.alertService.showToastError("No se pudo actualizar el estado","Error"),console.error(o)}})}clearAll(){return h(this,null,function*(){if((yield this.alertService.confirm("\xBFEliminar todas las tareas?")).isConfirmed)try{yield this.todoService.clearAllTodos(),this.alertService.success("Todas las tareas fueron eliminadas")}catch(o){console.error("\u274C Error al limpiar tareas:",o),this.alertService.error("No se pudieron eliminar las tareas")}})}editTodo(n){this.router.navigate(["/dashboard/todo-list/todo-edit/",n])}testAlert(){this.alertService.showToastSuccess("\xA1Todo sali\xF3 bien!","\xC9xito"),console.log("%c\u2139\uFE0F Alerta de informaci\xF3n mostrada","color: #0dcaf0")}static \u0275fac=function(o){return new(o||m)(p(K),p(j),p(O),p(J),p(I),p($))};static \u0275cmp=y({type:m,selectors:[["app-todo-list"]],decls:49,vars:6,consts:[[1,"row"],[1,"col-12"],[1,"my-4"],[1,"col-12","border","p-3","mb-5","bg-light","rounded-1"],[1,"row","g-3",3,"ngSubmit","formGroup"],[1,"col-md-6"],["for","title",1,"form-label"],["type","text","formControlName","title","id","title",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","description",1,"form-label"],["type","text","formControlName","description","id","description",1,"form-control"],["for","dueDate",1,"form-label"],["type","date","formControlName","dueDate","id","dueDate",1,"form-control"],["for","priority",1,"form-label"],["formControlName","priority","id","priority",1,"form-select"],["value","","disabled",""],["value","low"],["value","medium"],["value","high"],[1,"col-12","text-end"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"mb-3"],[1,"col-12","p-3","text-end"],[1,"btn","btn-danger",3,"click"],[1,"bi","bi-trash3-fill"],[1,"btn","btn-success","mx-2",3,"click"],[1,"bi","bi-bell-fill"],[1,"list-group"],["class","list-group-item d-flex flex-wrap flex-md-nowrap justify-content-between align-items-center align-items-md-center gap-3",3,"ngClass",4,"ngFor","ngForOf"],[1,"invalid-feedback"],[1,"list-group-item","d-flex","flex-wrap","flex-md-nowrap","justify-content-between","align-items-center","align-items-md-center","gap-3",3,"ngClass"],[1,"text-start","flex-grow-1","me-3","todo-content"],[1,"fw-bold",3,"ngClass"],["class","bi bi-check-circle-fill text-success me-1",4,"ngIf"],[1,"text-muted",3,"ngClass"],[1,"badge","me-2",3,"ngClass"],[1,"badge","text-bg-light","text-dark"],[1,"badge","text-bg-primary","ms-2"],[1,"d-flex","flex-wrap","align-items-center","justify-content-end","gap-2","todo-actions"],[1,"badge",3,"ngClass"],[1,"btn","btn-sm","btn-outline-danger","ms-2",3,"click"],[1,"btn","btn-sm","ms-2",3,"click","ngClass"],[1,"bi","bi-check"],[1,"btn","btn-sm","btn-outline-primary","ms-2",3,"click"],[1,"bi","bi-pencil-square"],[1,"bi","bi-check-circle-fill","text-success","me-1"]],template:function(o,r){if(o&1&&(t(0,"div",0)(1,"div",1)(2,"h2",2),i(3,"Agregar nueva tarea"),e()(),t(4,"div",3)(5,"form",4),u("ngSubmit",function(){return r.onSubmit()}),t(6,"div",5)(7,"label",6),i(8,"T\xEDtulo"),e(),l(9,"input",7),b(10,je,2,0,"div",8),e(),t(11,"div",5)(12,"label",9),i(13,"Descripci\xF3n"),e(),l(14,"input",10),e(),t(15,"div",5)(16,"label",11),i(17,"Fecha l\xEDmite"),e(),l(18,"input",12),e(),t(19,"div",5)(20,"label",13),i(21,"Prioridad"),e(),t(22,"select",14)(23,"option",15),i(24,"Selecciona prioridad"),e(),t(25,"option",16),i(26,"Baja"),e(),t(27,"option",17),i(28,"Media"),e(),t(29,"option",18),i(30,"Alta"),e()()(),t(31,"div",19)(32,"button",20),i(33,"Guardar tarea"),e()()()()(),l(34,"hr",2),t(35,"div",0)(36,"div",1)(37,"h2",21),i(38,"Tareas registradas"),e()(),t(39,"div",22)(40,"button",23),u("click",function(){return r.clearAll()}),l(41,"i",24),i(42," Eliminar todas las tareas "),e(),t(43,"button",25),u("click",function(){return r.testAlert()}),l(44,"i",26),i(45," prueba de alert toast "),e()(),t(46,"div",1)(47,"ul",27),b(48,Re,27,34,"li",28),e()()()),o&2){let s,c;a(5),d("formGroup",r.todoForm),a(4),R("is-invalid",((s=r.todoForm.get("title"))==null?null:s.invalid)&&((s=r.todoForm.get("title"))==null?null:s.touched)),a(),d("ngIf",((c=r.todoForm.get("title"))==null?null:c.invalid)&&((c=r.todoForm.get("title"))==null?null:c.touched)),a(22),d("disabled",r.todoForm.invalid),a(16),d("ngForOf",r.todos)}},dependencies:[E,Se,z,M,xe,V,N,W,q,_,H,w,D,L,P,A,Ee],styles:['@charset "UTF-8";.completed-text[_ngcontent-%COMP%]{color:#6c757d;text-decoration:line-through;transition:color .3s ease,text-decoration .3s ease}.todo-content[_ngcontent-%COMP%]{min-width:0}.todo-actions[_ngcontent-%COMP%]{flex-shrink:0;white-space:nowrap}@media (max-width: 768px){.todo-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;width:100%}.todo-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}}']})};function Ge(m,n){m&1&&(t(0,"div",24)(1,"div",25)(2,"span",26),i(3,"Loading..."),e()()())}var Z=class m{constructor(n,o,r,s,c){this.route=n;this.router=o;this.fb=r;this.todoService=s;this.alertService=c;this.todoForm=this.fb.group({title:["",[C.required,C.minLength(3)]],description:[""],dueDate:[""],priority:["",C.required]})}todoForm;todoId;isLoading=!1;ngOnInit(){return h(this,null,function*(){if(this.todoId=this.route.snapshot.paramMap.get("id"),console.log("%c<<< uid | TODO >>>","background: #d63384; color: #fff; padding: 2px 5px;",this.todoId),this.todoId)try{let n=yield this.todoService.getTodoById(this.todoId);console.log("%c\u2705 Tarea cargada:","color: #0d6efd;",n),this.todoForm.patchValue({title:n.title,description:n.description,dueDate:n.dueDate?this.formatDateForInput(n.dueDate):"",priority:n.priority})}catch(n){this.alertService.showToastError("Error al cargar la tarea"),console.error("\u274C Error al obtener tarea:",n),this.router.navigate(["/dashboard/todo-list"])}else this.alertService.error("ID de tarea no proporcionado"),this.router.navigate(["/dashboard/todo-list"])})}formatDateForInput(n){let o=new Date(n),r=o.getFullYear(),s=String(o.getMonth()+1).padStart(2,"0"),c=String(o.getDate()).padStart(2,"0");return`${r}-${s}-${c}`}onSubmit(){return h(this,null,function*(){if(this.isLoading=!0,!this.todoForm.invalid)try{yield this.todoService.updateTodo(this.todoId,this.todoForm.value),this.isLoading=!1,this.todoService.updateTodo(this.todoId,this.todoForm.value),console.log("%c<<< onSubmit >>>","background: #20c997; color: #fff; padding: 2px 5px;",this.todoForm.value),this.alertService.showToastSuccess("Tarea actualizada con \xE9xito","Mensaje"),this.router.navigate(["/dashboard"])}catch{this.alertService.error("Error al actualizar tarea")}})}static \u0275fac=function(o){return new(o||m)(p(I),p($),p(O),p(K),p(j))};static \u0275cmp=y({type:m,selectors:[["app-todo-edit"]],decls:58,vars:14,consts:[[1,"container","mt-4"],[1,"row","g-3","text-start",3,"ngSubmit","formGroup"],[1,"col-sm-12","col-md-12","mb-3"],[1,"form-label"],["name","title","type","text","formControlName","title",1,"form-control"],[1,"col-sm-12","col-md-6","mb-3"],["type","date","formControlName","dueDate",1,"form-control"],["formControlName","priority",1,"form-select"],["value","low"],["value","medium"],["value","high"],["formControlName","description",1,"form-control"],[1,"col-12"],["class","d-flex justify-content-center align-items-center",4,"ngIf"],[1,"col-12","text-end","mb-3"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"col-12","border-2"],[1,"row"],[1,"col-12","p-3"],[1,"bd-callout","bd-callout-code"],[1,"mx-1"],[1,"badge","text-bg-primary","mx-1"],[1,"badge","text-bg-warning","mx-1"],[1,"text-start"],[1,"d-flex","justify-content-center","align-items-center"],["role","status",1,"spinner-border"],[1,"visually-hidden"]],template:function(o,r){o&1&&(t(0,"div",0)(1,"h2"),i(2,"Editar Tarea"),e(),t(3,"form",1),u("ngSubmit",function(){return r.onSubmit()}),t(4,"div",2)(5,"label",3),i(6,"T\xEDtulo"),e(),l(7,"input",4),e(),t(8,"div",5)(9,"label",3),i(10,"Fecha l\xEDmite"),e(),l(11,"input",6),e(),t(12,"div",5)(13,"label",3),i(14,"Prioridad"),e(),t(15,"select",7)(16,"option",8),i(17,"Baja"),e(),t(18,"option",9),i(19,"Media"),e(),t(20,"option",10),i(21,"Alta"),e()()(),t(22,"div",2)(23,"label",3),i(24,"Descripci\xF3n"),e(),l(25,"textarea",11),e(),t(26,"div",12),b(27,Ge,4,0,"div",13),e(),t(28,"div",14)(29,"button",15),i(30,"Guardar cambios"),e()(),t(31,"div",16)(32,"div",17)(33,"div",18)(34,"div",19)(35,"strong"),i(36,"Estado del formulario:"),e(),l(37,"hr"),t(38,"span",20),i(39,"VALID: "),t(40,"span"),i(41),e()(),t(42,"span",20),i(43,"INVALID: "),t(44,"span"),i(45),e()(),t(46,"span",20),i(47,"STATUS: "),t(48,"span",21),i(49),e()(),t(50,"span",20),i(51,"DISABLED: "),t(52,"span",22),i(53),e()(),l(54,"hr"),t(55,"pre",23),i(56),B(57,"json"),e()()()()()()()),o&2&&(a(3),d("formGroup",r.todoForm),a(24),d("ngIf",r.isLoading),a(2),d("disabled",r.todoForm.invalid),a(11),te(r.todoForm.status=="VALID"?"badge text-bg-success mx-1":"badge text-bg-danger mx-1"),a(),f(r.todoForm.valid),a(3),te(r.todoForm.status=="INVALID"?"badge text-bg-success mx-1":"badge text-bg-danger mx-1"),a(),f(r.todoForm.invalid),a(4),f(r.todoForm.status),a(4),f(r.todoForm.disabled),a(3),f(ge(57,12,r.todoForm.value)))},dependencies:[E,M,ye,L,N,W,q,_,H,w,D,P,A],encapsulation:2})};var Be=[{path:"profile/:uid",component:Y},{path:"todo",component:Q},{path:"todo-list",component:X},{path:"todo-list/todo-edit/:id",component:Z},{path:"",redirectTo:"todo-list",pathMatch:"full"}],At=Be;export{At as default};
